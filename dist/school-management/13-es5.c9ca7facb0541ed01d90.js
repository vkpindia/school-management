!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var c=0;c<e.length;c++){var n=e[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,c,n){return c&&e(t.prototype,c),n&&e(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{eK3z:function(e,n,i){"use strict";i.r(n),i.d(n,"AttendanceModule",(function(){return _t}));var a,s=i("ofXK"),o=i("tyNb"),r=i("M9IT"),l=i("Dh3D"),d=i("+0xr"),u=i("0EQZ"),h=i("3Pt+"),m=i("fXoL"),f=i("tk/3"),p=i("z6cu"),g=i("lJxs"),b=i("JIr8"),v=i("AytR"),D=((a=function(){function e(c){t(this,e),this._http=c,this._apiUrl=v.a.apiBaseUrl,this.httpOptions={headers:new f.d({"Content-Type":"Application/json; charset=utf-8","Access-Control-Allow-Origin":"*"}),crossDomain:!0}}return c(e,[{key:"handleError",value:function(t){return t.error instanceof ErrorEvent?console.error("An error occurred:",t.error.message):console.error("Back-end returned code ".concat(t.status,", body was: ")+t.error),Object(p.a)("Something bad happened; please try again later.")}},{key:"extractData",value:function(t){return t||{}}},{key:"getStudentRecord",value:function(t,e){return this._http.get(this._apiUrl+"/student/GetStudentSearch?classid=".concat(t,"&sectionid=").concat(e)).pipe(Object(g.a)(this.extractData),Object(b.a)(this.handleError))}},{key:"getStudentAttendance",value:function(t,e){return this._http.get(this._apiUrl+"attandance/getstudentsattandancebyclasssection?classid=".concat(t,"&sectionid=").concat(e)).pipe(Object(g.a)(this.extractData),Object(b.a)(this.handleError))}},{key:"getClassSection",value:function(){return this._http.get(this._apiUrl+"setup/getclassesandsections").pipe(Object(g.a)(this.extractData),Object(b.a)(this.handleError))}},{key:"getSections",value:function(t){return this._http.get("".concat(this._apiUrl,"setup/getsectionsforclass?id=").concat(t)).pipe(Object(g.a)(this.extractData),Object(b.a)(this.handleError))}},{key:"saveAttendance",value:function(t){return this._http.post(this._apiUrl+"attandance/addstudentatendence",t).pipe(Object(g.a)(this.extractData),Object(b.a)(this.handleError))}},{key:"updateAttendance",value:function(t){return this._http.put(this._apiUrl+"attandance/updatestudentatendence",t).pipe(Object(g.a)(this.extractData),Object(b.a)(this.handleError))}},{key:"deleteAttendance",value:function(t){return this._http.delete(this._apiUrl+"attandance/deletestudentatendence?id="+t).pipe(Object(g.a)(this.extractData),Object(b.a)(this.handleError))}}]),e}()).\u0275fac=function(t){return new(t||a)(m.qc(f.b))},a.\u0275prov=m.Yb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),S=i("dNgK"),w=i("Wp6s"),y=i("kmnG"),k=i("d3UM"),_=i("qFsG"),L=i("z17N"),C=i("NFeN"),I=i("FKr1"),x=i("bTqV"),P=i("bSwM");function A(t,e){if(1&t&&(m.ic(0,"mat-option",36),m.Xc(1),m.hc()),2&t){var c=e.$implicit;m.Dc("value",c.id),m.Pb(1),m.Yc(c.classname)}}function X(t,e){1&t&&(m.ic(0,"mat-error"),m.Xc(1," Class is "),m.ic(2,"strong"),m.Xc(3,"required"),m.hc(),m.hc())}function V(t,e){if(1&t&&(m.ic(0,"mat-option",36),m.Xc(1),m.hc()),2&t){var c=e.$implicit;m.Dc("value",c.id),m.Pb(1),m.Yc(c.sectionname)}}function F(t,e){1&t&&(m.ic(0,"mat-error"),m.Xc(1," Section is "),m.ic(2,"strong"),m.Xc(3,"required"),m.hc(),m.hc())}function O(t,e){1&t&&(m.ic(0,"mat-error"),m.Xc(1," Date-time is "),m.ic(2,"strong"),m.Xc(3,"required"),m.hc(),m.hc())}function j(t,e){1&t&&(m.ic(0,"mat-error"),m.Xc(1," Attendace_part is "),m.ic(2,"strong"),m.Xc(3,"required"),m.hc(),m.hc())}function N(t,e){if(1&t){var c=m.jc();m.ic(0,"th",37),m.ic(1,"mat-checkbox",38),m.tc("change",(function(t){m.Nc(c);var e=m.xc(2);return t?e.masterToggle():null})),m.hc(),m.hc()}if(2&t){var n=m.xc(2);m.Pb(1),m.Dc("checked",n.selection.hasValue()&&n.isAllSelected())("indeterminate",n.selection.hasValue()&&!n.isAllSelected())("aria-label",n.checkboxLabel())}}function R(t,e){if(1&t){var c=m.jc();m.ic(0,"td",39),m.ic(1,"mat-checkbox",40),m.tc("click",(function(t){return m.Nc(c),t.stopPropagation()}))("change",(function(t){m.Nc(c);var n=e.$implicit,i=m.xc(2);return t&&i.selection.toggle(n),i.onSelectionToggle(n)})),m.hc(),m.hc()}if(2&t){var n=e.$implicit,i=m.xc(2);m.Pb(1),m.Dc("checked",i.selection.isSelected(n))("aria-label",i.checkboxLabel(n))("checked",!0)}}function T(t,e){1&t&&(m.ic(0,"th",41),m.Xc(1,"Student Name"),m.hc())}function E(t,e){if(1&t&&(m.ic(0,"span"),m.Xc(1),m.hc()),2&t){var c=m.xc().$implicit;m.Pb(1),m.Yc(c.name)}}function $(t,e){if(1&t&&(m.ic(0,"td",39),m.Vc(1,E,2,1,"span",42),m.hc()),2&t){var c=e.$implicit;m.xc(2);var n=m.Lc(11);m.Pb(1),m.Dc("ngIf",c.name)("ngIfElse",n)}}function q(t,e){1&t&&m.dc(0,"tr",43)}function z(t,e){1&t&&m.dc(0,"tr",44)}function M(t,e){if(1&t){var c=m.jc();m.ic(0,"button",45),m.tc("click",(function(t){return m.Nc(c),m.xc(2).onFormReset(t)})),m.Xc(1,"Reset"),m.hc()}}var U=function(){return[5,10,25,100]};function H(t,e){if(1&t){var c=m.jc();m.ic(0,"form",6),m.tc("ngSubmit",(function(){return m.Nc(c),m.xc().onSubmit()})),m.ic(1,"div",7),m.ic(2,"div",8),m.ic(3,"mat-form-field",9),m.ic(4,"mat-label"),m.Xc(5,"Class"),m.hc(),m.ic(6,"mat-select",10),m.tc("selectionChange",(function(t){return m.Nc(c),m.xc().onClassChange(t)})),m.Vc(7,A,2,2,"mat-option",11),m.hc(),m.Vc(8,X,4,0,"mat-error",12),m.hc(),m.hc(),m.ic(9,"div",8),m.ic(10,"mat-form-field",9),m.ic(11,"mat-label"),m.Xc(12,"Section"),m.hc(),m.ic(13,"mat-select",13),m.tc("selectionChange",(function(t){return m.Nc(c),m.xc().onSectionChange(t)})),m.Vc(14,V,2,2,"mat-option",11),m.hc(),m.Vc(15,F,4,0,"mat-error",12),m.hc(),m.hc(),m.ic(16,"div",8),m.ic(17,"mat-form-field",14),m.ic(18,"mat-label"),m.Xc(19,"Select Date"),m.hc(),m.dc(20,"input",15),m.ic(21,"mat-icon",16),m.Xc(22,"date_range"),m.hc(),m.dc(23,"owl-date-time",null,17),m.Vc(25,O,4,0,"mat-error",12),m.hc(),m.hc(),m.ic(26,"div",8),m.ic(27,"mat-form-field",9),m.ic(28,"mat-label"),m.Xc(29,"Select shift"),m.hc(),m.ic(30,"mat-select",18),m.ic(31,"mat-option",19),m.Xc(32,"First shift"),m.hc(),m.ic(33,"mat-option",20),m.Xc(34,"Second shift"),m.hc(),m.hc(),m.Vc(35,j,4,0,"mat-error",12),m.hc(),m.hc(),m.ic(36,"div",21),m.ic(37,"div",22),m.ic(38,"div",23),m.ic(39,"h3"),m.ic(40,"strong"),m.Xc(41,"Student List"),m.hc(),m.hc(),m.hc(),m.ic(42,"table",24),m.gc(43,25),m.Vc(44,N,2,3,"th",26),m.Vc(45,R,2,3,"td",27),m.fc(),m.gc(46,28),m.Vc(47,T,2,0,"th",29),m.Vc(48,$,2,2,"td",27),m.fc(),m.Vc(49,q,1,0,"tr",30),m.Vc(50,z,1,0,"tr",31),m.hc(),m.dc(51,"mat-paginator",32),m.hc(),m.hc(),m.hc(),m.ic(52,"div",33),m.ic(53,"button",34),m.Xc(54,"Submit"),m.hc(),m.Vc(55,M,2,0,"button",35),m.hc(),m.hc()}if(2&t){var n=m.Lc(24),i=m.xc();m.Dc("formGroup",i.attendanceForm),m.Pb(7),m.Dc("ngForOf",i.classList),m.Pb(1),m.Dc("ngIf",i.submitted&&i.f.classid.hasError("required")),m.Pb(6),m.Dc("ngForOf",i.sectionList),m.Pb(1),m.Dc("ngIf",i.submitted&&i.f.sectionid.hasError("required")),m.Pb(5),m.Dc("owlDateTime",n)("owlDateTimeTrigger",n),m.Pb(1),m.Dc("owlDateTimeTrigger",n),m.Pb(4),m.Dc("ngIf",i.submitted&&i.f.date.hasError("required")),m.Pb(10),m.Dc("ngIf",i.submitted&&i.f.attendace_part.hasError("required")),m.Pb(7),m.Dc("dataSource",i.studentList),m.Pb(7),m.Dc("matHeaderRowDef",i.displayedColumns),m.Pb(1),m.Dc("matRowDefColumns",i.displayedColumns),m.Pb(1),m.Dc("length",i.recordLength)("pageSize",10)("pageSizeOptions",m.Gc(17,U)),m.Pb(4),m.Dc("ngIf",!i.showButtons)}}function Y(t,e){}var B,G=((B=function(){function e(c,n,i,a,s){t(this,e),this._cs=c,this._router=n,this._activatedRout=i,this._date=a,this._snackBar=s,this.displayedColumns=["select","name"],this.filterData="",this.isLoading=!0,this.classList=[],this.sectionList=[],this.classID=new h.g,this.sectionID=new h.g,this.shift=new h.g,this.studentNameRecord=[],this.absentStudentsID=[],this.selection=new u.c(!0,this.studentList?this.studentList.data:[]),this.loading=!1,this.submitted=!1,this.isSelected=!0,this.isFormActive=!0,this.error="",this.cardTitle="Add New Students",this.showButtons=!1,this.buttonLabel="Submit",this.showForm=!0,this.disabled=!1,this.showSpinners=!0,this.showSeconds=!1,this.touchUi=!1,this.enableMeridian=!1,this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.color="primary"}return c(e,[{key:"ngOnInit",value:function(){this.attendanceForm=new h.j({classid:new h.g(null,h.x.required),sectionid:new h.g(null,h.x.required),attendace_part:new h.g(null,h.x.required),date:new h.g(new Date,h.x.required)}),this.isAllSelected(),this.getClassSection(),this.getStudentAttendanceList()}},{key:"getClassSection",value:function(){var t=this;this._cs.getClassSection().subscribe((function(e){e&&(t.classList=e)}))}},{key:"onClassChange",value:function(t){var e=this;t&&this._cs.getSections(t.value).subscribe((function(t){t&&(e.sectionList=t)}))}},{key:"getStudentList",value:function(){var t=this;this.attendanceForm.value.classid&&this.attendanceForm.value.sectionid&&this._cs.getStudentRecord(this.attendanceForm.value.classid,this.attendanceForm.value.sectionid).subscribe((function(e){e&&(t.recordLength=e.length,t.studentNameRecord=e,t.studentList=new d.k(e),t.selection=new u.c(!0,t.studentList.data),t.studentList.sort=t.TSort,t.studentList.paginator=t.paginator,t.isLoading=!1)}))}},{key:"getAttendanceList",value:function(){var t=this;this._cs.getStudentAttendance(this.classID.value,this.sectionID.value).subscribe((function(e){if(e){var c,n=[],i={};e&&e.length&&e[0].absent_student_names1?c=e[0].absent_student_id1.split(","):e&&e.length&&e[0].absent_student_names2&&(c=e[0].absent_student_id2.split(",")),c&&c.length&&(c.map((function(t,c){i.id=e[0].id,i.name=t,i.class=e[0].classname,i.section=e[0].sectionname,i.date=e[0].date,n.push(Object.assign({},i))})),console.log("absentStudentRecord",n))}t.isLoading=!1}))}},{key:"getStudentAttendanceList",value:function(){this._cs.getStudentAttendance(this.classID.value,this.sectionID.value).subscribe((function(t){}))}},{key:"onSectionChange",value:function(t){t&&this.getStudentList()}},{key:"showNotification",value:function(t){this._snackBar.open(t,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["success-snackbar"]})}},{key:"onFormReset",value:function(t){t&&this.attendanceForm&&this.attendanceForm.reset()}},{key:"isAllSelected",value:function(){if(this.studentList)return this.selection.selected.length===this.studentList.data.length}},{key:"onSelectionToggle",value:function(t){!1===this.selection.isSelected(t)&&this.absentStudentsID.push(t.id)}},{key:"masterToggle",value:function(){var t=this;this.isAllSelected()?this.selection.clear():this.studentList.data.forEach((function(e){return t.selection.select(e)}))}},{key:"checkboxLabel",value:function(t){return t?"".concat(this.selection.isSelected(t)?"deselect":"select"," row ").concat(t.position+1):(this.isAllSelected()?"select":"deselect")+" all"}},{key:"applyFilter",value:function(t){this.studentList.filter=t.target.value.trim().toLowerCase(),this.studentList.paginator&&this.studentList.paginator.firstPage()}},{key:"onSubmit",value:function(){var t=this;if(this.submitted=!0,!this.attendanceForm.invalid){this.attendanceForm.value&&(this.attendanceForm.value.date=this._date.transform(this.attendanceForm.value.date,"MM/dd/yyyy h:mm a"));var e={},c=[];Object.assign(e,this.attendanceForm.value),console.log("absentStudentsID",this.absentStudentsID),console.log(" this.studentNameRecord",this.studentNameRecord),this.absentStudentsID.map((function(e){t.studentNameRecord.map((function(t){t.id===e&&c.push(t.name)}))})),console.log("studentsName",c),"shift_1"===e.attendace_part?(e.part1=!0,e.part2=!1,e.absent_student_id1=this.absentStudentsID.toString(),e.absent_student_names1=c.toString(),e.absent_student_names2=null,e.absent_student_id2=null):"shift_2"===this.attendanceForm.value.attendace_part&&(e.part2=!0,e.part1=!1,e.absent_student_id2=this.absentStudentsID.toString(),e.absent_student_names2=c.toString(),e.absent_student_names1=null,e.absent_student_id1=null),delete e.attendace_part,this.classList&&this.classList.length&&this.classList.map((function(t){e.classid===t.id&&(e.classname=t.classname)})),this.sectionList&&this.sectionList.length&&this.sectionList.map((function(t){e.sectionid===t.id&&(e.sectionname=t.sectionname)})),this.loading=!0,this._cs.saveAttendance(e).subscribe((function(e){t.showNotification("Submitted Successfully!!"),t.attendanceForm.reset(),t.isFormActive=!1,setTimeout((function(){return t.isFormActive=!0}),0),t.getStudentList(),t.showForm=!1,t.studentList=new d.k([]),setTimeout((function(){t.showForm=!0}),50)}),(function(e){t.error=e,t.loading=!1,console.error(t.error)}))}}},{key:"f",get:function(){return this.attendanceForm.controls}}]),e}()).\u0275fac=function(t){return new(t||B)(m.cc(D),m.cc(o.g),m.cc(o.a),m.cc(s.f),m.cc(S.a))},B.\u0275cmp=m.Wb({type:B,selectors:[["app-attendance"]],viewQuery:function(t,e){var c;1&t&&(m.Rc(r.a,!0),m.Rc(l.a,!0)),2&t&&(m.Kc(c=m.uc())&&(e.paginator=c.first),m.Kc(c=m.uc())&&(e.TSort=c.first))},features:[m.Ob([s.f])],decls:12,vars:1,consts:[[1,"form-container"],[1,"page-title"],[1,"form-fields"],[1,"pt-2"],[3,"formGroup","ngSubmit",4,"ngIf"],["dash",""],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12","col-sm-6","col-md-4"],["appearance","outline",1,"p-0"],["placeholder","Select Class","formControlName","classid",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["placeholder","Select Section","formControlName","sectionid",3,"selectionChange"],["appearance","outline",1,"col-12","p-0"],["matInput","","placeholder","Date Time","formControlName","date",3,"owlDateTime","owlDateTimeTrigger"],["matSuffix","",2,"cursor","pointer",3,"owlDateTimeTrigger"],["dt2",""],["placeholder","Select shift","formControlName","attendace_part"],["value","shift_1"],["value","shift_2"],[1,"list-container","col-12"],[1,"s-list","studentList","p-0"],[1,"list-head"],["mat-table","","matSort","",1,"col-12",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],[1,"example-button-row","pt-3","text-center"],["mat-raised-button","","color","primary","type","submit"],["mat-raised-button","","class","ml-3 mat-secondary",3,"click",4,"ngIf"],[3,"value"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell","","mat-sort-header",""],[4,"ngIf","ngIfElse"],["mat-header-row",""],["mat-row",""],["mat-raised-button","",1,"ml-3","mat-secondary",3,"click"]],template:function(t,e){1&t&&(m.ic(0,"div",0),m.ic(1,"div",1),m.ic(2,"h3"),m.Xc(3,"Attendance"),m.hc(),m.hc(),m.ic(4,"div",2),m.ic(5,"mat-card"),m.ic(6,"mat-card-title"),m.Xc(7,"Student Attendance"),m.hc(),m.ic(8,"mat-card-content",3),m.Vc(9,H,56,18,"form",4),m.hc(),m.hc(),m.hc(),m.Vc(10,Y,0,0,"ng-template",null,5,m.Wc),m.hc()),2&t&&(m.Pb(9),m.Dc("ngIf",e.isFormActive))},directives:[w.a,w.d,w.b,s.n,h.z,h.r,h.k,y.c,y.f,k.a,h.q,h.i,s.m,_.b,h.c,L.b,L.d,C.a,y.g,L.a,I.n,d.j,l.a,d.c,d.e,d.b,d.g,d.i,r.a,x.a,y.b,d.d,P.a,d.a,l.b,d.f,d.h],styles:[""]}),B),K=i("1kSV");function W(t,e){if(1&t&&(m.ic(0,"mat-option",31),m.Xc(1),m.hc()),2&t){var c=e.$implicit;m.Dc("value",c.id),m.Pb(1),m.Yc(c.classname)}}function J(t,e){if(1&t&&(m.ic(0,"mat-option",31),m.Xc(1),m.hc()),2&t){var c=e.$implicit;m.Dc("value",c.id),m.Pb(1),m.Yc(c.sectionname)}}function Z(t,e){if(1&t){var c=m.jc();m.ic(0,"th",32),m.ic(1,"mat-checkbox",33),m.tc("change",(function(t){m.Nc(c);var e=m.xc();return t?e.masterToggle():null})),m.hc(),m.hc()}if(2&t){var n=m.xc();m.Pb(1),m.Dc("checked",n.selection.hasValue()&&n.isAllSelected())("indeterminate",n.selection.hasValue()&&!n.isAllSelected())("aria-label",n.checkboxLabel())}}function Q(t,e){if(1&t){var c=m.jc();m.ic(0,"td",34),m.ic(1,"mat-checkbox",35),m.tc("click",(function(t){return m.Nc(c),t.stopPropagation()}))("change",(function(t){m.Nc(c);var n=e.$implicit,i=m.xc();return t?i.selection.toggle(n):null})),m.hc(),m.hc()}if(2&t){var n=e.$implicit,i=m.xc();m.Pb(1),m.Dc("checked",i.selection.isSelected(n))("aria-label",i.checkboxLabel(n))}}function tt(t,e){1&t&&(m.ic(0,"th",36),m.Xc(1,"Absent Students"),m.hc())}function et(t,e){if(1&t&&(m.ic(0,"span"),m.Xc(1),m.hc()),2&t){var c=m.xc().$implicit;m.Pb(1),m.Yc(c.name)}}function ct(t,e){if(1&t&&(m.ic(0,"td",34),m.Vc(1,et,2,1,"span",37),m.hc()),2&t){var c=e.$implicit;m.xc();var n=m.Lc(56);m.Pb(1),m.Dc("ngIf",c.name)("ngIfElse",n)}}function nt(t,e){1&t&&(m.ic(0,"th",36),m.Xc(1,"Class Name"),m.hc())}function it(t,e){if(1&t&&(m.ic(0,"span"),m.Xc(1),m.hc()),2&t){var c=m.xc().$implicit;m.Pb(1),m.Yc(c.class)}}function at(t,e){if(1&t&&(m.ic(0,"td",34),m.Vc(1,it,2,1,"span",37),m.hc()),2&t){var c=e.$implicit;m.xc();var n=m.Lc(56);m.Pb(1),m.Dc("ngIf",c.class)("ngIfElse",n)}}function st(t,e){1&t&&(m.ic(0,"th",36),m.Xc(1," Section Name "),m.hc())}function ot(t,e){if(1&t&&(m.ic(0,"span"),m.Xc(1),m.hc()),2&t){var c=m.xc().$implicit;m.Pb(1),m.Yc(c.section)}}function rt(t,e){if(1&t&&(m.ic(0,"td",34),m.Vc(1,ot,2,1,"span",37),m.hc()),2&t){var c=e.$implicit;m.xc();var n=m.Lc(56);m.Pb(1),m.Dc("ngIf",c.section)("ngIfElse",n)}}function lt(t,e){1&t&&(m.ic(0,"th",36),m.Xc(1," Date "),m.hc())}function dt(t,e){if(1&t&&(m.ic(0,"span",39),m.Xc(1),m.yc(2,"date"),m.hc()),2&t){var c=m.xc().$implicit;m.Pb(1),m.Zc(" ",m.Ac(2,1,c.date,"MM/dd/yyyy")," ")}}function ut(t,e){if(1&t&&(m.ic(0,"td",34),m.Vc(1,dt,3,4,"span",38),m.hc()),2&t){var c=e.$implicit;m.xc();var n=m.Lc(56);m.Pb(1),m.Dc("ngIf",c.date)("ngIfElse",n)}}function ht(t,e){1&t&&m.dc(0,"th",40)}function mt(t,e){if(1&t){var c=m.jc();m.ic(0,"td",34),m.ic(1,"div",41),m.ic(2,"div",42),m.dc(3,"span",43),m.ic(4,"div",44),m.ic(5,"button",45),m.tc("click",(function(){m.Nc(c);var t=e.$implicit;return m.xc().onDelete(t)})),m.dc(6,"span",46),m.Xc(7,"\xa0\xa0\xa0Delete"),m.hc(),m.hc(),m.hc(),m.hc(),m.hc()}}function ft(t,e){1&t&&m.dc(0,"tr",47)}function pt(t,e){1&t&&m.dc(0,"tr",48)}function gt(t,e){1&t&&m.Xc(0,"---")}var bt,vt,Dt,St=function(){return[5,10,25,100]},wt=[{path:"",component:G},{path:"list",component:(bt=function(){function e(c,n,i){t(this,e),this._cs=c,this._router=n,this._activatedRout=i,this.displayedColumns=["select","name","class","section","date","actions"],this.filterData="",this.isLoading=!0,this.selection=new u.c(!0,[]),this.classID=new h.g,this.sectionID=new h.g,this.classList=[],this.sectionList=[]}return c(e,[{key:"ngOnInit",value:function(){this.getClassSection()}},{key:"getAttendanceList",value:function(){var t=this;this._cs.getStudentAttendance(this.classID.value,this.sectionID.value).subscribe((function(e){if(e){var c,n=[],i={};e&&e.length&&e[0].absent_student_names1?c=e[0].absent_student_names1.split(","):e&&e.length&&e[0].absent_student_names2&&(c=e[0].absent_student_names2.split(",")),c&&c.length&&(c.map((function(t,c){i.id=e[0].id,i.name=t,i.class=e[0].classname,i.section=e[0].sectionname,i.date=e[0].date,n.push(Object.assign({},i))})),console.log("absentStudentRecord",n)),t.recordLength=n.length,t.attendanceList=new d.k(n),t.attendanceList.sort=t.TSort,t.attendanceList.paginator=t.paginator}t.isLoading=!1}))}},{key:"getClassSection",value:function(){var t=this;this._cs.getClassSection().subscribe((function(e){e&&(t.classList=e)}))}},{key:"onClassChange",value:function(t){var e=this;t&&this._cs.getSections(t.value).subscribe((function(t){t&&(e.sectionList=t)}))}},{key:"isAllSelected",value:function(){if(this.classID.value&&this.sectionID.value&&this.attendanceList)return this.selection.selected.length===this.attendanceList.data.length}},{key:"masterToggle",value:function(){var t=this;this.classID.value&&this.sectionID.value&&(this.isAllSelected()?this.selection.clear():this.attendanceList.data.forEach((function(e){return t.selection.select(e)})))}},{key:"checkboxLabel",value:function(t){return t?"".concat(this.selection.isSelected(t)?"deselect":"select"," row ").concat(t.position+1):(this.isAllSelected()?"select":"deselect")+" all"}},{key:"applyFilter",value:function(t){this.attendanceList.filter=t.target.value.trim().toLowerCase(),this.attendanceList.paginator&&this.attendanceList.paginator.firstPage()}},{key:"onDelete",value:function(t){var e=this;console.log("row",t),confirm("Are sure you want to delete this attendance record?")&&this._cs.deleteAttendance(t.id).subscribe((function(t){e.getAttendanceList()}))}},{key:"onEdit",value:function(t){this._router.navigate(["attendance"],{queryParams:{id:t.id}})}}]),e}(),bt.\u0275fac=function(t){return new(t||bt)(m.cc(D),m.cc(o.g),m.cc(o.a))},bt.\u0275cmp=m.Wb({type:bt,selectors:[["app-attendance-list"]],viewQuery:function(t,e){var c;1&t&&(m.Rc(r.a,!0),m.Rc(l.a,!0)),2&t&&(m.Kc(c=m.uc())&&(e.paginator=c.first),m.Kc(c=m.uc())&&(e.TSort=c.first))},decls:57,vars:11,consts:[[1,"list-container"],[1,"page-title"],[1,"s-list"],[1,"row"],[1,"col-5"],["appearance","outline",1,"p-0","w-100"],["placeholder","Select Class",3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Select Section",3,"formControl"],[1,"col-2","pt-1","mt-1"],["mat-raised-button","","color","primary","type","button",3,"click"],[1,"list-head"],["appearance","outline",1,"col-12","p-0"],["matInput","","placeholder","Search...",3,"keyup"],["matSuffix",""],[1,"pt-4"],["mat-table","","matSort","",1,"col-12",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","class"],["matColumnDef","section"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-cell","","style","width: 50px;",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],["dash",""],[3,"value"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell","","mat-sort-header",""],[4,"ngIf","ngIfElse"],["class","p-0 m-0",4,"ngIf","ngIfElse"],[1,"p-0","m-0"],["mat-header-cell","",2,"width","50px"],[1,"col"],["ngbDropdown","",1,"d-inline-block"],["id","dropdownBasic1","ngbDropdownToggle","",1,"flaticon-more-button-of-three-dots"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],["ngbDropdownItem","",3,"click"],[1,"fa","fa-trash",2,"color","#f00"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(m.ic(0,"div",0),m.ic(1,"div",1),m.ic(2,"h3"),m.Xc(3,"Attendance"),m.hc(),m.hc(),m.ic(4,"div",2),m.ic(5,"div",3),m.ic(6,"div",4),m.ic(7,"mat-form-field",5),m.ic(8,"mat-label"),m.Xc(9,"Class"),m.hc(),m.ic(10,"mat-select",6),m.tc("selectionChange",(function(t){return e.onClassChange(t)})),m.Vc(11,W,2,2,"mat-option",7),m.hc(),m.hc(),m.hc(),m.ic(12,"div",4),m.ic(13,"mat-form-field",5),m.ic(14,"mat-label"),m.Xc(15,"Section"),m.hc(),m.ic(16,"mat-select",8),m.Vc(17,J,2,2,"mat-option",7),m.hc(),m.hc(),m.hc(),m.ic(18,"div",9),m.ic(19,"button",10),m.tc("click",(function(){return e.getAttendanceList()})),m.Xc(20,"Search"),m.hc(),m.hc(),m.hc(),m.ic(21,"mat-card"),m.ic(22,"div",11),m.ic(23,"mat-card-title"),m.Xc(24,"Student Attendance"),m.hc(),m.ic(25,"div"),m.ic(26,"mat-form-field",12),m.ic(27,"mat-label"),m.Xc(28,"Filter"),m.hc(),m.ic(29,"input",13),m.tc("keyup",(function(t){return e.applyFilter(t)})),m.hc(),m.ic(30,"mat-icon",14),m.Xc(31,"search"),m.hc(),m.hc(),m.hc(),m.hc(),m.ic(32,"mat-card-content",15),m.ic(33,"table",16),m.gc(34,17),m.Vc(35,Z,2,3,"th",18),m.Vc(36,Q,2,2,"td",19),m.fc(),m.gc(37,20),m.Vc(38,tt,2,0,"th",21),m.Vc(39,ct,2,2,"td",19),m.fc(),m.gc(40,22),m.Vc(41,nt,2,0,"th",21),m.Vc(42,at,2,2,"td",19),m.fc(),m.gc(43,23),m.Vc(44,st,2,0,"th",21),m.Vc(45,rt,2,2,"td",19),m.fc(),m.gc(46,24),m.Vc(47,lt,2,0,"th",21),m.Vc(48,ut,2,2,"td",19),m.fc(),m.gc(49,25),m.Vc(50,ht,1,0,"th",26),m.Vc(51,mt,8,0,"td",19),m.fc(),m.Vc(52,ft,1,0,"tr",27),m.Vc(53,pt,1,0,"tr",28),m.hc(),m.dc(54,"mat-paginator",29),m.hc(),m.hc(),m.hc(),m.hc(),m.Vc(55,gt,1,0,"ng-template",null,30,m.Wc)),2&t&&(m.Pb(10),m.Dc("formControl",e.classID),m.Pb(1),m.Dc("ngForOf",e.classList),m.Pb(5),m.Dc("formControl",e.sectionID),m.Pb(1),m.Dc("ngForOf",e.sectionList),m.Pb(16),m.Dc("dataSource",e.attendanceList),m.Pb(19),m.Dc("matHeaderRowDef",e.displayedColumns),m.Pb(1),m.Dc("matRowDefColumns",e.displayedColumns),m.Pb(1),m.Dc("length",e.recordLength)("pageSize",10)("pageSizeOptions",m.Gc(10,St)))},directives:[y.c,y.f,k.a,h.q,h.h,s.m,x.a,w.a,w.d,_.b,C.a,y.g,w.b,d.j,l.a,d.c,d.e,d.b,d.g,d.i,r.a,I.n,d.d,P.a,d.a,l.b,s.n,K.a,K.e,K.c,K.b,d.f,d.h],pipes:[s.f],styles:[""]}),bt)}],yt=((vt=function e(){t(this,e)}).\u0275mod=m.ac({type:vt}),vt.\u0275inj=m.Zb({factory:function(t){return new(t||vt)},imports:[[o.i.forChild(wt)],o.i]}),vt),kt=i("jAig"),_t=((Dt=function e(){t(this,e)}).\u0275mod=m.ac({type:Dt}),Dt.\u0275inj=m.Zb({factory:function(t){return new(t||Dt)},imports:[[s.c,yt,h.m,h.w,K.d,kt.a]]}),Dt)}}])}();