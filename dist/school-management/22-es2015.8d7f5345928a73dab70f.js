(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{PGKz:function(t,e,c){"use strict";c.r(e),c.d(e,"ResultModule",(function(){return Zt}));var i=c("ofXK"),s=c("tyNb"),a=c("M9IT"),n=c("Dh3D"),r=c("+0xr"),o=c("0EQZ"),l=c("3Pt+"),d=c("fXoL"),u=c("tk/3"),h=c("XNiG"),m=c("z6cu"),f=c("lJxs"),p=c("JIr8"),g=c("AytR");let b=(()=>{class t{constructor(t){this._http=t,this._apiUrl=g.a.apiBaseUrl,this.dataSource=new h.a,this.httpOptions={headers:new u.d({"Content-Type":"Application/json; charset=utf-8","Access-Control-Allow-Origin":"*"}),crossDomain:!0}}handleError(t){return t.error instanceof ErrorEvent?console.error("An error occurred:",t.error.message):console.error(`Back-end returned code ${t.status}, body was: `+t.error),Object(m.a)("Something bad happened; please try again later.")}extractData(t){return t||{}}setExamRecord(t){this.dataSource.next(t)}getExamRecord(){return this.dataSource.asObservable()}getStudentRecord(t,e){return this._http.get(this._apiUrl+`/student/GetStudentSearch?classid=${t}&sectionid=${e}`).pipe(Object(f.a)(this.extractData),Object(p.a)(this.handleError))}getExamResultByClassSection(t,e,c,i){return this._http.get(`${this._apiUrl}results/getresultsbyclasssection?studentid=${t}&examid=${e}&classid=${c}&sectionid=${i}`).pipe(Object(f.a)(this.extractData),Object(p.a)(this.handleError))}getExamResult(t,e){return this._http.get(`${this._apiUrl}setup/getexamsbyclasssection?classid=${t}&sectionid=${e}`).pipe(Object(f.a)(this.extractData),Object(p.a)(this.handleError))}getClassSection(){return this._http.get(this._apiUrl+"setup/getclassesandsections").pipe(Object(f.a)(this.extractData),Object(p.a)(this.handleError))}getSections(t){return this._http.get(`${this._apiUrl}setup/getsectionsforclass?id=${t}`).pipe(Object(f.a)(this.extractData),Object(p.a)(this.handleError))}saveResult(t){return this._http.post(this._apiUrl+"results/addstudentresults",t).pipe(Object(f.a)(this.extractData),Object(p.a)(this.handleError))}saveTotalResult(t){return this._http.post(this._apiUrl+"results/addstudentresultstotals",t).pipe(Object(f.a)(this.extractData),Object(p.a)(this.handleError))}}return t.\u0275fac=function(e){return new(e||t)(d.qc(u.b))},t.\u0275prov=d.Yb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var x=c("kmnG"),D=c("d3UM"),R=c("bTqV"),w=c("Wp6s"),S=c("qFsG"),v=c("NFeN"),I=c("FKr1"),L=c("bSwM"),X=c("1kSV");function k(t,e){if(1&t&&(d.ic(0,"mat-option",31),d.Xc(1),d.hc()),2&t){const t=e.$implicit;d.Dc("value",t.id),d.Pb(1),d.Yc(t.classname)}}function y(t,e){if(1&t&&(d.ic(0,"mat-option",31),d.Xc(1),d.hc()),2&t){const t=e.$implicit;d.Dc("value",t.id),d.Pb(1),d.Yc(t.sectionname)}}function P(t,e){if(1&t){const t=d.jc();d.ic(0,"th",32),d.ic(1,"mat-checkbox",33),d.tc("change",(function(e){d.Nc(t);const c=d.xc();return e?c.masterToggle():null})),d.hc(),d.hc()}if(2&t){const t=d.xc();d.Pb(1),d.Dc("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function V(t,e){if(1&t){const t=d.jc();d.ic(0,"td",34),d.ic(1,"mat-checkbox",35),d.tc("click",(function(e){return d.Nc(t),e.stopPropagation()}))("change",(function(c){d.Nc(t);const i=e.$implicit,s=d.xc();return c?s.selection.toggle(i):null})),d.hc(),d.hc()}if(2&t){const t=e.$implicit,c=d.xc();d.Pb(1),d.Dc("checked",c.selection.isSelected(t))("aria-label",c.checkboxLabel(t))}}function C(t,e){1&t&&(d.ic(0,"th",36),d.Xc(1," Exam Name "),d.hc())}function F(t,e){if(1&t&&(d.ic(0,"span"),d.Xc(1),d.yc(2,"titlecase"),d.hc()),2&t){const t=d.xc().$implicit;d.Pb(1),d.Yc(d.zc(2,1,t.examname))}}function E(t,e){if(1&t&&(d.ic(0,"td",34),d.Vc(1,F,3,3,"span",37),d.hc()),2&t){const t=e.$implicit;d.xc();const c=d.Lc(56);d.Pb(1),d.Dc("ngIf",t.examname)("ngIfElse",c)}}function T(t,e){1&t&&(d.ic(0,"th",36),d.Xc(1," Start Date "),d.hc())}function j(t,e){if(1&t&&(d.ic(0,"span"),d.Xc(1),d.yc(2,"date"),d.hc()),2&t){const t=d.xc().$implicit;d.Pb(1),d.Yc(d.Ac(2,1,t.startdate,"dd/MM/yyy"))}}function O(t,e){if(1&t&&(d.ic(0,"td",34),d.Vc(1,j,3,4,"span",37),d.hc()),2&t){const t=e.$implicit;d.xc();const c=d.Lc(56);d.Pb(1),d.Dc("ngIf",t.startdate)("ngIfElse",c)}}function N(t,e){1&t&&(d.ic(0,"th",36),d.Xc(1," End date "),d.hc())}function $(t,e){if(1&t&&(d.ic(0,"span"),d.Xc(1),d.yc(2,"date"),d.hc()),2&t){const t=d.xc().$implicit;d.Pb(1),d.Yc(d.Ac(2,1,t.enddate,"dd/MM/yyy"))}}function q(t,e){if(1&t&&(d.ic(0,"td",34),d.Vc(1,$,3,4,"span",37),d.hc()),2&t){const t=e.$implicit;d.xc();const c=d.Lc(56);d.Pb(1),d.Dc("ngIf",t.enddate)("ngIfElse",c)}}function _(t,e){1&t&&(d.ic(0,"th",36),d.Xc(1," Description "),d.hc())}function A(t,e){if(1&t&&(d.ic(0,"span"),d.Xc(1),d.hc()),2&t){const t=d.xc().$implicit;d.Pb(1),d.Yc(t.examdescription)}}function M(t,e){if(1&t&&(d.ic(0,"td",34),d.Vc(1,A,2,1,"span",37),d.hc()),2&t){const t=e.$implicit;d.xc();const c=d.Lc(56);d.Pb(1),d.Dc("ngIf",t.examdescription)("ngIfElse",c)}}function z(t,e){1&t&&d.dc(0,"th",38)}function G(t,e){if(1&t){const t=d.jc();d.ic(0,"td",34),d.ic(1,"div",39),d.ic(2,"div",40),d.dc(3,"span",41),d.ic(4,"div",42),d.ic(5,"button",43),d.tc("click",(function(){d.Nc(t);const c=e.$implicit;return d.xc().addResult(c)})),d.dc(6,"span",44),d.Xc(7,"\xa0\xa0\xa0Add Result"),d.hc(),d.hc(),d.hc(),d.hc(),d.hc()}}function Y(t,e){1&t&&d.dc(0,"tr",45)}function B(t,e){1&t&&d.dc(0,"tr",46)}function H(t,e){1&t&&d.Xc(0,"---")}const U=function(){return[5,10,25,100]};let W=(()=>{class t{constructor(t,e,c){this._ss=t,this._router=e,this._activatedRout=c,this.displayedColumns=["select","examname","startdate","enddate","examdescription","actions"],this.filterData="",this.isLoading=!0,this.classList=[],this.sectionList=[],this.classID=new l.g,this.sectionID=new l.g,this.selection=new o.c(!0,[])}ngOnInit(){this.getClassSection()}getClassSection(){this._ss.getClassSection().subscribe(t=>{t&&(this.classList=t)})}onClassChange(t){t&&this._ss.getSections(t.value).subscribe(t=>{t&&(this.sectionList=t)})}getexamList(){this._ss.getExamResult(this.classID.value,this.sectionID.value).subscribe(t=>{console.log("data",t),t&&(this.recordLength=t.length,this.examList=new r.k(t),this.examList.sort=this.TSort,this.examList.paginator=this.paginator),this.isLoading=!1})}isAllSelected(){if(this.examList&&this.examList.data)return this.selection.selected.length===this.examList.data.length}masterToggle(){this.examList&&this.examList.data&&(this.isAllSelected()?this.selection.clear():this.examList.data.forEach(t=>this.selection.select(t)))}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.position+1}`:(this.isAllSelected()?"select":"deselect")+" all"}applyFilter(t){this.examList.filter=t.target.value.trim().toLowerCase(),this.examList.paginator&&this.examList.paginator.firstPage()}addResult(t){t&&(console.log("row",t),this._ss.setExamRecord(t),this._router.navigate(["exam-result/add"],{queryParams:{examid:t.examid,sectionid:t.sectionid,classid:t.classid}}))}onView(t){console.log("row",t),this._router.navigate(["students/details"],{queryParams:{id:t.id}})}}return t.\u0275fac=function(e){return new(e||t)(d.cc(b),d.cc(s.g),d.cc(s.a))},t.\u0275cmp=d.Wb({type:t,selectors:[["app-result-list"]],viewQuery:function(t,e){var c;1&t&&(d.Rc(a.a,!0),d.Rc(n.a,!0)),2&t&&(d.Kc(c=d.uc())&&(e.paginator=c.first),d.Kc(c=d.uc())&&(e.TSort=c.first))},decls:57,vars:11,consts:[[1,"list-container"],[1,"page-title"],[1,"s-list"],[1,"row"],[1,"col-12","col-sm-6","col-md-5"],["appearance","outline",1,"p-0","w-100"],["placeholder","Select Class",3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Select Section",3,"formControl"],[1,"col-12","col-sm-6","col-md-2","pt-1","mt-1","mb-3"],["mat-raised-button","","color","primary","type","button",3,"click"],[1,"list-head"],["appearance","outline",1,"col-12","p-0"],["matInput","","placeholder","Search...",3,"keyup"],["matSuffix",""],[1,"pt-4"],["mat-table","","matSort","",1,"col-12",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","examname"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","startdate"],["matColumnDef","enddate"],["matColumnDef","examdescription"],["matColumnDef","actions"],["mat-header-cell","","style","width: 50px;",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],["dash",""],[3,"value"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell","","mat-sort-header",""],[4,"ngIf","ngIfElse"],["mat-header-cell","",2,"width","50px"],[1,"col"],["ngbDropdown","",1,"d-inline-block"],["id","dropdownBasic1","ngbDropdownToggle","",1,"flaticon-more-button-of-three-dots"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],["ngbDropdownItem","",3,"click"],[1,"fa","fa-cogs",2,"color","#00c853"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(d.ic(0,"div",0),d.ic(1,"div",1),d.ic(2,"h3"),d.Xc(3,"Scheduled Exam"),d.hc(),d.hc(),d.ic(4,"div",2),d.ic(5,"div",3),d.ic(6,"div",4),d.ic(7,"mat-form-field",5),d.ic(8,"mat-label"),d.Xc(9,"Class"),d.hc(),d.ic(10,"mat-select",6),d.tc("selectionChange",(function(t){return e.onClassChange(t)})),d.Vc(11,k,2,2,"mat-option",7),d.hc(),d.hc(),d.hc(),d.ic(12,"div",4),d.ic(13,"mat-form-field",5),d.ic(14,"mat-label"),d.Xc(15,"Section"),d.hc(),d.ic(16,"mat-select",8),d.Vc(17,y,2,2,"mat-option",7),d.hc(),d.hc(),d.hc(),d.ic(18,"div",9),d.ic(19,"button",10),d.tc("click",(function(){return e.getexamList()})),d.Xc(20,"Search"),d.hc(),d.hc(),d.hc(),d.ic(21,"mat-card"),d.ic(22,"div",11),d.ic(23,"mat-card-title"),d.Xc(24,"Scheduled Exam List"),d.hc(),d.ic(25,"div"),d.ic(26,"mat-form-field",12),d.ic(27,"mat-label"),d.Xc(28,"Filter"),d.hc(),d.ic(29,"input",13),d.tc("keyup",(function(t){return e.applyFilter(t)})),d.hc(),d.ic(30,"mat-icon",14),d.Xc(31,"search"),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(32,"mat-card-content",15),d.ic(33,"table",16),d.gc(34,17),d.Vc(35,P,2,3,"th",18),d.Vc(36,V,2,2,"td",19),d.fc(),d.gc(37,20),d.Vc(38,C,2,0,"th",21),d.Vc(39,E,2,2,"td",19),d.fc(),d.gc(40,22),d.Vc(41,T,2,0,"th",21),d.Vc(42,O,2,2,"td",19),d.fc(),d.gc(43,23),d.Vc(44,N,2,0,"th",21),d.Vc(45,q,2,2,"td",19),d.fc(),d.gc(46,24),d.Vc(47,_,2,0,"th",21),d.Vc(48,M,2,2,"td",19),d.fc(),d.gc(49,25),d.Vc(50,z,1,0,"th",26),d.Vc(51,G,8,0,"td",19),d.fc(),d.Vc(52,Y,1,0,"tr",27),d.Vc(53,B,1,0,"tr",28),d.hc(),d.dc(54,"mat-paginator",29),d.hc(),d.hc(),d.hc(),d.hc(),d.Vc(55,H,1,0,"ng-template",null,30,d.Wc)),2&t&&(d.Pb(10),d.Dc("formControl",e.classID),d.Pb(1),d.Dc("ngForOf",e.classList),d.Pb(5),d.Dc("formControl",e.sectionID),d.Pb(1),d.Dc("ngForOf",e.sectionList),d.Pb(16),d.Dc("dataSource",e.examList),d.Pb(19),d.Dc("matHeaderRowDef",e.displayedColumns),d.Pb(1),d.Dc("matRowDefColumns",e.displayedColumns),d.Pb(1),d.Dc("length",e.recordLength)("pageSize",10)("pageSizeOptions",d.Gc(10,U)))},directives:[x.c,x.f,D.a,l.q,l.h,i.m,R.a,w.a,w.d,S.b,v.a,x.g,w.b,r.j,n.a,r.c,r.e,r.b,r.g,r.i,a.a,I.n,r.d,L.a,r.a,n.b,i.n,X.a,X.e,X.c,X.b,r.f,r.h],pipes:[i.w,i.f],styles:[""]}),t})();var K=c("JX91"),Z=c("dNgK"),J=c("wZkO");function Q(t,e){if(1&t){const t=d.jc();d.ic(0,"th",22),d.ic(1,"mat-checkbox",23),d.tc("change",(function(e){d.Nc(t);const c=d.xc();return e?c.masterToggle():null})),d.hc(),d.hc()}if(2&t){const t=d.xc();d.Pb(1),d.Dc("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function tt(t,e){if(1&t){const t=d.jc();d.ic(0,"td",24),d.ic(1,"mat-checkbox",25),d.tc("click",(function(e){return d.Nc(t),e.stopPropagation()}))("change",(function(c){d.Nc(t);const i=e.$implicit,s=d.xc();return c?s.selection.toggle(i):null})),d.hc(),d.hc()}if(2&t){const t=e.$implicit,c=d.xc();d.Pb(1),d.Dc("checked",c.selection.isSelected(t))("aria-label",c.checkboxLabel(t))}}function et(t,e){1&t&&(d.ic(0,"th",26),d.Xc(1," Exam ID "),d.hc())}function ct(t,e){if(1&t&&(d.ic(0,"span"),d.Xc(1),d.hc()),2&t){const t=d.xc().$implicit;d.Pb(1),d.Yc(t.examid)}}function it(t,e){if(1&t&&(d.ic(0,"td",24),d.Vc(1,ct,2,1,"span",27),d.hc()),2&t){const t=e.$implicit;d.xc();const c=d.Lc(40);d.Pb(1),d.Dc("ngIf",t.examid)("ngIfElse",c)}}function st(t,e){1&t&&(d.ic(0,"th",26),d.Xc(1," Student Name "),d.hc())}function at(t,e){if(1&t&&(d.ic(0,"span"),d.Xc(1),d.hc()),2&t){const t=d.xc().$implicit;d.Pb(1),d.Yc(t.studentid)}}function nt(t,e){if(1&t&&(d.ic(0,"td",24),d.Vc(1,at,2,1,"span",27),d.hc()),2&t){const t=e.$implicit;d.xc();const c=d.Lc(40);d.Pb(1),d.Dc("ngIf",t.studentid)("ngIfElse",c)}}function rt(t,e){1&t&&(d.ic(0,"th",26),d.Xc(1," Subject "),d.hc())}function ot(t,e){if(1&t&&(d.ic(0,"span"),d.Xc(1),d.hc()),2&t){const t=d.xc().$implicit;d.Pb(1),d.Yc(t.subject)}}function lt(t,e){if(1&t&&(d.ic(0,"td",24),d.Vc(1,ot,2,1,"span",27),d.hc()),2&t){const t=e.$implicit;d.xc();const c=d.Lc(40);d.Pb(1),d.Dc("ngIf",t.subject)("ngIfElse",c)}}function dt(t,e){1&t&&(d.ic(0,"th",26),d.Xc(1," Mark "),d.hc())}function ut(t,e){if(1&t&&(d.ic(0,"span"),d.Xc(1),d.hc()),2&t){const t=d.xc().$implicit;d.Pb(1),d.Yc(t.marks)}}function ht(t,e){if(1&t&&(d.ic(0,"td",24),d.Vc(1,ut,2,1,"span",27),d.hc()),2&t){const t=e.$implicit;d.xc();const c=d.Lc(40);d.Pb(1),d.Dc("ngIf",t.marks)("ngIfElse",c)}}function mt(t,e){1&t&&(d.ic(0,"th",26),d.Xc(1," Percentage "),d.hc())}function ft(t,e){if(1&t&&(d.ic(0,"span"),d.Xc(1),d.hc()),2&t){const t=d.xc().$implicit;d.Pb(1),d.Yc(t.percetage)}}function pt(t,e){if(1&t&&(d.ic(0,"td",24),d.Vc(1,ft,2,1,"span",27),d.hc()),2&t){const t=e.$implicit;d.xc();const c=d.Lc(40);d.Pb(1),d.Dc("ngIf",t.percetage)("ngIfElse",c)}}function gt(t,e){1&t&&(d.ic(0,"th",26),d.Xc(1," Grade "),d.hc())}function bt(t,e){if(1&t&&(d.ic(0,"span"),d.Xc(1),d.yc(2,"uppercase"),d.hc()),2&t){const t=d.xc().$implicit;d.Pb(1),d.Yc(d.zc(2,1,t.grade))}}function xt(t,e){if(1&t&&(d.ic(0,"td",24),d.Vc(1,bt,3,3,"span",27),d.hc()),2&t){const t=e.$implicit;d.xc();const c=d.Lc(40);d.Pb(1),d.Dc("ngIf",t.grade)("ngIfElse",c)}}function Dt(t,e){1&t&&d.dc(0,"tr",28)}function Rt(t,e){1&t&&d.dc(0,"tr",29)}function wt(t,e){1&t&&d.Xc(0,"---")}const St=function(){return[5,10,25,100]};let vt=(()=>{class t{constructor(t,e,c){this._ss=t,this._router=e,this._activatedRout=c,this.studentResultList=[],this.displayedColumns=["select","examid","studentid","subject","marks","percetage","grade"],this.filterData="",this.isLoading=!0,this.classList=[],this.sectionList=[],this.classID=new l.g,this.sectionID=new l.g,this.selection=new o.c(!0,[])}ngOnChanges(t){this.getexamList()}ngOnInit(){this.getexamList()}getexamList(){this.studentResultList&&this.studentResultList.length&&(this.recordLength=this.studentResultList.length,this.examList=new r.k(this.studentResultList),this.examList.sort=this.TSort,this.examList.paginator=this.paginator),this.isLoading=!1}isAllSelected(){if(this.examList&&this.examList.data)return this.selection.selected.length===this.examList.data.length}masterToggle(){this.examList&&this.examList.data&&(this.isAllSelected()?this.selection.clear():this.examList.data.forEach(t=>this.selection.select(t)))}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.position+1}`:(this.isAllSelected()?"select":"deselect")+" all"}applyFilter(t){this.examList.filter=t.target.value.trim().toLowerCase(),this.examList.paginator&&this.examList.paginator.firstPage()}}return t.\u0275fac=function(e){return new(e||t)(d.cc(b),d.cc(s.g),d.cc(s.a))},t.\u0275cmp=d.Wb({type:t,selectors:[["app-student-result"]],viewQuery:function(t,e){var c;1&t&&(d.Rc(a.a,!0),d.Rc(n.a,!0)),2&t&&(d.Kc(c=d.uc())&&(e.paginator=c.first),d.Kc(c=d.uc())&&(e.TSort=c.first))},inputs:{studentResultList:"studentResultList",isResultReady:"isResultReady"},features:[d.Nb],decls:41,vars:7,consts:[[1,"list-container"],[1,"s-list"],[1,"list-head"],["appearance","outline",1,"col-12","p-0"],["matInput","","placeholder","Search...",3,"keyup"],["matSuffix",""],[1,"pt-4"],["mat-table","","matSort","",1,"col-12",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","examid"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","studentid"],["matColumnDef","subject"],["matColumnDef","marks"],["matColumnDef","percetage"],["matColumnDef","grade"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],["dash",""],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell","","mat-sort-header",""],[4,"ngIf","ngIfElse"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(d.ic(0,"div",0),d.ic(1,"div",1),d.ic(2,"mat-card"),d.ic(3,"div",2),d.ic(4,"mat-card-title"),d.Xc(5,"Exam Result"),d.hc(),d.ic(6,"div"),d.ic(7,"mat-form-field",3),d.ic(8,"mat-label"),d.Xc(9,"Filter"),d.hc(),d.ic(10,"input",4),d.tc("keyup",(function(t){return e.applyFilter(t)})),d.hc(),d.ic(11,"mat-icon",5),d.Xc(12,"search"),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(13,"mat-card-content",6),d.ic(14,"table",7),d.gc(15,8),d.Vc(16,Q,2,3,"th",9),d.Vc(17,tt,2,2,"td",10),d.fc(),d.gc(18,11),d.Vc(19,et,2,0,"th",12),d.Vc(20,it,2,2,"td",10),d.fc(),d.gc(21,13),d.Vc(22,st,2,0,"th",12),d.Vc(23,nt,2,2,"td",10),d.fc(),d.gc(24,14),d.Vc(25,rt,2,0,"th",12),d.Vc(26,lt,2,2,"td",10),d.fc(),d.gc(27,15),d.Vc(28,dt,2,0,"th",12),d.Vc(29,ht,2,2,"td",10),d.fc(),d.gc(30,16),d.Vc(31,mt,2,0,"th",12),d.Vc(32,pt,2,2,"td",10),d.fc(),d.gc(33,17),d.Vc(34,gt,2,0,"th",12),d.Vc(35,xt,2,2,"td",10),d.fc(),d.Vc(36,Dt,1,0,"tr",18),d.Vc(37,Rt,1,0,"tr",19),d.hc(),d.dc(38,"mat-paginator",20),d.hc(),d.hc(),d.hc(),d.hc(),d.Vc(39,wt,1,0,"ng-template",null,21,d.Wc)),2&t&&(d.Pb(14),d.Dc("dataSource",e.examList),d.Pb(22),d.Dc("matHeaderRowDef",e.displayedColumns),d.Pb(1),d.Dc("matRowDefColumns",e.displayedColumns),d.Pb(1),d.Dc("length",e.recordLength)("pageSize",10)("pageSizeOptions",d.Gc(6,St)))},directives:[w.a,w.d,x.c,x.f,S.b,v.a,x.g,w.b,r.j,n.a,r.c,r.e,r.b,r.g,r.i,a.a,r.d,L.a,r.a,n.b,i.n,r.f,r.h],pipes:[i.y],styles:[""]}),t})();var It=c("/1cH");function Lt(t,e){1&t&&(d.ic(0,"mat-icon",9),d.Xc(1,"wc"),d.hc(),d.Xc(2," Add Result "))}function Xt(t,e){if(1&t&&(d.ic(0,"mat-option",29),d.Xc(1),d.hc()),2&t){const t=e.$implicit;d.Dc("value",t),d.Pb(1),d.Zc(" ",t.name," ")}}function kt(t,e){1&t&&(d.ic(0,"mat-error"),d.Xc(1," Student name is "),d.ic(2,"strong"),d.Xc(3,"required"),d.hc(),d.hc())}function yt(t,e){1&t&&(d.ic(0,"mat-error"),d.Xc(1," Exam ID is "),d.ic(2,"strong"),d.Xc(3,"required"),d.hc(),d.hc())}function Pt(t,e){1&t&&(d.ic(0,"mat-error"),d.Xc(1," Subject is "),d.ic(2,"strong"),d.Xc(3,"required"),d.hc(),d.hc())}function Vt(t,e){1&t&&(d.ic(0,"mat-error"),d.Xc(1," Actual mark is "),d.ic(2,"strong"),d.Xc(3,"required"),d.hc(),d.hc())}function Ct(t,e){1&t&&(d.ic(0,"mat-error"),d.Xc(1," Marks is "),d.ic(2,"strong"),d.Xc(3,"required"),d.hc(),d.hc())}function Ft(t,e){if(1&t){const t=d.jc();d.ic(0,"div",16),d.ic(1,"div",17),d.ic(2,"div",18),d.ic(3,"mat-form-field",19),d.ic(4,"mat-label"),d.Xc(5,"Student Name"),d.hc(),d.dc(6,"input",20),d.ic(7,"mat-autocomplete",21,22),d.tc("optionSelected",(function(c){d.Nc(t);const i=e.index;return d.xc(2).onOptionSelection(c,"ar",i)})),d.Vc(9,Xt,2,2,"mat-option",23),d.yc(10,"async"),d.Vc(11,kt,4,0,"mat-error",24),d.hc(),d.hc(),d.hc(),d.ic(12,"div",18),d.ic(13,"mat-form-field",19),d.ic(14,"mat-label"),d.Xc(15,"Exam ID"),d.hc(),d.dc(16,"input",25),d.Vc(17,yt,4,0,"mat-error",24),d.hc(),d.hc(),d.ic(18,"div",18),d.ic(19,"mat-form-field",19),d.ic(20,"mat-label"),d.Xc(21,"Subject"),d.hc(),d.dc(22,"input",26),d.Vc(23,Pt,4,0,"mat-error",24),d.hc(),d.hc(),d.ic(24,"div",18),d.ic(25,"mat-form-field",19),d.ic(26,"mat-label"),d.Xc(27,"Actual Mark"),d.hc(),d.dc(28,"input",27),d.Vc(29,Vt,4,0,"mat-error",24),d.hc(),d.hc(),d.ic(30,"div",18),d.ic(31,"mat-form-field",19),d.ic(32,"mat-label"),d.Xc(33,"Marks"),d.hc(),d.dc(34,"input",28),d.Vc(35,Ct,4,0,"mat-error",24),d.hc(),d.hc(),d.hc(),d.hc()}if(2&t){const t=e.$implicit,c=e.index,i=d.Lc(8),s=d.xc(2);d.Pb(1),d.Dc("formGroupName",c),d.Pb(5),d.Dc("formControl",s.studentID)("matAutocomplete",i),d.Pb(1),d.Dc("displayWith",s.getOptionText),d.Pb(2),d.Dc("ngForOf",d.zc(10,10,s.studentFilteredList)),d.Pb(2),d.Dc("ngIf",s.submitted&&s.studentID.hasError("required")),d.Pb(6),d.Dc("ngIf",s.submitted&&t.get("examid").hasError("required")),d.Pb(6),d.Dc("ngIf",s.submitted&&t.get("subject").hasError("required")),d.Pb(6),d.Dc("ngIf",s.submitted&&t.get("actualmarks").hasError("required")),d.Pb(6),d.Dc("ngIf",s.submitted&&t.get("marks").hasError("required"))}}function Et(t,e){if(1&t){const t=d.jc();d.ic(0,"button",30),d.tc("click",(function(e){return d.Nc(t),d.xc(2).onFormReset(e,"addResult")})),d.Xc(1,"Reset"),d.hc()}}function Tt(t,e){if(1&t){const t=d.jc();d.ic(0,"form",10),d.tc("ngSubmit",(function(){return d.Nc(t),d.xc().onSubmit("addResult")})),d.Vc(1,Ft,36,12,"div",11),d.ic(2,"div",12),d.ic(3,"button",13),d.tc("click",(function(){return d.Nc(t),d.xc().addNextSubjectMark()})),d.Xc(4,"Add Next"),d.hc(),d.ic(5,"button",14),d.Xc(6,"Submit"),d.hc(),d.Vc(7,Et,2,0,"button",15),d.hc(),d.hc()}if(2&t){const t=d.xc();d.Dc("formGroup",t.addResultForm),d.Pb(1),d.Dc("ngForOf",t.f.items.controls),d.Pb(6),d.Dc("ngIf",!t.showButtons)}}function jt(t,e){1&t&&(d.ic(0,"mat-icon",31),d.Xc(1,"layers"),d.hc(),d.Xc(2," Add Total Result "))}function Ot(t,e){if(1&t&&(d.ic(0,"mat-option",29),d.Xc(1),d.hc()),2&t){const t=e.$implicit;d.Dc("value",t),d.Pb(1),d.Zc(" ",t.name," ")}}function Nt(t,e){1&t&&(d.ic(0,"mat-error"),d.Xc(1," Student name is "),d.ic(2,"strong"),d.Xc(3,"required"),d.hc(),d.hc())}function $t(t,e){1&t&&(d.ic(0,"mat-error"),d.Xc(1," Exam ID is "),d.ic(2,"strong"),d.Xc(3,"required"),d.hc(),d.hc())}function qt(t,e){1&t&&(d.ic(0,"mat-error"),d.Xc(1," Total marks is "),d.ic(2,"strong"),d.Xc(3,"required"),d.hc(),d.hc())}function _t(t,e){1&t&&(d.ic(0,"mat-error"),d.Xc(1," Actual Total is "),d.ic(2,"strong"),d.Xc(3,"required"),d.hc(),d.hc())}function At(t,e){1&t&&(d.ic(0,"mat-error"),d.Xc(1," Grade is "),d.ic(2,"strong"),d.Xc(3,"required"),d.hc(),d.hc())}function Mt(t,e){1&t&&(d.ic(0,"mat-error"),d.Xc(1," Percent is "),d.ic(2,"strong"),d.Xc(3,"required"),d.hc(),d.hc())}function zt(t,e){1&t&&(d.ic(0,"mat-error"),d.Xc(1," Comments is "),d.ic(2,"strong"),d.Xc(3,"required"),d.hc(),d.hc())}function Gt(t,e){if(1&t){const t=d.jc();d.ic(0,"button",39),d.tc("click",(function(e){return d.Nc(t),d.xc(2).onCancel(e)})),d.Xc(1,"Cancel"),d.hc()}}function Yt(t,e){if(1&t){const t=d.jc();d.ic(0,"button",39),d.tc("click",(function(e){return d.Nc(t),d.xc(2).onFormReset(e)})),d.Xc(1,"Reset"),d.hc()}}function Bt(t,e){if(1&t){const t=d.jc();d.ic(0,"form",10),d.tc("ngSubmit",(function(){return d.Nc(t),d.xc().onSubmit()})),d.ic(1,"div",32),d.ic(2,"div",18),d.ic(3,"mat-form-field",19),d.ic(4,"mat-label"),d.Xc(5,"Student Name"),d.hc(),d.dc(6,"input",20),d.ic(7,"mat-autocomplete",21,22),d.tc("optionSelected",(function(e){return d.Nc(t),d.xc().onOptionSelection(e)})),d.Vc(9,Ot,2,2,"mat-option",23),d.yc(10,"async"),d.Vc(11,Nt,4,0,"mat-error",24),d.hc(),d.hc(),d.hc(),d.ic(12,"div",18),d.ic(13,"mat-form-field",19),d.ic(14,"mat-label"),d.Xc(15,"Exam ID"),d.hc(),d.dc(16,"input",25),d.Vc(17,$t,4,0,"mat-error",24),d.hc(),d.hc(),d.ic(18,"div",18),d.ic(19,"mat-form-field",19),d.ic(20,"mat-label"),d.Xc(21,"Total Mark"),d.hc(),d.dc(22,"input",33),d.Vc(23,qt,4,0,"mat-error",24),d.hc(),d.hc(),d.ic(24,"div",18),d.ic(25,"mat-form-field",19),d.ic(26,"mat-label"),d.Xc(27,"Actual Total Mark"),d.hc(),d.dc(28,"input",34),d.Vc(29,_t,4,0,"mat-error",24),d.hc(),d.hc(),d.ic(30,"div",18),d.ic(31,"mat-form-field",19),d.ic(32,"mat-label"),d.Xc(33,"Grade"),d.hc(),d.dc(34,"input",35),d.Vc(35,At,4,0,"mat-error",24),d.hc(),d.hc(),d.ic(36,"div",18),d.ic(37,"mat-form-field",19),d.ic(38,"mat-label"),d.Xc(39,"Percent"),d.hc(),d.dc(40,"input",36),d.Vc(41,Mt,4,0,"mat-error",24),d.hc(),d.hc(),d.ic(42,"div",18),d.ic(43,"mat-form-field",19),d.ic(44,"mat-label"),d.Xc(45,"Comments"),d.hc(),d.dc(46,"textarea",37),d.Vc(47,zt,4,0,"mat-error",24),d.hc(),d.hc(),d.hc(),d.ic(48,"div",12),d.ic(49,"button",14),d.Xc(50,"Submit"),d.hc(),d.Vc(51,Gt,2,0,"button",38),d.Vc(52,Yt,2,0,"button",38),d.hc(),d.hc()}if(2&t){const t=d.Lc(8),e=d.xc();d.Dc("formGroup",e.addTResultForm),d.Pb(6),d.Dc("formControl",e.studentTID)("matAutocomplete",t),d.Pb(1),d.Dc("displayWith",e.getOptionText),d.Pb(2),d.Dc("ngForOf",d.zc(10,14,e.studentTFilteredList)),d.Pb(2),d.Dc("ngIf",e.submitted&&e.studentTID.hasError("required")),d.Pb(6),d.Dc("ngIf",e.submitted&&e.ff.examid.hasError("required")),d.Pb(6),d.Dc("ngIf",e.submitted&&e.ff.totalmarks.hasError("required")),d.Pb(6),d.Dc("ngIf",e.submitted&&e.ff.actualtotal.hasError("required")),d.Pb(6),d.Dc("ngIf",e.submitted&&e.ff.grade.hasError("required")),d.Pb(6),d.Dc("ngIf",e.submitted&&e.ff.percetage.hasError("required")),d.Pb(6),d.Dc("ngIf",e.submitted&&e.ff.comments.hasError("required")),d.Pb(4),d.Dc("ngIf",e.showButtons),d.Pb(1),d.Dc("ngIf",!e.showButtons)}}function Ht(t,e){1&t&&d.Xc(0,"---")}const Ut=[{path:"",component:W},{path:"add",component:(()=>{class t{constructor(t,e,c,i,s,a){this._route=t,this._ar=e,this._router=c,this._snackBar=i,this._ss=s,this._date=a,this.formCancel=new d.r,this.formSubmit=new d.r,this.loading=!1,this.submitted=!1,this.error="",this.cardTitle="Add New Students",this.showButtons=!1,this.showForm=!0,this.showTForm=!0,this.isResultReady=!1,this.buttonLabel="Next",this.studentID=new l.g,this.studentTID=new l.g,this.horizontalPosition="start",this.verticalPosition="bottom",this.classList=[],this.sectionList=[],this.studentRecordList=[],this.studentResultList=[],this.actualMark=0,this.mark=0,this.percent=0,this._ar.queryParamMap.subscribe(t=>{this.examRecord=t.params,console.log(" this.examRecord",this.examRecord)})}ngOnInit(){this.addResultForm=new l.j({items:new l.d([this.createFields()])}),this.addTResultForm=new l.j({studentid:new l.g(null,l.x.required),examid:new l.g(this.examRecord.examid,l.x.required),actualtotal:new l.g(null,l.x.required),totalmarks:new l.g(null,l.x.required),grade:new l.g(null,l.x.required),percetage:new l.g(null,l.x.required),comments:new l.g(null,l.x.required)}),this.addResultForm.valueChanges.subscribe(t=>{this.getTotalMarks(t.items)}),this.getStudentsRecord(),this.examRecord&&this.studentid&&this.getResult()}getTotalMarks(t){let e,c=0,i=0;t.forEach(t=>{c+=t.actualmarks,i+=t.marks,e=i/c*100}),this.addTResultForm.get("actualtotal").setValue(c),this.addTResultForm.get("totalmarks").setValue(i),this.addTResultForm.get("percetage").setValue(e)}createFields(){return new l.j({studentid:new l.g(null,l.x.required),examid:new l.g(this.examRecord.examid,l.x.required),subject:new l.g(null,l.x.required),actualmarks:new l.g(null,l.x.required),marks:new l.g(null,l.x.required)})}addNextSubjectMark(){this.f.items.push(this.createFields()),this.controlIndex++,this.studentid&&this.addResultForm.get("items").at(this.controlIndex).get("studentid").patchValue(this.studentid)}get f(){return this.addResultForm.controls}get fa(){return this.addResultForm.get("items")}get ff(){return this.addTResultForm.controls}getStudentsRecord(){this._ss.getStudentRecord(this.examRecord.classid,this.examRecord.sectionid).subscribe(t=>{t&&(this.studentRecordList=t,this.studentFilteredList=this.studentID.valueChanges.pipe(Object(K.a)(""),Object(f.a)(t=>this._filter(t))),this.studentTFilteredList=this.studentTID.valueChanges.pipe(Object(K.a)(""),Object(f.a)(t=>this._filter(t))))})}getOptionText(t){if(t)return t.name}_filter(t){const e=t;return this.studentRecordList.filter(t=>t.name.toLowerCase().includes(e))}onOptionSelection(t,e,c){"ar"===e?(this.studentid=t.option.value.id,this.controlIndex=c,this.addTResultForm.get("studentid").setValue(t.option.value.id),this.studentRecordList&&this.studentRecordList.map(e=>{e.id===t.option.value.id&&this.studentTID.patchValue(e.name)}),this.addResultForm.get("items").at(c).get("studentid").patchValue(t.option.value.id)):this.addTResultForm.patchValue({studentid:t.option.value.id}),this.getResult()}getResult(){this._ss.getExamResultByClassSection(this.studentid,this.examRecord.examid,this.examRecord.classid,this.examRecord.sectionid).subscribe(t=>{t&&(this.studentResultList=t,this.isResultReady=!0)})}onSubmit(t){if("addResult"===t){if(this.submitted=!0,this.addResultForm.invalid)return;let t=[];t=this.addResultForm.value.items,this.loading=!0,console.log("payload",t),this._ss.saveResult(t).subscribe(t=>{this.showNotification("Submitted Successfully!!"),this.selectedIndex=1,this.addResultForm.reset(),this.showForm=!1,setTimeout(()=>{this.showForm=!0},0),t.forEach((t,e)=>{this.addResultForm.get("items").at(e).get("examid").patchValue(t.examid)}),this.getTotalMarks(t),this.getResult()},t=>{this.error=t,this.loading=!1,console.error(this.error)})}else{if(this.submitted=!0,this.addTResultForm.invalid)return;this.addTResultForm.value.examid=parseInt(this.addTResultForm.value.examid);let t={};Object.assign(t,this.addTResultForm.value),this.loading=!0,this._ss.saveTotalResult(t).subscribe(t=>{console.log("data",t),this.showNotification("Submitted Successfully!!"),this.addTResultForm.reset(),this.showTForm=!1,setTimeout(()=>{this.showTForm=!0},0),this.addTResultForm.get("examid").patchValue(t.examid),this.getResult()},t=>{this.error=t,this.loading=!1,console.error(this.error)})}}showNotification(t){this._snackBar.open(t,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["success-snackbar"]})}onFormReset(t,e){t&&"addResult"==e?this.addResultForm.reset():this.addTResultForm.reset()}onCancel(t){t&&this.formCancel.emit(!0)}}return t.\u0275fac=function(e){return new(e||t)(d.cc(s.a),d.cc(s.a),d.cc(s.g),d.cc(Z.a),d.cc(b),d.cc(i.f))},t.\u0275cmp=d.Wb({type:t,selectors:[["app-add-result"]],inputs:{studentDetails:"studentDetails"},outputs:{formCancel:"formCancel",formSubmit:"formSubmit"},features:[d.Ob([i.f])],decls:20,vars:6,consts:[[1,"form-container"],[1,"page-title"],[1,"form-fields"],[1,"pt-2"],[3,"selectedIndex"],["mat-tab-label",""],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"studentResultList","isResultReady"],["dash",""],[1,"example-tab-icon"],[3,"formGroup","ngSubmit"],["formArrayName","items",4,"ngFor","ngForOf"],[1,"example-button-row","pt-3","text-center"],["mat-raised-button","","type","button",1,"mat-next","mt-2","mr-3",3,"click"],["mat-raised-button","","color","primary","type","submit"],["mat-raised-button","","color","warn","class","ml-3 mat-secondary",3,"click",4,"ngIf"],["formArrayName","items"],[1,"row","m-0","pt-4",3,"formGroupName"],[1,"col-12","col-sm-6","col-md-4"],["appearance","outline",1,"p-0"],["matInput","","placeholder","Select student","aria-label","Number",3,"formControl","matAutocomplete"],["autoActiveFirstOption","",3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","type","number","placeholder","Enter exam ID","formControlName","examid"],["matInput","","placeholder","Enter subject","formControlName","subject"],["type","number","matInput","","placeholder","Enter Actual smarks","formControlName","actualmarks"],["type","number","matInput","","placeholder","Enter smarks","formControlName","marks"],[3,"value"],["mat-raised-button","","color","warn",1,"ml-3","mat-secondary",3,"click"],[1,""],[1,"row","m-0","pt-4"],["matInput","","type","number","placeholder","Enter subject","formControlName","totalmarks"],["type","number","matInput","","placeholder","Enter Actual Total smarks","formControlName","actualtotal"],["matInput","","placeholder","Enter grade","formControlName","grade"],["type","number","matInput","","placeholder","Enter percent","formControlName","percetage"],["matInput","","placeholder","Enter percent","formControlName","comments","row","4"],["mat-raised-button","","class","ml-3 mat-secondary",3,"click",4,"ngIf"],["mat-raised-button","",1,"ml-3","mat-secondary",3,"click"]],template:function(t,e){1&t&&(d.ic(0,"div",0),d.ic(1,"div",1),d.ic(2,"h3"),d.Xc(3,"Add Result"),d.hc(),d.hc(),d.ic(4,"div",2),d.ic(5,"mat-card"),d.ic(6,"mat-card-title"),d.Xc(7),d.hc(),d.ic(8,"mat-card-content",3),d.ic(9,"mat-tab-group",4),d.ic(10,"mat-tab"),d.Vc(11,Lt,3,0,"ng-template",5),d.Vc(12,Tt,8,3,"form",6),d.hc(),d.ic(13,"mat-tab"),d.Vc(14,jt,3,0,"ng-template",5),d.Vc(15,Bt,53,16,"form",6),d.hc(),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(16,"div"),d.dc(17,"app-student-result",7),d.hc(),d.hc(),d.Vc(18,Ht,1,0,"ng-template",null,8,d.Wc)),2&t&&(d.Pb(7),d.Yc(e.cardTitle),d.Pb(2),d.Dc("selectedIndex",e.selectedIndex),d.Pb(3),d.Dc("ngIf",e.showForm),d.Pb(3),d.Dc("ngIf",e.showTForm),d.Pb(2),d.Dc("studentResultList",e.studentResultList)("isResultReady",e.isResultReady))},directives:[w.a,w.d,w.b,J.b,J.a,J.c,i.n,vt,v.a,l.z,l.r,l.k,i.m,R.a,l.e,l.l,x.c,x.f,S.b,l.c,It.c,l.q,l.h,It.a,l.v,l.i,I.n,x.b],pipes:[i.b],styles:[""]}),t})(),data:{braedcrumb:"Add"}}];let Wt=(()=>{class t{}return t.\u0275mod=d.ac({type:t}),t.\u0275inj=d.Zb({factory:function(e){return new(e||t)},imports:[[s.i.forChild(Ut)],s.i]}),t})();var Kt=c("jAig");let Zt=(()=>{class t{}return t.\u0275mod=d.ac({type:t}),t.\u0275inj=d.Zb({factory:function(e){return new(e||t)},imports:[[i.c,Wt,l.m,l.w,X.d,Kt.a]]}),t})()}}]);