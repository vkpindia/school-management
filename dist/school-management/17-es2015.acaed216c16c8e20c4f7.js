(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{DBER:function(t,e,c){"use strict";c.r(e),c.d(e,"FeesModule",(function(){return Ft}));var i=c("ofXK"),n=c("tyNb"),s=c("fXoL"),a=c("3Pt+"),o=c("FtGj"),r=c("dNgK"),l=c("JX91"),m=c("lJxs"),d=c("GmXY"),u=c("Wp6s"),h=c("kmnG"),f=c("d3UM"),p=c("qFsG"),b=c("/1cH"),g=c("bTqV"),y=c("FKr1"),w=c("iadO"),v=c("bSwM"),D=c("+0xr"),F=c("0EQZ"),E=c("Dh3D"),I=c("M9IT"),S=c("NFeN"),L=c("1kSV");function C(t,e){1&t&&(s.ic(0,"div",25),s.dc(1,"img",26),s.ic(2,"p",27),s.Yc(3,"loading..."),s.hc(),s.hc())}function P(t,e){if(1&t){const t=s.jc();s.ic(0,"a",28),s.tc("click",(function(){return s.Oc(t),s.xc().getTransactions()})),s.Yc(1,"Get all transactions"),s.hc()}}function Y(t,e){if(1&t){const t=s.jc();s.ic(0,"th",29),s.ic(1,"mat-checkbox",30),s.tc("change",(function(e){s.Oc(t);const c=s.xc();return e?c.masterToggle():null})),s.hc(),s.hc()}if(2&t){const t=s.xc();s.Pb(1),s.Ec("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function x(t,e){if(1&t){const t=s.jc();s.ic(0,"td",31),s.ic(1,"mat-checkbox",32),s.tc("click",(function(e){return s.Oc(t),e.stopPropagation()}))("change",(function(c){s.Oc(t);const i=e.$implicit,n=s.xc();return c?n.selection.toggle(i):null})),s.hc(),s.hc()}if(2&t){const t=e.$implicit,c=s.xc();s.Pb(1),s.Ec("checked",c.selection.isSelected(t))("aria-label",c.checkboxLabel(t))}}function k(t,e){1&t&&(s.ic(0,"th",33),s.Yc(1,"Name"),s.hc())}function W(t,e){if(1&t&&(s.ic(0,"span"),s.Yc(1),s.hc()),2&t){const t=s.xc().$implicit;s.Pb(1),s.Zc(t.name)}}function O(t,e){if(1&t&&(s.ic(0,"td",31),s.Wc(1,W,2,1,"span",34),s.hc()),2&t){const t=e.$implicit;s.xc();const c=s.Mc(43);s.Pb(1),s.Ec("ngIf",t.name)("ngIfElse",c)}}function N(t,e){1&t&&(s.ic(0,"th",33),s.Yc(1,"Fee Type"),s.hc())}function T(t,e){if(1&t&&(s.ic(0,"span"),s.Yc(1),s.hc()),2&t){const t=s.xc().$implicit;s.Pb(1),s.Zc(t.feetype)}}function _(t,e){if(1&t&&(s.ic(0,"td",31),s.Wc(1,T,2,1,"span",34),s.hc()),2&t){const t=e.$implicit;s.xc();const c=s.Mc(43);s.Pb(1),s.Ec("ngIf",t.feetype)("ngIfElse",c)}}function A(t,e){1&t&&(s.ic(0,"th",33),s.Yc(1,"Fee Amount"),s.hc())}function q(t,e){if(1&t&&(s.ic(0,"span"),s.Yc(1),s.yc(2,"currency"),s.hc()),2&t){const t=s.xc().$implicit;s.Pb(1),s.Zc(s.Ac(2,1,t.feeamount,"INR"))}}function R(t,e){if(1&t&&(s.ic(0,"td",31),s.Wc(1,q,3,4,"span",34),s.hc()),2&t){const t=e.$implicit;s.xc();const c=s.Mc(43);s.Pb(1),s.Ec("ngIf",t.feeamount)("ngIfElse",c)}}function M(t,e){1&t&&(s.ic(0,"th",33),s.Yc(1,"Paid Amount "),s.hc())}function $(t,e){if(1&t&&(s.ic(0,"span",36),s.Yc(1),s.yc(2,"currency"),s.hc()),2&t){const t=s.xc().$implicit;s.Pb(1),s.ad(" ",s.Ac(2,1,t.paidamount,"INR")," ")}}function j(t,e){if(1&t&&(s.ic(0,"td",31),s.Wc(1,$,3,4,"span",35),s.hc()),2&t){const t=e.$implicit;s.xc();const c=s.Mc(43);s.Pb(1),s.Ec("ngIf",t.paidamount)("ngIfElse",c)}}function Z(t,e){1&t&&(s.ic(0,"th",33),s.Yc(1," Term Name "),s.hc())}function z(t,e){if(1&t&&(s.ic(0,"span",36),s.Yc(1),s.hc()),2&t){const t=s.xc().$implicit;s.Pb(1),s.ad(" ",t.termname," ")}}function B(t,e){if(1&t&&(s.ic(0,"td",31),s.Wc(1,z,2,1,"span",35),s.hc()),2&t){const t=e.$implicit;s.xc();const c=s.Mc(43);s.Pb(1),s.Ec("ngIf",t.termname)("ngIfElse",c)}}function V(t,e){1&t&&s.dc(0,"th",37)}function G(t,e){if(1&t){const t=s.jc();s.ic(0,"td",31),s.ic(1,"div",38),s.ic(2,"div",39),s.dc(3,"span",40),s.ic(4,"div",41),s.ic(5,"button",42),s.tc("click",(function(){s.Oc(t);const c=e.$implicit;return s.xc().onEdit(c)})),s.dc(6,"span",43),s.Yc(7,"\xa0\xa0\xa0Edit"),s.hc(),s.ic(8,"button",42),s.tc("click",(function(){s.Oc(t);const c=e.$implicit;return s.xc().onDelete(c)})),s.dc(9,"span",44),s.Yc(10,"\xa0\xa0\xa0Delete"),s.hc(),s.hc(),s.hc(),s.hc(),s.hc()}}function H(t,e){1&t&&s.dc(0,"tr",45)}function X(t,e){1&t&&s.dc(0,"tr",46)}function J(t,e){1&t&&s.Yc(0,"---")}let K=(()=>{class t{constructor(t,e){this._router=t,this.cd=e,this.studentList=[],this.onEditFee=new s.r,this.onDeleteFee=new s.r,this.displayedColumns=["select","name","feetype","feeamount","paidamount","termname","actions"],this.filterData="",this.isLoading=!0,this.selection=new F.c(!0,[]),this.showForm=!1,this.isCreate=!1}ngOnChanges(t){this.cd.detectChanges()}ngOnInit(){this.getFeeList()}getFeeList(){console.log("studentList",this.studentList),this.studentList&&this.studentList.length&&(this.recordLength=this.studentList.length,this.feeList=new D.k(this.studentList),this.feeList.sort=this.TSort,this.feeList.paginator=this.paginator),this.isLoading=!1}isAllSelected(){if(this.feeList)return this.selection.selected.length===this.feeList.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.feeList.data.forEach(t=>this.selection.select(t))}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.position+1}`:(this.isAllSelected()?"select":"deselect")+" all"}applyFilter(t){this.feeList.filter=t.target.value.trim().toLowerCase(),this.feeList.paginator&&this.feeList.paginator.firstPage()}onEdit(t){console.log("row",t),t&&this.onEditFee.emit(t)}onDelete(t){t&&this.onDeleteFee.emit(t.id)}getTransactions(){this._router.navigate(["fees/transactions"],{queryParams:{studentsID:this.studentID}})}}return t.\u0275fac=function(e){return new(e||t)(s.cc(n.g),s.cc(s.i))},t.\u0275cmp=s.Wb({type:t,selectors:[["app-fees"]],viewQuery:function(t,e){var c;1&t&&(s.Sc(I.a,!0),s.Sc(E.a,!0)),2&t&&(s.Lc(c=s.uc())&&(e.paginator=c.first),s.Lc(c=s.uc())&&(e.TSort=c.first))},inputs:{studentList:"studentList",studentID:"studentID",showList:"showList"},outputs:{onEditFee:"onEditFee",onDeleteFee:"onDeleteFee"},features:[s.Nb],decls:44,vars:5,consts:[[1,"list-container"],["class","no-record",4,"ngIf"],[1,"s-list"],[1,"list-head"],["style","font-size: 14px; color: rgb(12, 12, 235); cursor: pointer",3,"click",4,"ngIf"],[1,"d-flex","align-items-center"],["appearance","outline",1,"col-12","p-0"],["matInput","","placeholder","Search...",3,"keyup"],["matSuffix",""],[1,"pt-4"],["mat-table","","matSort","",1,"col-12",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","feetype"],["matColumnDef","feeamount"],["matColumnDef","paidamount"],["matColumnDef","termname"],["matColumnDef","actions"],["mat-header-cell","","style","width: 50px;",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["dash",""],[1,"no-record"],["src","assets/images/page-loader.gif","alt",""],[1,"m-0"],[2,"font-size","14px","color","rgb(12, 12, 235)","cursor","pointer",3,"click"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell","","mat-sort-header",""],[4,"ngIf","ngIfElse"],["class","p-0 m-0",4,"ngIf","ngIfElse"],[1,"p-0","m-0"],["mat-header-cell","",2,"width","50px"],[1,"col"],["ngbDropdown","",1,"d-inline-block"],["id","dropdownBasic1","ngbDropdownToggle","",1,"flaticon-more-button-of-three-dots"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],["ngbDropdownItem","",3,"click"],[1,"fa","fa-cogs",2,"color","#00c853"],[1,"fa","fa-trash",2,"color","#f00"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(s.ic(0,"div",0),s.Wc(1,C,4,0,"div",1),s.ic(2,"div",2),s.ic(3,"mat-card"),s.ic(4,"div",3),s.ic(5,"mat-card-title"),s.Yc(6,"Student Fee Data "),s.dc(7,"br"),s.Wc(8,P,2,0,"a",4),s.hc(),s.ic(9,"div",5),s.ic(10,"div"),s.ic(11,"mat-form-field",6),s.ic(12,"mat-label"),s.Yc(13,"Filter"),s.hc(),s.ic(14,"input",7),s.tc("keyup",(function(t){return e.applyFilter(t)})),s.hc(),s.ic(15,"mat-icon",8),s.Yc(16,"search"),s.hc(),s.hc(),s.hc(),s.hc(),s.hc(),s.ic(17,"mat-card-content",9),s.ic(18,"table",10),s.gc(19,11),s.Wc(20,Y,2,3,"th",12),s.Wc(21,x,2,2,"td",13),s.fc(),s.gc(22,14),s.Wc(23,k,2,0,"th",15),s.Wc(24,O,2,2,"td",13),s.fc(),s.gc(25,16),s.Wc(26,N,2,0,"th",15),s.Wc(27,_,2,2,"td",13),s.fc(),s.gc(28,17),s.Wc(29,A,2,0,"th",15),s.Wc(30,R,2,2,"td",13),s.fc(),s.gc(31,18),s.Wc(32,M,2,0,"th",15),s.Wc(33,j,2,2,"td",13),s.fc(),s.gc(34,19),s.Wc(35,Z,2,0,"th",15),s.Wc(36,B,2,2,"td",13),s.fc(),s.gc(37,20),s.Wc(38,V,1,0,"th",21),s.Wc(39,G,11,0,"td",13),s.fc(),s.Wc(40,H,1,0,"tr",22),s.Wc(41,X,1,0,"tr",23),s.hc(),s.hc(),s.hc(),s.hc(),s.hc(),s.Wc(42,J,1,0,"ng-template",null,24,s.Xc)),2&t&&(s.Pb(1),s.Ec("ngIf",e.isLoading),s.Pb(7),s.Ec("ngIf",e.studentID),s.Pb(10),s.Ec("dataSource",e.feeList),s.Pb(22),s.Ec("matHeaderRowDef",e.displayedColumns),s.Pb(1),s.Ec("matRowDefColumns",e.displayedColumns))},directives:[i.n,u.a,u.d,h.c,h.f,p.b,S.a,h.g,u.b,D.j,E.a,D.c,D.e,D.b,D.g,D.i,D.d,v.a,D.a,E.b,L.a,L.e,L.c,L.b,D.f,D.h],pipes:[i.d],styles:[""]}),t})();function U(t,e){if(1&t&&(s.ic(0,"mat-option",21),s.Yc(1),s.hc()),2&t){const t=e.$implicit;s.Ec("value",t.id),s.Pb(1),s.Zc(t.classname)}}function Q(t,e){if(1&t&&(s.ic(0,"mat-option",21),s.Yc(1),s.hc()),2&t){const t=e.$implicit;s.Ec("value",t.id),s.Pb(1),s.Zc(t.sectionname)}}function tt(t,e){if(1&t&&(s.ic(0,"mat-option",21),s.Yc(1),s.hc()),2&t){const t=e.$implicit;s.Ec("value",t),s.Pb(1),s.ad(" ",t.name," ")}}function et(t,e){if(1&t){const t=s.jc();s.ic(0,"div",9),s.ic(1,"div",10),s.ic(2,"mat-form-field",11),s.ic(3,"mat-label"),s.Yc(4,"Class"),s.hc(),s.ic(5,"mat-select",12),s.tc("selectionChange",(function(e){return s.Oc(t),s.xc().onClassChange(e)})),s.Wc(6,U,2,2,"mat-option",13),s.hc(),s.hc(),s.hc(),s.ic(7,"div",10),s.ic(8,"mat-form-field",11),s.ic(9,"mat-label"),s.Yc(10,"Section"),s.hc(),s.ic(11,"mat-select",14),s.tc("selectionChange",(function(e){return s.Oc(t),s.xc().onSectionChange(e)})),s.Wc(12,Q,2,2,"mat-option",13),s.hc(),s.hc(),s.hc(),s.ic(13,"div",15),s.ic(14,"mat-form-field",11),s.ic(15,"mat-label"),s.Yc(16,"Search"),s.hc(),s.dc(17,"input",16),s.ic(18,"mat-autocomplete",17,18),s.tc("optionSelected",(function(e){return s.Oc(t),s.xc().onOptionSelection(e)})),s.Wc(20,tt,2,2,"mat-option",13),s.yc(21,"async"),s.hc(),s.hc(),s.hc(),s.ic(22,"div",19),s.ic(23,"button",20),s.tc("click",(function(){return s.Oc(t),s.xc().getSetStudent()})),s.Yc(24,"Search"),s.hc(),s.hc(),s.hc()}if(2&t){const t=s.Mc(19),e=s.xc();s.Pb(5),s.Ec("formControl",e.classID),s.Pb(1),s.Ec("ngForOf",e.classList),s.Pb(5),s.Ec("formControl",e.sectionID),s.Pb(1),s.Ec("ngForOf",e.sectionList),s.Pb(5),s.Ec("formControl",e.studentName)("matAutocomplete",t),s.Pb(1),s.Ec("displayWith",e.getOptionText),s.Pb(2),s.Ec("ngForOf",s.zc(21,8,e.studentFilteredList))}}function ct(t,e){1&t&&(s.ic(0,"mat-error"),s.Yc(1," Name is "),s.ic(2,"strong"),s.Yc(3,"required"),s.hc(),s.hc())}function it(t,e){if(1&t&&(s.ic(0,"mat-option",21),s.Yc(1),s.hc()),2&t){const t=e.$implicit;s.Ec("value",t.id),s.Pb(1),s.Zc(t.feetype)}}function nt(t,e){1&t&&(s.ic(0,"mat-error"),s.Yc(1," Fee type is "),s.ic(2,"strong"),s.Yc(3,"required"),s.hc(),s.hc())}function st(t,e){if(1&t&&(s.ic(0,"mat-option",21),s.Yc(1),s.hc()),2&t){const t=e.$implicit;s.Ec("value",t.termname),s.Pb(1),s.Zc(t.termname)}}function at(t,e){1&t&&(s.ic(0,"mat-error"),s.Yc(1," Term name is "),s.ic(2,"strong"),s.Yc(3,"required"),s.hc(),s.hc())}function ot(t,e){1&t&&(s.ic(0,"mat-error"),s.Yc(1," Term start date is "),s.ic(2,"strong"),s.Yc(3,"required"),s.hc(),s.hc())}function rt(t,e){1&t&&(s.ic(0,"mat-error"),s.Yc(1," Term end date is "),s.ic(2,"strong"),s.Yc(3,"required"),s.hc(),s.hc())}function lt(t,e){1&t&&(s.ic(0,"mat-error"),s.Yc(1," Fee amount is "),s.ic(2,"strong"),s.Yc(3,"required"),s.hc(),s.hc())}function mt(t,e){1&t&&(s.ic(0,"mat-error"),s.Yc(1," paid date is "),s.ic(2,"strong"),s.Yc(3,"required"),s.hc(),s.hc())}function dt(t,e){if(1&t){const t=s.jc();s.ic(0,"button",43),s.tc("click",(function(e){return s.Oc(t),s.xc(2).onCancel(e)})),s.Yc(1,"Cancel"),s.hc()}}function ut(t,e){if(1&t){const t=s.jc();s.ic(0,"button",43),s.tc("click",(function(e){return s.Oc(t),s.xc(2).onFormReset(e)})),s.Yc(1,"Reset"),s.hc()}}function ht(t,e){if(1&t){const t=s.jc();s.ic(0,"form",22),s.tc("ngSubmit",(function(){return s.Oc(t),s.xc().onSubmit()})),s.ic(1,"div",9),s.ic(2,"div",15),s.ic(3,"mat-form-field",11),s.ic(4,"mat-label"),s.Yc(5,"Name"),s.hc(),s.dc(6,"input",23),s.Wc(7,ct,4,0,"mat-error",7),s.hc(),s.hc(),s.ic(8,"div",15),s.ic(9,"mat-form-field",11),s.ic(10,"mat-label"),s.Yc(11,"Fee Type"),s.hc(),s.ic(12,"mat-select",24),s.Wc(13,it,2,2,"mat-option",13),s.hc(),s.Wc(14,nt,4,0,"mat-error",7),s.hc(),s.hc(),s.ic(15,"div",15),s.ic(16,"mat-form-field",11),s.ic(17,"mat-label"),s.Yc(18,"Term Name"),s.hc(),s.ic(19,"mat-select",25),s.Wc(20,st,2,2,"mat-option",13),s.hc(),s.Wc(21,at,4,0,"mat-error",7),s.hc(),s.hc(),s.ic(22,"div",15),s.ic(23,"mat-form-field",11),s.ic(24,"mat-label"),s.Yc(25,"Term Start Date"),s.hc(),s.dc(26,"input",26),s.dc(27,"mat-datepicker-toggle",27),s.dc(28,"mat-datepicker",null,28),s.Wc(30,ot,4,0,"mat-error",7),s.hc(),s.hc(),s.ic(31,"div",15),s.ic(32,"mat-form-field",11),s.ic(33,"mat-label"),s.Yc(34,"Term End Date"),s.hc(),s.dc(35,"input",29),s.dc(36,"mat-datepicker-toggle",27),s.dc(37,"mat-datepicker",null,30),s.Wc(39,rt,4,0,"mat-error",7),s.hc(),s.hc(),s.ic(40,"div",15),s.ic(41,"mat-form-field",11),s.ic(42,"mat-label"),s.Yc(43,"Fee Amount"),s.hc(),s.dc(44,"input",31),s.Wc(45,lt,4,0,"mat-error",7),s.hc(),s.hc(),s.ic(46,"div",15),s.ic(47,"mat-form-field",11),s.ic(48,"mat-label"),s.Yc(49,"Discount"),s.hc(),s.ic(50,"input",32),s.tc("blur",(function(){return s.Oc(t),s.xc().feeAfterDiscount()})),s.hc(),s.hc(),s.hc(),s.ic(51,"div",15),s.ic(52,"mat-form-field",11),s.ic(53,"mat-label"),s.Yc(54,"Fee After Discount"),s.hc(),s.dc(55,"input",33),s.hc(),s.hc(),s.ic(56,"div",15),s.ic(57,"mat-form-field",11),s.ic(58,"mat-label"),s.Yc(59,"Paid Amount"),s.hc(),s.ic(60,"input",34),s.tc("blur",(function(){return s.Oc(t),s.xc().pendingAmount()})),s.hc(),s.hc(),s.hc(),s.ic(61,"div",15),s.ic(62,"mat-form-field",11),s.ic(63,"mat-label"),s.Yc(64,"Pending Amount"),s.hc(),s.dc(65,"input",35),s.hc(),s.hc(),s.ic(66,"div",15),s.ic(67,"mat-form-field",11),s.ic(68,"mat-label"),s.Yc(69,"Paid Date"),s.hc(),s.dc(70,"input",36),s.dc(71,"mat-datepicker-toggle",27),s.dc(72,"mat-datepicker",null,37),s.Wc(74,mt,4,0,"mat-error",7),s.hc(),s.hc(),s.ic(75,"div",15),s.ic(76,"mat-checkbox",38),s.Yc(77,"Status"),s.hc(),s.hc(),s.ic(78,"div",15),s.ic(79,"mat-form-field",11),s.ic(80,"mat-label"),s.Yc(81,"Description"),s.hc(),s.dc(82,"textarea",39),s.hc(),s.hc(),s.hc(),s.ic(83,"div",40),s.ic(84,"button",41),s.Yc(85),s.hc(),s.Wc(86,dt,2,0,"button",42),s.Wc(87,ut,2,0,"button",42),s.hc(),s.hc()}if(2&t){const t=s.Mc(29),e=s.Mc(38),c=s.Mc(73),i=s.xc();s.Ec("formGroup",i.feesForm),s.Pb(7),s.Ec("ngIf",i.submitted&&i.f.name.hasError("required")),s.Pb(6),s.Ec("ngForOf",i.feetypesList),s.Pb(1),s.Ec("ngIf",i.submitted&&i.f.feetype.hasError("required")),s.Pb(6),s.Ec("ngForOf",i.termList),s.Pb(1),s.Ec("ngIf",i.submitted&&i.f.termname.hasError("required")),s.Pb(5),s.Ec("matDatepicker",t),s.Pb(1),s.Ec("for",t),s.Pb(3),s.Ec("ngIf",i.submitted&&i.f.termstartdate.hasError("required")),s.Pb(5),s.Ec("matDatepicker",e),s.Pb(1),s.Ec("for",e),s.Pb(3),s.Ec("ngIf",i.submitted&&i.f.termenddate.hasError("required")),s.Pb(6),s.Ec("ngIf",i.submitted&&i.f.feeamount.hasError("required")),s.Pb(25),s.Ec("matDatepicker",c),s.Pb(1),s.Ec("for",c),s.Pb(3),s.Ec("ngIf",i.submitted&&i.f.paiddate.hasError("required")),s.Pb(11),s.Zc(i.buttonLabel),s.Pb(1),s.Ec("ngIf",i.showButtons),s.Pb(1),s.Ec("ngIf",!i.showButtons)}}function ft(t,e){if(1&t){const t=s.jc();s.gc(0),s.ic(1,"app-fees",44),s.tc("onEditFee",(function(e){return s.Oc(t),s.xc().onEditRecord(e)}))("onDeleteFee",(function(e){return s.Oc(t),s.xc().onDeleteRecord(e)})),s.hc(),s.fc()}if(2&t){const t=s.xc();s.Pb(1),s.Ec("studentList",t.studentList)("studentID",t.studentID)("showList",t.ShowList)}}function pt(t,e){1&t&&s.Yc(0,"---")}let bt=(()=>{class t{constructor(t,e,c,i,n){this._ar=t,this._router=e,this._snackBar=c,this._fs=i,this._date=n,this.formCancel=new s.r,this.formSubmit=new s.r,this.loading=!1,this.submitted=!1,this.ShowList=!1,this.error="",this.cardTitle="Add/Update Fees",this.showButtons=!1,this.buttonLabel="Submit",this.showForm=!0,this.studentList=[],this.studentRecordList=[],this.classList=[],this.sectionList=[],this.classID=new a.g,this.sectionID=new a.g,this.studentName=new a.g,this._phonePattern="^[0-9-+s()]*$",this._emailPattern="[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}",this.horizontalPosition="start",this.verticalPosition="bottom",this.visible=!0,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[o.g,o.c],this.feetypesList=[],this.termList=[],this._ar.queryParamMap.subscribe(t=>{t&&(this.paramID=t.params.id)})}ngOnInit(){this.feesForm=new a.j({name:new a.g(null,a.x.required),feetype:new a.g(null,a.x.required),termname:new a.g(null,a.x.required),termstartdate:new a.g(new Date,a.x.required),termenddate:new a.g(new Date,a.x.required),feeamount:new a.g(null),discount:new a.g(null),feeafterdiscount:new a.g(null),paidamount:new a.g(null),pendingamount:new a.g(null),paiddate:new a.g(null),status:new a.g(null),description:new a.g(null)}),this.getClassSection(),this.getfeetypes(),this.getTerm(),this.paramID&&this.getSetStudentFee()}get f(){return this.feesForm.controls}feeAfterDiscount(){this.feesForm.patchValue({feeafterdiscount:this.f.discount.value>0?this.f.feeamount.value-this.f.discount.value:this.f.feeamount.value})}pendingAmount(){this.feesForm.patchValue({pendingamount:this.f.paidamount.value>0?this.f.feeafterdiscount.value-this.f.paidamount.value:this.f.feeafterdiscount.value})}getfeetypes(){this._fs.getFeeType().subscribe(t=>{t&&(this.feetypesList=t)})}getTerm(){this._fs.getTerms().subscribe(t=>{t&&(this.termList=t)})}getStudentsRecord(){this._fs.getStudentRecord(this.classID.value,this.sectionID.value).subscribe(t=>{t&&(this.studentRecordList=t,this.studentFilteredList=this.studentName.valueChanges.pipe(Object(l.a)(""),Object(m.a)(t=>this._filter(t))))})}getOptionText(t){if(t)return t.name}_filter(t){const e=t;return this.studentRecordList.filter(t=>t.name.toLowerCase().includes(e))}getSetStudent(){this._fs.getStudentFee(this.studentID).subscribe(t=>{t&&(this.studentList=t,this.ShowList=!0)})}getSetStudentFee(){this._fs.getFeeFirstTime(this.paramID?this.paramID:1).subscribe(t=>{t&&this.onEditRecord(t[0])})}onEditRecord(t){t&&(this.feesDetails=t,t.feetype=Number(t.feetype),this.feesForm.patchValue(t))}getClassSection(){this._fs.getClassSection().subscribe(t=>{t&&(this.classList=t)})}onClassChange(t){t&&this._fs.getSections(t.value).subscribe(t=>{t&&(this.sectionList=t)})}calculatePending(){let t=0;this.f.payamount.value<this.payAmount&&(t=this.payAmount-this.f.payamount.value),this.feesForm.patchValue({pendingamount:t.toFixed(2)})}onSectionChange(t){t&&this.getStudentsRecord()}onOptionSelection(t){this.studentID=t.option.value.id,this.studentRecordList.map(t=>{this.studentID===t.id&&this.feesForm.get("name").patchValue(t.name)})}onSubmit(){if(this.submitted=!0,this.feesForm.value&&(this.feesForm.value.termstartdate=this._date.transform(this.feesForm.value.termstartdate,"MM/dd/yyyy"),this.feesForm.value.termenddate=this._date.transform(this.feesForm.value.termenddate,"MM/dd/yyyy"),this.feesForm.value.paiddate=this._date.transform(this.feesForm.value.paiddate,"MM/dd/yyyy")),console.log("this.feesForm.invalid",this.feesForm.invalid),this.feesForm.invalid)return;let t={};Object.assign(t,this.feesForm.value),this.loading=!0,this.feesDetails&&this.feesDetails.id?(t.id=this.feesDetails.id,t.studentid=this.feesDetails.studentid,this._fs.updateFees(t).subscribe(t=>{console.log("data",t),this.showNotification("Submitted Successfully!!"),this.feesForm&&this.feesForm.reset(),this.showForm=!1,setTimeout(()=>{this.showForm=!0},50)},t=>{this.error=t,this.loading=!1,console.error(this.error)})):(t.studentid=Number(this.paramID?this.paramID:this.studentID),this._fs.saveFees(t).subscribe(t=>{this.showNotification("Updated Successfully!!"),this.feesForm&&this.feesForm.reset(),this.showForm=!1,setTimeout(()=>{this.showForm=!0},50)},t=>{this.error=t,this.loading=!1,console.error(this.error)}))}showNotification(t){this._snackBar.open(t,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["success-snackbar"]})}onFormReset(t){t&&this.feesForm&&this.feesForm.reset()}onCancel(t){t&&this.formCancel.emit(!0)}onDeleteRecord(t){confirm("Are sure you want to delete this fee record?")&&this._fs.deleteFees(t).subscribe(t=>{t&&(this.ShowList=!1,this.getSetStudent())})}}return t.\u0275fac=function(e){return new(e||t)(s.cc(n.a),s.cc(n.g),s.cc(r.a),s.cc(d.a),s.cc(i.f))},t.\u0275cmp=s.Wb({type:t,selectors:[["app-add-fees"]],inputs:{feesDetails:"feesDetails"},outputs:{formCancel:"formCancel",formSubmit:"formSubmit"},features:[s.Ob([r.a,i.f])],decls:16,vars:4,consts:[[1,"form-container"],[1,"page-title"],[1,"form-fields"],["class","row",4,"ngIf"],[1,"pt-2"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,""],[4,"ngIf"],["dash",""],[1,"row"],[1,"col-12","col-sm-6","col-md-3"],["appearance","outline",1,"p-0"],["placeholder","Select Class",3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Select Section",3,"formControl","selectionChange"],[1,"col-12","col-sm-6","col-md-4"],["matInput","","placeholder","Select student","aria-label","Number",3,"formControl","matAutocomplete"],["autoActiveFirstOption","",3,"displayWith","optionSelected"],["auto","matAutocomplete"],[1,"col-12","col-md-2","pt-1","mt-1","mb-3"],["mat-raised-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"formGroup","ngSubmit"],["matInput","","placeholder","Enter Last Name","formControlName","name"],["placeholder","Select fee type","formControlName","feetype"],["placeholder","Select Term Name","formControlName","termname"],["matInput","","placeholder","Select date","formControlName","termstartdate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["matInput","","placeholder","Select date","formControlName","termenddate",3,"matDatepicker"],["picker12",""],["type","number","matInput","","placeholder","Enter amount","formControlName","feeamount"],["type","number","matInput","","placeholder","Enter discount","formControlName","discount",3,"blur"],["type","number","matInput","","placeholder","Enter fee after discount","formControlName","feeafterdiscount"],["type","number","matInput","","placeholder","Enter amount","formControlName","paidamount",3,"blur"],["type","number","matInput","","placeholder","Pending amount","formControlName","pendingamount"],["matInput","","placeholder","Select Date","formControlName","paiddate",3,"matDatepicker"],["picker2",""],["formControlName","status"],["matInput","","placeholder","Description","rows","3","formControlName","description"],[1,"example-button-row","pt-3","text-center"],["mat-raised-button","","color","primary","type","submit"],["mat-raised-button","","class","ml-3 mat-secondary",3,"click",4,"ngIf"],["mat-raised-button","",1,"ml-3","mat-secondary",3,"click"],[3,"studentList","studentID","showList","onEditFee","onDeleteFee"]],template:function(t,e){1&t&&(s.ic(0,"div",0),s.ic(1,"div",1),s.ic(2,"h3"),s.Yc(3,"Fees"),s.hc(),s.hc(),s.ic(4,"div",2),s.Wc(5,et,25,10,"div",3),s.ic(6,"mat-card"),s.ic(7,"mat-card-title"),s.Yc(8),s.hc(),s.ic(9,"mat-card-content",4),s.Wc(10,ht,88,19,"form",5),s.hc(),s.hc(),s.hc(),s.hc(),s.ic(11,"div",0),s.ic(12,"div",6),s.Wc(13,ft,2,3,"ng-container",7),s.hc(),s.Wc(14,pt,1,0,"ng-template",null,8,s.Xc),s.hc()),2&t&&(s.Pb(5),s.Ec("ngIf",!e.paramID),s.Pb(3),s.Zc(e.cardTitle),s.Pb(2),s.Ec("ngIf",e.showForm),s.Pb(3),s.Ec("ngIf",e.ShowList))},directives:[i.n,u.a,u.d,u.b,h.c,h.f,f.a,a.q,a.h,i.m,p.b,a.c,b.c,b.a,g.a,y.n,a.z,a.r,a.k,a.i,w.b,w.d,h.g,w.a,a.v,v.a,h.b,K],pipes:[i.b],styles:[""]}),t})();var gt=c("NUHZ");function yt(t,e){if(1&t&&(s.gc(0),s.dc(1,"app-transactions",1),s.fc()),2&t){const t=s.xc();s.Pb(1),s.Ec("transactionsList",t.transactionList)("displayedColumns",t.displayedColumns)}}const wt=[{path:"",component:bt},{path:"transactions",component:(()=>{class t{constructor(t,e){this._ss=t,this._route=e,this.showTransaction=!1,this._route.queryParamMap.subscribe(t=>{this.studentID=t.params.studentsID})}ngOnInit(){this.displayedColumns=["feetype","paidamount","paiddate","discription"],this._ss.getAllTransaction(this.studentID).subscribe(t=>{t&&(this.transactionList=t,this.showTransaction=!0)})}}return t.\u0275fac=function(e){return new(e||t)(s.cc(d.a),s.cc(n.a))},t.\u0275cmp=s.Wb({type:t,selectors:[["app-fee-transaction"]],inputs:{displayedColumns:"displayedColumns",transactionList:"transactionList"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"transactionsList","displayedColumns"]],template:function(t,e){1&t&&s.Wc(0,yt,2,2,"ng-container",0),2&t&&s.Ec("ngIf",e.showTransaction)},directives:[i.n,gt.a],styles:[""]}),t})()}];let vt=(()=>{class t{}return t.\u0275mod=s.ac({type:t}),t.\u0275inj=s.Zb({factory:function(e){return new(e||t)},imports:[[n.i.forChild(wt)],n.i]}),t})();var Dt=c("Jn5T");let Ft=(()=>{class t{}return t.\u0275mod=s.ac({type:t}),t.\u0275inj=s.Zb({factory:function(e){return new(e||t)},imports:[[i.c,vt,a.m,a.w,L.d,Dt.a]]}),t})()}}]);