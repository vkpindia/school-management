!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var a=0;a<e.length;a++){var c=e[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}function a(t,a,c){return a&&e(t.prototype,a),c&&e(t,c),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"2tqA":function(e,c,i){"use strict";i.r(c),i.d(c,"SalaryModule",(function(){return Yt}));var r,n=i("ofXK"),o=i("tyNb"),s=i("fXoL"),l=i("3Pt+"),u=i("FtGj"),h=i("JX91"),d=i("lJxs"),m=i("dNgK"),f=i("tk/3"),p=i("z6cu"),y=i("JIr8"),b=i("AytR"),g=((r=function(){function e(a){t(this,e),this._http=a,this._apiUrl=b.a.apiBaseUrl,this.httpOptions={headers:new f.d({"Content-Type":"Application/json; charset=utf-8","Access-Control-Allow-Origin":"*"}),crossDomain:!0}}return a(e,[{key:"handleError",value:function(t){return t.error instanceof ErrorEvent?console.error("An error occurred:",t.error.message):console.error("Back-end returned code ".concat(t.status,", body was: ")+t.error),Object(p.a)("Something bad happened; please try again later.")}},{key:"extractData",value:function(t){return t||{}}},{key:"getSalryType",value:function(){return this._http.get(this._apiUrl+"setup/getsalarytypes").pipe(Object(d.a)(this.extractData),Object(y.a)(this.handleError))}},{key:"getSalaryDetails",value:function(t){return this._http.get(this._apiUrl+"accounts/getsalarydetails?id="+t).pipe(Object(d.a)(this.extractData),Object(y.a)(this.handleError))}},{key:"getAllTransaction",value:function(t){return this._http.get(this._apiUrl+"accounts/getsalarytransaction?teacherid="+t).pipe(Object(d.a)(this.extractData),Object(y.a)(this.handleError))}},{key:"getAllSalaryDetails",value:function(t){return this._http.get(this._apiUrl+"accounts/getallsalarydetails?id="+t).pipe(Object(d.a)(this.extractData),Object(y.a)(this.handleError))}},{key:"saveSalary",value:function(t){return this._http.post(this._apiUrl+"accounts/addsalary",t).pipe(Object(d.a)(this.extractData),Object(y.a)(this.handleError))}},{key:"searchTeacher",value:function(){return this._http.get(this._apiUrl+"teacher/GetTeacherSearch").pipe(Object(d.a)(this.extractData),Object(y.a)(this.handleError))}},{key:"updateSalary",value:function(t,e){return this._http.put(this._apiUrl+"accounts/updatesalary",e).pipe(Object(y.a)(this.handleError))}},{key:"deleteSalary",value:function(t){return this._http.delete("".concat(this._apiUrl,"accounts/deletesalary?id=").concat(t)).pipe(Object(y.a)(this.handleError))}}]),e}()).\u0275fac=function(t){return new(t||r)(s.qc(f.b))},r.\u0275prov=s.Yb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),v=i("kmnG"),S=i("qFsG"),E=i("/1cH"),w=i("bTqV"),I=i("Wp6s"),k=i("FKr1"),D=i("d3UM"),P=i("iadO"),L=i("bSwM"),x=i("+0xr"),C=i("0EQZ"),F=i("Dh3D"),Y=i("M9IT"),A=i("NFeN"),O=i("1kSV");function W(t,e){1&t&&(s.ic(0,"div",26),s.dc(1,"img",27),s.ic(2,"p",28),s.Yc(3,"loading..."),s.hc(),s.hc())}function N(t,e){if(1&t){var a=s.jc();s.ic(0,"th",29),s.ic(1,"mat-checkbox",30),s.tc("change",(function(t){s.Oc(a);var e=s.xc();return t?e.masterToggle():null})),s.hc(),s.hc()}if(2&t){var c=s.xc();s.Pb(1),s.Ec("checked",c.selection.hasValue()&&c.isAllSelected())("indeterminate",c.selection.hasValue()&&!c.isAllSelected())("aria-label",c.checkboxLabel())}}function _(t,e){if(1&t){var a=s.jc();s.ic(0,"td",31),s.ic(1,"mat-checkbox",32),s.tc("click",(function(t){return s.Oc(a),t.stopPropagation()}))("change",(function(t){s.Oc(a);var c=e.$implicit,i=s.xc();return t?i.selection.toggle(c):null})),s.hc(),s.hc()}if(2&t){var c=e.$implicit,i=s.xc();s.Pb(1),s.Ec("checked",i.selection.isSelected(c))("aria-label",i.checkboxLabel(c))}}function T(t,e){1&t&&(s.ic(0,"th",33),s.Yc(1,"Name"),s.hc())}function j(t,e){if(1&t&&(s.ic(0,"span"),s.Yc(1),s.hc()),2&t){var a=s.xc().$implicit;s.Pb(1),s.Zc(a.name)}}function R(t,e){if(1&t&&(s.ic(0,"td",31),s.Wc(1,j,2,1,"span",34),s.hc()),2&t){var a=e.$implicit;s.xc();var c=s.Mc(47);s.Pb(1),s.Ec("ngIf",a.name)("ngIfElse",c)}}function q(t,e){1&t&&(s.ic(0,"th",33),s.Yc(1,"Gross Salary"),s.hc())}function M(t,e){if(1&t&&(s.ic(0,"span"),s.Yc(1),s.yc(2,"currency"),s.hc()),2&t){var a=s.xc().$implicit;s.Pb(1),s.Zc(s.Ac(2,1,a.grosssalary,"INR"))}}function $(t,e){if(1&t&&(s.ic(0,"td",31),s.Wc(1,M,3,4,"span",34),s.hc()),2&t){var a=e.$implicit;s.xc();var c=s.Mc(47);s.Pb(1),s.Ec("ngIf",a.grosssalary)("ngIfElse",c)}}function U(t,e){1&t&&(s.ic(0,"th",33),s.Yc(1,"Net Salary"),s.hc())}function Z(t,e){if(1&t&&(s.ic(0,"span"),s.Yc(1),s.yc(2,"currency"),s.hc()),2&t){var a=s.xc().$implicit;s.Pb(1),s.Zc(s.Ac(2,1,a.netsalary,"INR"))}}function G(t,e){if(1&t&&(s.ic(0,"td",31),s.Wc(1,Z,3,4,"span",34),s.hc()),2&t){var a=e.$implicit;s.xc();var c=s.Mc(47);s.Pb(1),s.Ec("ngIf",a.netsalary)("ngIfElse",c)}}function B(t,e){1&t&&(s.ic(0,"th",33),s.Yc(1,"Pay Amount "),s.hc())}function z(t,e){if(1&t&&(s.ic(0,"span",36),s.Yc(1),s.yc(2,"currency"),s.hc()),2&t){var a=s.xc().$implicit;s.Pb(1),s.ad(" ",s.Ac(2,1,a.payamount,"INR")," ")}}function V(t,e){if(1&t&&(s.ic(0,"td",31),s.Wc(1,z,3,4,"span",35),s.hc()),2&t){var a=e.$implicit;s.xc();var c=s.Mc(47);s.Pb(1),s.Ec("ngIf",a.payamount)("ngIfElse",c)}}function H(t,e){1&t&&(s.ic(0,"th",33),s.Yc(1,"PF Amount "),s.hc())}function J(t,e){if(1&t&&(s.ic(0,"span",36),s.Yc(1),s.yc(2,"currency"),s.hc()),2&t){var a=s.xc().$implicit;s.Pb(1),s.ad(" ",s.Ac(2,1,a.PFamount,"INR")," ")}}function X(t,e){if(1&t&&(s.ic(0,"td",31),s.Wc(1,J,3,4,"span",35),s.hc()),2&t){var a=e.$implicit;s.xc();var c=s.Mc(47);s.Pb(1),s.Ec("ngIf",a.PFamount)("ngIfElse",c)}}function K(t,e){1&t&&(s.ic(0,"th",33),s.Yc(1,"Pay Date "),s.hc())}function Q(t,e){if(1&t&&(s.ic(0,"span",36),s.Yc(1),s.yc(2,"date"),s.hc()),2&t){var a=s.xc().$implicit;s.Pb(1),s.ad(" ",s.Ac(2,1,a.paydate,"MM/dd/yyyy")," ")}}function tt(t,e){if(1&t&&(s.ic(0,"td",31),s.Wc(1,Q,3,4,"span",35),s.hc()),2&t){var a=e.$implicit;s.xc();var c=s.Mc(47);s.Pb(1),s.Ec("ngIf",a.paydate)("ngIfElse",c)}}function et(t,e){1&t&&s.dc(0,"th",37)}function at(t,e){if(1&t){var a=s.jc();s.ic(0,"td",31),s.ic(1,"div",38),s.ic(2,"div",39),s.dc(3,"span",40),s.ic(4,"div",41),s.ic(5,"button",42),s.tc("click",(function(){s.Oc(a);var t=e.$implicit;return s.xc().onEdit(t)})),s.dc(6,"span",43),s.Yc(7,"\xa0\xa0\xa0Edit"),s.hc(),s.ic(8,"button",42),s.tc("click",(function(){s.Oc(a);var t=e.$implicit;return s.xc().onDelete(t)})),s.dc(9,"span",44),s.Yc(10,"\xa0\xa0\xa0Delete"),s.hc(),s.hc(),s.hc(),s.hc(),s.hc()}}function ct(t,e){1&t&&s.dc(0,"tr",45)}function it(t,e){1&t&&s.dc(0,"tr",46)}function rt(t,e){1&t&&s.Yc(0,"---")}var nt,ot=((nt=function(){function e(a,c){t(this,e),this._ss=a,this._router=c,this.salaryList=[],this.onEditSalary=new s.r,this.onDeleteSalary=new s.r,this.displayedColumns=["select","name","grosssalary","netsalary","payamount","paydate","PFamount","actions"],this.filterData="",this.isLoading=!0,this.selection=new C.c(!0,[]),this.showForm=!1,this.isCreate=!1}return a(e,[{key:"ngOnChanges",value:function(t){console.log("salaryList",this.salaryList)}},{key:"ngOnInit",value:function(){this.getFeeList()}},{key:"getFeeList",value:function(){this.salaryList&&this.salaryList.length&&(this.recordLength=this.salaryList.length,console.log("this.salaryList",this.salaryList),this.feeList=new x.k(this.salaryList),this.feeList.sort=this.TSort,this.feeList.paginator=this.paginator),this.isLoading=!1}},{key:"isAllSelected",value:function(){if(this.salaryList&&this.salaryList.length)return this.selection.selected.length===this.feeList.data.length}},{key:"masterToggle",value:function(){var t=this;this.salaryList&&this.salaryList.length&&(this.isAllSelected()?this.selection.clear():this.feeList.data.forEach((function(e){return t.selection.select(e)})))}},{key:"checkboxLabel",value:function(t){return t?"".concat(this.selection.isSelected(t)?"deselect":"select"," row ").concat(t.position+1):(this.isAllSelected()?"select":"deselect")+" all"}},{key:"applyFilter",value:function(t){this.feeList.filter=t.target.value.trim().toLowerCase(),this.feeList.paginator&&this.feeList.paginator.firstPage()}},{key:"onEdit",value:function(t){console.log("row",t),t&&this.onEditSalary.emit(t)}},{key:"onDelete",value:function(t){var e=this;console.log("row",t),confirm("Are sure you want to delete this salary record?")&&this._ss.deleteSalary(t.id).subscribe((function(t){e.onDeleteSalary.emit(!0)}))}},{key:"getTransactions",value:function(){this._router.navigate(["accounts/salary/transactions"],{queryParams:{techerID:this.teacherID}})}}]),e}()).\u0275fac=function(t){return new(t||nt)(s.cc(g),s.cc(o.g))},nt.\u0275cmp=s.Wb({type:nt,selectors:[["app-salary-list"]],viewQuery:function(t,e){var a;1&t&&(s.Sc(Y.a,!0),s.Sc(F.a,!0)),2&t&&(s.Lc(a=s.uc())&&(e.paginator=a.first),s.Lc(a=s.uc())&&(e.TSort=a.first))},inputs:{salaryList:"salaryList",teacherID:"teacherID"},outputs:{onEditSalary:"onEditSalary",onDeleteSalary:"onDeleteSalary"},features:[s.Nb],decls:48,vars:5,consts:[[1,"list-container"],["class","no-record",4,"ngIf"],[1,"s-list"],[1,"list-head"],[2,"color","#003cff","cursor","pointer","font-size","14px",3,"click"],[1,"d-flex","align-items-center"],["appearance","outline",1,"col-12","p-0"],["matInput","","placeholder","Search...",3,"ngModel","keyup","ngModelChange"],["matSuffix",""],[1,"pt-4"],["mat-table","","matSort","",1,"col-12",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","grosssalary"],["matColumnDef","netsalary"],["matColumnDef","payamount"],["matColumnDef","PFamount"],["matColumnDef","paydate"],["matColumnDef","actions"],["mat-header-cell","","style","width: 50px;",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["dash",""],[1,"no-record"],["src","assets/images/page-loader.gif","alt",""],[1,"m-0"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell","","mat-sort-header",""],[4,"ngIf","ngIfElse"],["class","p-0 m-0",4,"ngIf","ngIfElse"],[1,"p-0","m-0"],["mat-header-cell","",2,"width","50px"],[1,"col"],["ngbDropdown","",1,"d-inline-block"],["id","dropdownBasic1","ngbDropdownToggle","",1,"flaticon-more-button-of-three-dots"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],["ngbDropdownItem","",3,"click"],[1,"fa","fa-cogs",2,"color","#00c853"],[1,"fa","fa-trash",2,"color","#f00"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(s.ic(0,"div",0),s.Wc(1,W,4,0,"div",1),s.ic(2,"div",2),s.ic(3,"mat-card"),s.ic(4,"div",3),s.ic(5,"mat-card-title"),s.Yc(6,"Staff payment details"),s.dc(7,"br"),s.ic(8,"a",4),s.tc("click",(function(){return e.getTransactions()})),s.Yc(9,"Get all transactions"),s.hc(),s.hc(),s.ic(10,"div",5),s.ic(11,"div"),s.ic(12,"mat-form-field",6),s.ic(13,"mat-label"),s.Yc(14,"Filter"),s.hc(),s.ic(15,"input",7),s.tc("keyup",(function(t){return e.applyFilter(t)}))("ngModelChange",(function(t){return e.searchString=t})),s.hc(),s.ic(16,"mat-icon",8),s.Yc(17,"search"),s.hc(),s.hc(),s.hc(),s.hc(),s.hc(),s.ic(18,"mat-card-content",9),s.ic(19,"table",10),s.gc(20,11),s.Wc(21,N,2,3,"th",12),s.Wc(22,_,2,2,"td",13),s.fc(),s.gc(23,14),s.Wc(24,T,2,0,"th",15),s.Wc(25,R,2,2,"td",13),s.fc(),s.gc(26,16),s.Wc(27,q,2,0,"th",15),s.Wc(28,$,2,2,"td",13),s.fc(),s.gc(29,17),s.Wc(30,U,2,0,"th",15),s.Wc(31,G,2,2,"td",13),s.fc(),s.gc(32,18),s.Wc(33,B,2,0,"th",15),s.Wc(34,V,2,2,"td",13),s.fc(),s.gc(35,19),s.Wc(36,H,2,0,"th",15),s.Wc(37,X,2,2,"td",13),s.fc(),s.gc(38,20),s.Wc(39,K,2,0,"th",15),s.Wc(40,tt,2,2,"td",13),s.fc(),s.gc(41,21),s.Wc(42,et,1,0,"th",22),s.Wc(43,at,11,0,"td",13),s.fc(),s.Wc(44,ct,1,0,"tr",23),s.Wc(45,it,1,0,"tr",24),s.hc(),s.hc(),s.hc(),s.hc(),s.hc(),s.Wc(46,rt,1,0,"ng-template",null,25,s.Xc)),2&t&&(s.Pb(1),s.Ec("ngIf",e.isLoading),s.Pb(14),s.Ec("ngModel",e.searchString),s.Pb(4),s.Ec("dataSource",e.feeList),s.Pb(25),s.Ec("matHeaderRowDef",e.displayedColumns),s.Pb(1),s.Ec("matRowDefColumns",e.displayedColumns))},directives:[n.n,I.a,I.d,v.c,v.f,S.b,l.c,l.q,l.t,A.a,v.g,I.b,x.j,F.a,x.c,x.e,x.b,x.g,x.i,x.d,L.a,x.a,F.b,O.a,O.e,O.c,O.b,x.f,x.h],pipes:[n.d,n.f],styles:[""]}),nt);function st(t,e){if(1&t&&(s.ic(0,"mat-option",16),s.Yc(1),s.hc()),2&t){var a=e.$implicit;s.Ec("value",a),s.Pb(1),s.ad(" ",a.name," ")}}function lt(t,e){1&t&&(s.ic(0,"mat-error"),s.Yc(1," Name is "),s.ic(2,"strong"),s.Yc(3,"required"),s.hc(),s.hc())}function ut(t,e){1&t&&(s.ic(0,"mat-error"),s.Yc(1," Gross salary is "),s.ic(2,"strong"),s.Yc(3,"required"),s.hc(),s.hc())}function ht(t,e){1&t&&(s.ic(0,"mat-error"),s.Yc(1," Net salary is "),s.ic(2,"strong"),s.Yc(3,"required"),s.hc(),s.hc())}function dt(t,e){1&t&&(s.ic(0,"mat-error"),s.Yc(1," Absent days is "),s.ic(2,"strong"),s.Yc(3,"required"),s.hc(),s.hc())}function mt(t,e){if(1&t&&(s.ic(0,"mat-option",16),s.Yc(1),s.hc()),2&t){var a=e.$implicit;s.Ec("value",a.salarytype),s.Pb(1),s.Zc(a.salarytype)}}function ft(t,e){1&t&&(s.ic(0,"mat-error"),s.Yc(1," Salary type is "),s.ic(2,"strong"),s.Yc(3,"required"),s.hc(),s.hc())}function pt(t,e){1&t&&(s.ic(0,"mat-error"),s.Yc(1," Pay date is "),s.ic(2,"strong"),s.Yc(3,"required"),s.hc(),s.hc())}function yt(t,e){if(1&t){var a=s.jc();s.ic(0,"button",39),s.tc("click",(function(t){return s.Oc(a),s.xc(2).onCancel(t)})),s.Yc(1,"Cancel"),s.hc()}}function bt(t,e){if(1&t){var a=s.jc();s.ic(0,"button",39),s.tc("click",(function(t){return s.Oc(a),s.xc(2).onFormReset(t)})),s.Yc(1,"Reset"),s.hc()}}function gt(t,e){if(1&t){var a=s.jc();s.ic(0,"form",17),s.tc("ngSubmit",(function(){return s.Oc(a),s.xc().onSubmit()})),s.ic(1,"div",3),s.ic(2,"div",4),s.ic(3,"mat-form-field",5),s.ic(4,"mat-label"),s.Yc(5,"Name"),s.hc(),s.dc(6,"input",18),s.Wc(7,lt,4,0,"mat-error",19),s.hc(),s.hc(),s.ic(8,"div",4),s.ic(9,"mat-form-field",5),s.ic(10,"mat-label"),s.Yc(11,"Gross Salary"),s.hc(),s.dc(12,"input",20),s.Wc(13,ut,4,0,"mat-error",19),s.hc(),s.hc(),s.ic(14,"div",4),s.ic(15,"mat-form-field",5),s.ic(16,"mat-label"),s.Yc(17,"Net Salary"),s.hc(),s.dc(18,"input",21),s.Wc(19,ht,4,0,"mat-error",19),s.hc(),s.hc(),s.ic(20,"div",4),s.ic(21,"mat-form-field",5),s.ic(22,"mat-label"),s.Yc(23,"PF Number"),s.hc(),s.dc(24,"input",22),s.hc(),s.hc(),s.ic(25,"div",4),s.ic(26,"mat-form-field",5),s.ic(27,"mat-label"),s.Yc(28,"PF Percentage(%)"),s.hc(),s.dc(29,"input",23),s.hc(),s.hc(),s.ic(30,"div",4),s.ic(31,"mat-form-field",5),s.ic(32,"mat-label"),s.Yc(33,"ESI Number"),s.hc(),s.dc(34,"input",24),s.hc(),s.hc(),s.ic(35,"div",4),s.ic(36,"mat-form-field",5),s.ic(37,"mat-label"),s.Yc(38,"ESI Percentage(%)"),s.hc(),s.dc(39,"input",25),s.hc(),s.hc(),s.ic(40,"div",4),s.ic(41,"mat-form-field",5),s.ic(42,"mat-label"),s.Yc(43,"Absent Days"),s.hc(),s.ic(44,"input",26),s.tc("blur",(function(){return s.Oc(a),s.xc().calculateSalary()})),s.hc(),s.Wc(45,dt,4,0,"mat-error",19),s.hc(),s.hc(),s.ic(46,"div",4),s.ic(47,"mat-form-field",5),s.ic(48,"mat-label"),s.Yc(49,"Salary Type"),s.hc(),s.ic(50,"mat-select",27),s.Wc(51,mt,2,2,"mat-option",9),s.hc(),s.Wc(52,ft,4,0,"mat-error",19),s.hc(),s.hc(),s.ic(53,"div",4),s.ic(54,"mat-form-field",5),s.ic(55,"mat-label"),s.Yc(56,"Pay Date"),s.hc(),s.dc(57,"input",28),s.dc(58,"mat-datepicker-toggle",29),s.dc(59,"mat-datepicker",null,30),s.Wc(61,pt,4,0,"mat-error",19),s.hc(),s.hc(),s.ic(62,"div",4),s.ic(63,"mat-form-field",5),s.ic(64,"mat-label"),s.Yc(65,"Pay Amount"),s.hc(),s.ic(66,"input",31),s.tc("blur",(function(){return s.Oc(a),s.xc().calculatePending()})),s.hc(),s.hc(),s.hc(),s.ic(67,"div",4),s.ic(68,"mat-form-field",5),s.ic(69,"mat-label"),s.Yc(70,"Salary After Added"),s.hc(),s.dc(71,"input",32),s.hc(),s.hc(),s.ic(72,"div",4),s.ic(73,"mat-checkbox",33),s.Yc(74,"Status"),s.hc(),s.hc(),s.ic(75,"div",4),s.ic(76,"mat-form-field",5),s.ic(77,"mat-label"),s.Yc(78,"Pending Amount"),s.hc(),s.dc(79,"input",34),s.hc(),s.hc(),s.ic(80,"div",4),s.ic(81,"mat-form-field",5),s.ic(82,"mat-label"),s.Yc(83,"Description"),s.hc(),s.dc(84,"textarea",35),s.hc(),s.hc(),s.hc(),s.ic(85,"div",36),s.ic(86,"button",37),s.Yc(87),s.hc(),s.Wc(88,yt,2,0,"button",38),s.Wc(89,bt,2,0,"button",38),s.hc(),s.hc()}if(2&t){var c=s.Mc(60),i=s.xc();s.Ec("formGroup",i.salaryForm),s.Pb(7),s.Ec("ngIf",i.submitted&&i.f.name.hasError("required")),s.Pb(6),s.Ec("ngIf",i.submitted&&i.f.grosssalary.hasError("required")),s.Pb(6),s.Ec("ngIf",i.submitted&&i.f.netsalary.hasError("required")),s.Pb(26),s.Ec("ngIf",i.submitted&&i.f.absentdays.hasError("required")),s.Pb(6),s.Ec("ngForOf",i.salarytypesList),s.Pb(1),s.Ec("ngIf",i.submitted&&i.f.salarytype.hasError("required")),s.Pb(5),s.Ec("matDatepicker",c),s.Pb(1),s.Ec("for",c),s.Pb(3),s.Ec("ngIf",i.submitted&&i.f.paydate.hasError("required")),s.Pb(26),s.Zc(i.buttonLabel),s.Pb(1),s.Ec("ngIf",i.showButtons),s.Pb(1),s.Ec("ngIf",!i.showButtons)}}function vt(t,e){if(1&t){var a=s.jc();s.ic(0,"div",40),s.ic(1,"app-salary-list",41),s.tc("onEditSalary",(function(t){return s.Oc(a),s.xc().onEditRecord(t)}))("onDeleteSalary",(function(t){return s.Oc(a),s.xc().onDeleteSalary(t)})),s.hc(),s.hc()}if(2&t){var c=s.xc();s.Pb(1),s.Ec("salaryList",c.salaryList)("teacherID",c.teacherID)}}function St(t,e){1&t&&s.Yc(0,"---")}var Et,wt=((Et=function(){function e(a,c,i,r,n){t(this,e),this._ar=a,this._router=c,this._snackBar=i,this._fs=r,this._date=n,this.formCancel=new s.r,this.formSubmit=new s.r,this.loading=!1,this.submitted=!1,this.ShowList=!1,this.error="",this.cardTitle="Add/Update Salary",this.showButtons=!1,this.showForm=!0,this.buttonLabel="Submit",this.salaryList=[],this.teacherName=new l.g,this.teacherRecordList=[],this._phonePattern="^[0-9-+s()]*$",this._emailPattern="[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}",this.horizontalPosition="start",this.verticalPosition="bottom",this.visible=!0,this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[u.g,u.c],this.salarytypesList=[]}return a(e,[{key:"ngOnInit",value:function(){this.salaryForm=new l.j({name:new l.g(null,l.x.required),grosssalary:new l.g(null,l.x.required),netsalary:new l.g(null,l.x.required),absentdays:new l.g(new Date,l.x.required),salarytype:new l.g(new Date,l.x.required),paydate:new l.g(new Date,l.x.required),payamount:new l.g(null),PF:new l.g(null),PFamount:new l.g(null),ESI:new l.g(null),ESIamount:new l.g(null),salaryafterded:new l.g(null),status:new l.g(null),pendingamount:new l.g(null),description:new l.g(null)}),this.getSalaryTypes(),this.getTeacherRecord()}},{key:"getSalaryTypes",value:function(){var t=this;this._fs.getSalryType().subscribe((function(e){e&&(t.salarytypesList=e)}))}},{key:"getSalaryDetails",value:function(){var t=this;console.log("teacherID",this.teacherID),this._fs.getSalaryDetails(this.teacherID?this.teacherID:1).subscribe((function(e){e&&(t.salaryForm.patchValue(e[0]),t.salaryRecord=e[0])}))}},{key:"calculateSalary",value:function(){var t,e=this.f.netsalary.value/30,a=0;Number(this.f.absentdays.value)>0&&(t=Number(this.f.absentdays.value)-1),t>0&&(a=e*t),console.log("oneDaySalary",e),console.log("salaryDeduction",a),this.payAmount=Number((this.f.netsalary.value-a).toFixed(2)),console.log("payAmount",this.payAmount),this.salaryForm.patchValue({payamount:this.payAmount})}},{key:"calculatePending",value:function(){var t=0;this.f.payamount.value<this.payAmount&&(t=this.payAmount-this.f.payamount.value),this.salaryForm.patchValue({pendingamount:t.toFixed(2)})}},{key:"getAllSalaryList",value:function(){var t=this;this._fs.getAllSalaryDetails(this.teacherID?this.teacherID:1).subscribe((function(e){e&&(t.salaryList=e,t.ShowList=!0)}))}},{key:"getOptionText",value:function(t){if(t)return t.name}},{key:"getTeacherRecord",value:function(){var t=this;this._fs.searchTeacher().subscribe((function(e){t.teacherRecordList=e,t.teacherFilteredList=t.teacherName.valueChanges.pipe(Object(h.a)(""),Object(d.a)((function(e){return t._filter(e)})))}))}},{key:"_filter",value:function(t){var e=t;return this.teacherRecordList.filter((function(t){return t.name.toLowerCase().includes(e)}))}},{key:"onOptionSelection",value:function(t){this.teacherID=t.option.value.id,this.teacherID&&this.getSalaryDetails()}},{key:"onEditRecord",value:function(t){t&&(this.salaryRecord=t,this.salaryForm.patchValue(t),this.buttonLabel="Update")}},{key:"onSubmit",value:function(){var t=this;if(this.submitted=!0,this.salaryForm.value&&(this.salaryForm.value.paydate=this._date.transform(this.salaryForm.value.paydate,"MM/dd/yyyy")),!this.salaryForm.invalid){var e={};Object.assign(e,this.salaryForm.value),this.loading=!0,console.log("salaryRecord",this.salaryRecord),e.teacherid=this.salaryRecord.teacherid,e.id=this.salaryRecord.id,this.salaryRecord&&this.salaryRecord.id?this._fs.updateSalary(this.salaryRecord.id,e).subscribe((function(e){t.showNotification("Updated Successfully!!"),t.salaryForm&&t.salaryForm.reset(),t.showForm=!1,setTimeout((function(){t.showForm=!0}),50),t.getAllSalaryList()}),(function(e){t.error=e,t.loading=!1,console.error(t.error)})):(console.log("payload",e),this._fs.saveSalary(e).subscribe((function(e){t.showNotification("Submitted Successfully!!"),t.salaryForm&&t.salaryForm.reset(),t.showForm=!1,setTimeout((function(){t.showForm=!0}),50),t.getAllSalaryList()}),(function(e){t.error=e,t.loading=!1,console.error(t.error)})))}}},{key:"showNotification",value:function(t){this._snackBar.open(t,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["success-snackbar"]})}},{key:"onFormReset",value:function(t){t&&this.salaryForm&&this.salaryForm.reset()}},{key:"onCancel",value:function(t){t&&this.formCancel.emit(!0)}},{key:"onDeleteSalary",value:function(t){t&&this.getAllSalaryList()}},{key:"f",get:function(){return this.salaryForm.controls}}]),e}()).\u0275fac=function(t){return new(t||Et)(s.cc(o.a),s.cc(o.g),s.cc(m.a),s.cc(g),s.cc(n.f))},Et.\u0275cmp=s.Wb({type:Et,selectors:[["app-add-salary"]],inputs:{salaryDetails:"salaryDetails"},outputs:{formCancel:"formCancel",formSubmit:"formSubmit"},features:[s.Ob([n.f])],decls:27,vars:9,consts:[[1,"form-container"],[1,"page-title"],[1,"form-fields"],[1,"row"],[1,"col-12","col-sm-6","col-md-4"],["appearance","outline",1,"p-0"],["matInput","","placeholder","Select student","aria-label","Number",3,"formControl","matAutocomplete"],["autoActiveFirstOption","",3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"col-2","pt-1","mt-1","mb-3"],["mat-raised-button","","color","primary","type","button",3,"click"],[1,"pt-2"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","",4,"ngIf"],["dash",""],[3,"value"],[3,"formGroup","ngSubmit"],["matInput","","placeholder","Enter Last Name","formControlName","name"],[4,"ngIf"],["matInput","","placeholder","Enter gross salary","formControlName","grosssalary"],["matInput","","placeholder","Enter net salary","formControlName","netsalary"],["type","number","matInput","","placeholder","Enter PF Number","formControlName","PF"],["type","number","matInput","","placeholder","Enter PF Percentage(%)","formControlName","PFamount"],["type","number","matInput","","placeholder","Enter ESI","formControlName","ESI"],["type","number","matInput","","placeholder","Enter ESI amount","formControlName","ESIamount"],["matInput","","placeholder","Enter absent days","formControlName","absentdays",3,"blur"],["placeholder","Select salarytype","formControlName","salarytype"],["matInput","","placeholder","Select date","formControlName","paydate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["type","number","matInput","","placeholder","Enter amount","formControlName","payamount",3,"blur"],["type","number","matInput","","placeholder","Enter after added","formControlName","salaryafterded"],["formControlName","status"],["type","number","matInput","","placeholder","Enter amount","formControlName","pendingamount"],["matInput","","placeholder","Description","rows","3","formControlName","description"],[1,"example-button-row","pt-3","text-center"],["mat-raised-button","","color","primary","type","submit"],["mat-raised-button","","class","ml-3 mat-secondary",3,"click",4,"ngIf"],["mat-raised-button","",1,"ml-3","mat-secondary",3,"click"],[1,""],[3,"salaryList","teacherID","onEditSalary","onDeleteSalary"]],template:function(t,e){if(1&t&&(s.ic(0,"div",0),s.ic(1,"div",1),s.ic(2,"h3"),s.Yc(3,"Salary"),s.hc(),s.hc(),s.ic(4,"div",2),s.ic(5,"div",3),s.ic(6,"div",4),s.ic(7,"mat-form-field",5),s.ic(8,"mat-label"),s.Yc(9,"Search Staff"),s.hc(),s.dc(10,"input",6),s.ic(11,"mat-autocomplete",7,8),s.tc("optionSelected",(function(t){return e.onOptionSelection(t)})),s.Wc(13,st,2,2,"mat-option",9),s.yc(14,"async"),s.hc(),s.hc(),s.hc(),s.ic(15,"div",10),s.ic(16,"button",11),s.tc("click",(function(){return e.getAllSalaryList()})),s.Yc(17,"Search"),s.hc(),s.hc(),s.hc(),s.ic(18,"mat-card"),s.ic(19,"mat-card-title"),s.Yc(20),s.hc(),s.ic(21,"mat-card-content",12),s.Wc(22,gt,90,13,"form",13),s.hc(),s.hc(),s.hc(),s.hc(),s.ic(23,"div",0),s.Wc(24,vt,2,2,"div",14),s.hc(),s.Wc(25,St,1,0,"ng-template",null,15,s.Xc)),2&t){var a=s.Mc(12);s.Pb(10),s.Ec("formControl",e.teacherName)("matAutocomplete",a),s.Pb(1),s.Ec("displayWith",e.getOptionText),s.Pb(2),s.Ec("ngForOf",s.zc(14,7,e.teacherFilteredList)),s.Pb(7),s.Zc(e.cardTitle),s.Pb(2),s.Ec("ngIf",e.showForm),s.Pb(2),s.Ec("ngIf",e.ShowList)}},directives:[v.c,v.f,S.b,l.c,E.c,l.q,l.h,E.a,n.m,w.a,I.a,I.d,I.b,n.n,k.n,l.z,l.r,l.k,l.i,l.v,D.a,P.b,P.d,v.g,P.a,L.a,v.b,ot],pipes:[n.b],styles:[""]}),Et),It=i("NUHZ");function kt(t,e){if(1&t&&(s.gc(0),s.dc(1,"app-transactions",1),s.fc()),2&t){var a=s.xc();s.Pb(1),s.Ec("transactionsList",a.transactionList)("displayedColumns",a.displayedColumns)}}var Dt,Pt,Lt,xt=[{path:"",component:wt},{path:"transactions",component:(Dt=function(){function e(a,c){var i=this;t(this,e),this._ss=a,this._route=c,this.showTransaction=!1,this._route.queryParamMap.subscribe((function(t){i.teacherID=t.params.techerID}))}return a(e,[{key:"ngOnInit",value:function(){var t=this;this.displayedColumns=["salarytype","paidamount","paiddate","discription"],this._ss.getAllTransaction(this.teacherID).subscribe((function(e){e&&(t.transactionList=e,t.showTransaction=!0)}))}}]),e}(),Dt.\u0275fac=function(t){return new(t||Dt)(s.cc(g),s.cc(o.a))},Dt.\u0275cmp=s.Wb({type:Dt,selectors:[["app-salary-transactions"]],inputs:{displayedColumns:"displayedColumns",transactionList:"transactionList"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"transactionsList","displayedColumns"]],template:function(t,e){1&t&&s.Wc(0,kt,2,2,"ng-container",0),2&t&&s.Ec("ngIf",e.showTransaction)},directives:[n.n,It.a],styles:[""]}),Dt)}],Ct=((Pt=function e(){t(this,e)}).\u0275mod=s.ac({type:Pt}),Pt.\u0275inj=s.Zb({factory:function(t){return new(t||Pt)},imports:[[o.i.forChild(xt)],o.i]}),Pt),Ft=i("Jn5T"),Yt=((Lt=function e(){t(this,e)}).\u0275mod=s.ac({type:Lt}),Lt.\u0275inj=s.Zb({factory:function(t){return new(t||Lt)},imports:[[n.c,Ct,l.m,l.w,O.d,Ft.a]]}),Lt)}}])}();