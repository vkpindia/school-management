!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var c=0;c<e.length;c++){var i=e[c];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,c,i){return c&&e(t.prototype,c),i&&e(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{PGKz:function(e,i,a){"use strict";a.r(i),a.d(i,"ResultModule",(function(){return ne}));var n,r=a("ofXK"),s=a("tyNb"),o=a("M9IT"),l=a("Dh3D"),u=a("+0xr"),d=a("0EQZ"),m=a("3Pt+"),h=a("fXoL"),f=a("tk/3"),p=a("XNiG"),g=a("z6cu"),b=a("lJxs"),v=a("JIr8"),x=a("AytR"),y=((n=function(){function e(c){t(this,e),this._http=c,this._apiUrl=x.a.apiBaseUrl,this.dataSource=new p.a,this.httpOptions={headers:new f.d({"Content-Type":"Application/json; charset=utf-8","Access-Control-Allow-Origin":"*"}),crossDomain:!0}}return c(e,[{key:"handleError",value:function(t){return t.error instanceof ErrorEvent?console.error("An error occurred:",t.error.message):console.error("Back-end returned code ".concat(t.status,", body was: ")+t.error),Object(g.a)("Something bad happened; please try again later.")}},{key:"extractData",value:function(t){return t||{}}},{key:"setExamRecord",value:function(t){this.dataSource.next(t)}},{key:"getExamRecord",value:function(){return this.dataSource.asObservable()}},{key:"getStudentRecord",value:function(t,e){return this._http.get(this._apiUrl+"/student/GetStudentSearch?classid=".concat(t,"&sectionid=").concat(e)).pipe(Object(b.a)(this.extractData),Object(v.a)(this.handleError))}},{key:"getExamResultByClassSection",value:function(t,e,c,i){return this._http.get("".concat(this._apiUrl,"results/getresultsbyclasssection?studentid=").concat(t,"&examid=").concat(e,"&classid=").concat(c,"&sectionid=").concat(i)).pipe(Object(b.a)(this.extractData),Object(v.a)(this.handleError))}},{key:"getExamResult",value:function(t,e){return this._http.get("".concat(this._apiUrl,"setup/getexamsbyclasssection?classid=").concat(t,"&sectionid=").concat(e)).pipe(Object(b.a)(this.extractData),Object(v.a)(this.handleError))}},{key:"getClassSection",value:function(){return this._http.get(this._apiUrl+"setup/getclassesandsections").pipe(Object(b.a)(this.extractData),Object(v.a)(this.handleError))}},{key:"getSections",value:function(t){return this._http.get("".concat(this._apiUrl,"setup/getsectionsforclass?id=").concat(t)).pipe(Object(b.a)(this.extractData),Object(v.a)(this.handleError))}},{key:"saveResult",value:function(t){return this._http.post(this._apiUrl+"results/addstudentresults",t).pipe(Object(b.a)(this.extractData),Object(v.a)(this.handleError))}},{key:"saveTotalResult",value:function(t){return this._http.post(this._apiUrl+"results/addstudentresultstotals",t).pipe(Object(b.a)(this.extractData),Object(v.a)(this.handleError))}}]),e}()).\u0275fac=function(t){return new(t||n)(h.qc(f.b))},n.\u0275prov=h.Yb({token:n,factory:n.\u0275fac,providedIn:"root"}),n),k=a("kmnG"),D=a("d3UM"),R=a("bTqV"),w=a("Wp6s"),S=a("qFsG"),I=a("NFeN"),L=a("FKr1"),X=a("bSwM"),P=a("1kSV");function V(t,e){if(1&t&&(h.ic(0,"mat-option",31),h.Xc(1),h.hc()),2&t){var c=e.$implicit;h.Dc("value",c.id),h.Pb(1),h.Yc(c.classname)}}function C(t,e){if(1&t&&(h.ic(0,"mat-option",31),h.Xc(1),h.hc()),2&t){var c=e.$implicit;h.Dc("value",c.id),h.Pb(1),h.Yc(c.sectionname)}}function E(t,e){if(1&t){var c=h.jc();h.ic(0,"th",32),h.ic(1,"mat-checkbox",33),h.tc("change",(function(t){h.Nc(c);var e=h.xc();return t?e.masterToggle():null})),h.hc(),h.hc()}if(2&t){var i=h.xc();h.Pb(1),h.Dc("checked",i.selection.hasValue()&&i.isAllSelected())("indeterminate",i.selection.hasValue()&&!i.isAllSelected())("aria-label",i.checkboxLabel())}}function F(t,e){if(1&t){var c=h.jc();h.ic(0,"td",34),h.ic(1,"mat-checkbox",35),h.tc("click",(function(t){return h.Nc(c),t.stopPropagation()}))("change",(function(t){h.Nc(c);var i=e.$implicit,a=h.xc();return t?a.selection.toggle(i):null})),h.hc(),h.hc()}if(2&t){var i=e.$implicit,a=h.xc();h.Pb(1),h.Dc("checked",a.selection.isSelected(i))("aria-label",a.checkboxLabel(i))}}function T(t,e){1&t&&(h.ic(0,"th",36),h.Xc(1," Exam Name "),h.hc())}function j(t,e){if(1&t&&(h.ic(0,"span"),h.Xc(1),h.yc(2,"titlecase"),h.hc()),2&t){var c=h.xc().$implicit;h.Pb(1),h.Yc(h.zc(2,1,c.examname))}}function O(t,e){if(1&t&&(h.ic(0,"td",34),h.Vc(1,j,3,3,"span",37),h.hc()),2&t){var c=e.$implicit;h.xc();var i=h.Lc(56);h.Pb(1),h.Dc("ngIf",c.examname)("ngIfElse",i)}}function N(t,e){1&t&&(h.ic(0,"th",36),h.Xc(1," Start Date "),h.hc())}function q(t,e){if(1&t&&(h.ic(0,"span"),h.Xc(1),h.yc(2,"date"),h.hc()),2&t){var c=h.xc().$implicit;h.Pb(1),h.Yc(h.Ac(2,1,c.startdate,"dd/MM/yyy"))}}function _(t,e){if(1&t&&(h.ic(0,"td",34),h.Vc(1,q,3,4,"span",37),h.hc()),2&t){var c=e.$implicit;h.xc();var i=h.Lc(56);h.Pb(1),h.Dc("ngIf",c.startdate)("ngIfElse",i)}}function A(t,e){1&t&&(h.ic(0,"th",36),h.Xc(1," End date "),h.hc())}function $(t,e){if(1&t&&(h.ic(0,"span"),h.Xc(1),h.yc(2,"date"),h.hc()),2&t){var c=h.xc().$implicit;h.Pb(1),h.Yc(h.Ac(2,1,c.enddate,"dd/MM/yyy"))}}function M(t,e){if(1&t&&(h.ic(0,"td",34),h.Vc(1,$,3,4,"span",37),h.hc()),2&t){var c=e.$implicit;h.xc();var i=h.Lc(56);h.Pb(1),h.Dc("ngIf",c.enddate)("ngIfElse",i)}}function z(t,e){1&t&&(h.ic(0,"th",36),h.Xc(1," Description "),h.hc())}function G(t,e){if(1&t&&(h.ic(0,"span"),h.Xc(1),h.hc()),2&t){var c=h.xc().$implicit;h.Pb(1),h.Yc(c.examdescription)}}function Y(t,e){if(1&t&&(h.ic(0,"td",34),h.Vc(1,G,2,1,"span",37),h.hc()),2&t){var c=e.$implicit;h.xc();var i=h.Lc(56);h.Pb(1),h.Dc("ngIf",c.examdescription)("ngIfElse",i)}}function B(t,e){1&t&&h.dc(0,"th",38)}function H(t,e){if(1&t){var c=h.jc();h.ic(0,"td",34),h.ic(1,"div",39),h.ic(2,"div",40),h.dc(3,"span",41),h.ic(4,"div",42),h.ic(5,"button",43),h.tc("click",(function(){h.Nc(c);var t=e.$implicit;return h.xc().addResult(t)})),h.dc(6,"span",44),h.Xc(7,"\xa0\xa0\xa0Add Result"),h.hc(),h.hc(),h.hc(),h.hc(),h.hc()}}function U(t,e){1&t&&h.dc(0,"tr",45)}function W(t,e){1&t&&h.dc(0,"tr",46)}function K(t,e){1&t&&h.Xc(0,"---")}var Z,J=function(){return[5,10,25,100]},Q=((Z=function(){function e(c,i,a){t(this,e),this._ss=c,this._router=i,this._activatedRout=a,this.displayedColumns=["select","examname","startdate","enddate","examdescription","actions"],this.filterData="",this.isLoading=!0,this.classList=[],this.sectionList=[],this.classID=new m.g,this.sectionID=new m.g,this.selection=new d.c(!0,[])}return c(e,[{key:"ngOnInit",value:function(){this.getClassSection()}},{key:"getClassSection",value:function(){var t=this;this._ss.getClassSection().subscribe((function(e){e&&(t.classList=e)}))}},{key:"onClassChange",value:function(t){var e=this;t&&this._ss.getSections(t.value).subscribe((function(t){t&&(e.sectionList=t)}))}},{key:"getexamList",value:function(){var t=this;this._ss.getExamResult(this.classID.value,this.sectionID.value).subscribe((function(e){console.log("data",e),e&&(t.recordLength=e.length,t.examList=new u.k(e),t.examList.sort=t.TSort,t.examList.paginator=t.paginator),t.isLoading=!1}))}},{key:"isAllSelected",value:function(){if(this.examList&&this.examList.data)return this.selection.selected.length===this.examList.data.length}},{key:"masterToggle",value:function(){var t=this;this.examList&&this.examList.data&&(this.isAllSelected()?this.selection.clear():this.examList.data.forEach((function(e){return t.selection.select(e)})))}},{key:"checkboxLabel",value:function(t){return t?"".concat(this.selection.isSelected(t)?"deselect":"select"," row ").concat(t.position+1):(this.isAllSelected()?"select":"deselect")+" all"}},{key:"applyFilter",value:function(t){this.examList.filter=t.target.value.trim().toLowerCase(),this.examList.paginator&&this.examList.paginator.firstPage()}},{key:"addResult",value:function(t){t&&(console.log("row",t),this._ss.setExamRecord(t),this._router.navigate(["exam-result/add"],{queryParams:{examid:t.examid,sectionid:t.sectionid,classid:t.classid}}))}},{key:"onView",value:function(t){console.log("row",t),this._router.navigate(["students/details"],{queryParams:{id:t.id}})}}]),e}()).\u0275fac=function(t){return new(t||Z)(h.cc(y),h.cc(s.g),h.cc(s.a))},Z.\u0275cmp=h.Wb({type:Z,selectors:[["app-result-list"]],viewQuery:function(t,e){var c;1&t&&(h.Rc(o.a,!0),h.Rc(l.a,!0)),2&t&&(h.Kc(c=h.uc())&&(e.paginator=c.first),h.Kc(c=h.uc())&&(e.TSort=c.first))},decls:57,vars:11,consts:[[1,"list-container"],[1,"page-title"],[1,"s-list"],[1,"row"],[1,"col-12","col-sm-6","col-md-5"],["appearance","outline",1,"p-0","w-100"],["placeholder","Select Class",3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Select Section",3,"formControl"],[1,"col-12","col-sm-6","col-md-2","pt-1","mt-1","mb-3"],["mat-raised-button","","color","primary","type","button",3,"click"],[1,"list-head"],["appearance","outline",1,"col-12","p-0"],["matInput","","placeholder","Search...",3,"keyup"],["matSuffix",""],[1,"pt-4"],["mat-table","","matSort","",1,"col-12",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","examname"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","startdate"],["matColumnDef","enddate"],["matColumnDef","examdescription"],["matColumnDef","actions"],["mat-header-cell","","style","width: 50px;",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],["dash",""],[3,"value"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell","","mat-sort-header",""],[4,"ngIf","ngIfElse"],["mat-header-cell","",2,"width","50px"],[1,"col"],["ngbDropdown","",1,"d-inline-block"],["id","dropdownBasic1","ngbDropdownToggle","",1,"flaticon-more-button-of-three-dots"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],["ngbDropdownItem","",3,"click"],[1,"fa","fa-cogs",2,"color","#00c853"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(h.ic(0,"div",0),h.ic(1,"div",1),h.ic(2,"h3"),h.Xc(3,"Scheduled Exam"),h.hc(),h.hc(),h.ic(4,"div",2),h.ic(5,"div",3),h.ic(6,"div",4),h.ic(7,"mat-form-field",5),h.ic(8,"mat-label"),h.Xc(9,"Class"),h.hc(),h.ic(10,"mat-select",6),h.tc("selectionChange",(function(t){return e.onClassChange(t)})),h.Vc(11,V,2,2,"mat-option",7),h.hc(),h.hc(),h.hc(),h.ic(12,"div",4),h.ic(13,"mat-form-field",5),h.ic(14,"mat-label"),h.Xc(15,"Section"),h.hc(),h.ic(16,"mat-select",8),h.Vc(17,C,2,2,"mat-option",7),h.hc(),h.hc(),h.hc(),h.ic(18,"div",9),h.ic(19,"button",10),h.tc("click",(function(){return e.getexamList()})),h.Xc(20,"Search"),h.hc(),h.hc(),h.hc(),h.ic(21,"mat-card"),h.ic(22,"div",11),h.ic(23,"mat-card-title"),h.Xc(24,"Scheduled Exam List"),h.hc(),h.ic(25,"div"),h.ic(26,"mat-form-field",12),h.ic(27,"mat-label"),h.Xc(28,"Filter"),h.hc(),h.ic(29,"input",13),h.tc("keyup",(function(t){return e.applyFilter(t)})),h.hc(),h.ic(30,"mat-icon",14),h.Xc(31,"search"),h.hc(),h.hc(),h.hc(),h.hc(),h.ic(32,"mat-card-content",15),h.ic(33,"table",16),h.gc(34,17),h.Vc(35,E,2,3,"th",18),h.Vc(36,F,2,2,"td",19),h.fc(),h.gc(37,20),h.Vc(38,T,2,0,"th",21),h.Vc(39,O,2,2,"td",19),h.fc(),h.gc(40,22),h.Vc(41,N,2,0,"th",21),h.Vc(42,_,2,2,"td",19),h.fc(),h.gc(43,23),h.Vc(44,A,2,0,"th",21),h.Vc(45,M,2,2,"td",19),h.fc(),h.gc(46,24),h.Vc(47,z,2,0,"th",21),h.Vc(48,Y,2,2,"td",19),h.fc(),h.gc(49,25),h.Vc(50,B,1,0,"th",26),h.Vc(51,H,8,0,"td",19),h.fc(),h.Vc(52,U,1,0,"tr",27),h.Vc(53,W,1,0,"tr",28),h.hc(),h.dc(54,"mat-paginator",29),h.hc(),h.hc(),h.hc(),h.hc(),h.Vc(55,K,1,0,"ng-template",null,30,h.Wc)),2&t&&(h.Pb(10),h.Dc("formControl",e.classID),h.Pb(1),h.Dc("ngForOf",e.classList),h.Pb(5),h.Dc("formControl",e.sectionID),h.Pb(1),h.Dc("ngForOf",e.sectionList),h.Pb(16),h.Dc("dataSource",e.examList),h.Pb(19),h.Dc("matHeaderRowDef",e.displayedColumns),h.Pb(1),h.Dc("matRowDefColumns",e.displayedColumns),h.Pb(1),h.Dc("length",e.recordLength)("pageSize",10)("pageSizeOptions",h.Gc(10,J)))},directives:[k.c,k.f,D.a,m.q,m.h,r.m,R.a,w.a,w.d,S.b,I.a,k.g,w.b,u.j,l.a,u.c,u.e,u.b,u.g,u.i,o.a,L.n,u.d,X.a,u.a,l.b,r.n,P.a,P.e,P.c,P.b,u.f,u.h],pipes:[r.w,r.f],styles:[""]}),Z),tt=a("JX91"),et=a("dNgK"),ct=a("wZkO");function it(t,e){if(1&t){var c=h.jc();h.ic(0,"th",22),h.ic(1,"mat-checkbox",23),h.tc("change",(function(t){h.Nc(c);var e=h.xc();return t?e.masterToggle():null})),h.hc(),h.hc()}if(2&t){var i=h.xc();h.Pb(1),h.Dc("checked",i.selection.hasValue()&&i.isAllSelected())("indeterminate",i.selection.hasValue()&&!i.isAllSelected())("aria-label",i.checkboxLabel())}}function at(t,e){if(1&t){var c=h.jc();h.ic(0,"td",24),h.ic(1,"mat-checkbox",25),h.tc("click",(function(t){return h.Nc(c),t.stopPropagation()}))("change",(function(t){h.Nc(c);var i=e.$implicit,a=h.xc();return t?a.selection.toggle(i):null})),h.hc(),h.hc()}if(2&t){var i=e.$implicit,a=h.xc();h.Pb(1),h.Dc("checked",a.selection.isSelected(i))("aria-label",a.checkboxLabel(i))}}function nt(t,e){1&t&&(h.ic(0,"th",26),h.Xc(1," Exam ID "),h.hc())}function rt(t,e){if(1&t&&(h.ic(0,"span"),h.Xc(1),h.hc()),2&t){var c=h.xc().$implicit;h.Pb(1),h.Yc(c.examid)}}function st(t,e){if(1&t&&(h.ic(0,"td",24),h.Vc(1,rt,2,1,"span",27),h.hc()),2&t){var c=e.$implicit;h.xc();var i=h.Lc(40);h.Pb(1),h.Dc("ngIf",c.examid)("ngIfElse",i)}}function ot(t,e){1&t&&(h.ic(0,"th",26),h.Xc(1," Student Name "),h.hc())}function lt(t,e){if(1&t&&(h.ic(0,"span"),h.Xc(1),h.hc()),2&t){var c=h.xc().$implicit;h.Pb(1),h.Yc(c.studentid)}}function ut(t,e){if(1&t&&(h.ic(0,"td",24),h.Vc(1,lt,2,1,"span",27),h.hc()),2&t){var c=e.$implicit;h.xc();var i=h.Lc(40);h.Pb(1),h.Dc("ngIf",c.studentid)("ngIfElse",i)}}function dt(t,e){1&t&&(h.ic(0,"th",26),h.Xc(1," Subject "),h.hc())}function mt(t,e){if(1&t&&(h.ic(0,"span"),h.Xc(1),h.hc()),2&t){var c=h.xc().$implicit;h.Pb(1),h.Yc(c.subject)}}function ht(t,e){if(1&t&&(h.ic(0,"td",24),h.Vc(1,mt,2,1,"span",27),h.hc()),2&t){var c=e.$implicit;h.xc();var i=h.Lc(40);h.Pb(1),h.Dc("ngIf",c.subject)("ngIfElse",i)}}function ft(t,e){1&t&&(h.ic(0,"th",26),h.Xc(1," Mark "),h.hc())}function pt(t,e){if(1&t&&(h.ic(0,"span"),h.Xc(1),h.hc()),2&t){var c=h.xc().$implicit;h.Pb(1),h.Yc(c.marks)}}function gt(t,e){if(1&t&&(h.ic(0,"td",24),h.Vc(1,pt,2,1,"span",27),h.hc()),2&t){var c=e.$implicit;h.xc();var i=h.Lc(40);h.Pb(1),h.Dc("ngIf",c.marks)("ngIfElse",i)}}function bt(t,e){1&t&&(h.ic(0,"th",26),h.Xc(1," Percentage "),h.hc())}function vt(t,e){if(1&t&&(h.ic(0,"span"),h.Xc(1),h.hc()),2&t){var c=h.xc().$implicit;h.Pb(1),h.Yc(c.percetage)}}function xt(t,e){if(1&t&&(h.ic(0,"td",24),h.Vc(1,vt,2,1,"span",27),h.hc()),2&t){var c=e.$implicit;h.xc();var i=h.Lc(40);h.Pb(1),h.Dc("ngIf",c.percetage)("ngIfElse",i)}}function yt(t,e){1&t&&(h.ic(0,"th",26),h.Xc(1," Grade "),h.hc())}function kt(t,e){if(1&t&&(h.ic(0,"span"),h.Xc(1),h.yc(2,"uppercase"),h.hc()),2&t){var c=h.xc().$implicit;h.Pb(1),h.Yc(h.zc(2,1,c.grade))}}function Dt(t,e){if(1&t&&(h.ic(0,"td",24),h.Vc(1,kt,3,3,"span",27),h.hc()),2&t){var c=e.$implicit;h.xc();var i=h.Lc(40);h.Pb(1),h.Dc("ngIf",c.grade)("ngIfElse",i)}}function Rt(t,e){1&t&&h.dc(0,"tr",28)}function wt(t,e){1&t&&h.dc(0,"tr",29)}function St(t,e){1&t&&h.Xc(0,"---")}var It,Lt=function(){return[5,10,25,100]},Xt=((It=function(){function e(c,i,a){t(this,e),this._ss=c,this._router=i,this._activatedRout=a,this.studentResultList=[],this.displayedColumns=["select","examid","studentid","subject","marks","percetage","grade"],this.filterData="",this.isLoading=!0,this.classList=[],this.sectionList=[],this.classID=new m.g,this.sectionID=new m.g,this.selection=new d.c(!0,[])}return c(e,[{key:"ngOnChanges",value:function(t){this.getexamList()}},{key:"ngOnInit",value:function(){this.getexamList()}},{key:"getexamList",value:function(){this.studentResultList&&this.studentResultList.length&&(this.recordLength=this.studentResultList.length,this.examList=new u.k(this.studentResultList),this.examList.sort=this.TSort,this.examList.paginator=this.paginator),this.isLoading=!1}},{key:"isAllSelected",value:function(){if(this.examList&&this.examList.data)return this.selection.selected.length===this.examList.data.length}},{key:"masterToggle",value:function(){var t=this;this.examList&&this.examList.data&&(this.isAllSelected()?this.selection.clear():this.examList.data.forEach((function(e){return t.selection.select(e)})))}},{key:"checkboxLabel",value:function(t){return t?"".concat(this.selection.isSelected(t)?"deselect":"select"," row ").concat(t.position+1):(this.isAllSelected()?"select":"deselect")+" all"}},{key:"applyFilter",value:function(t){this.examList.filter=t.target.value.trim().toLowerCase(),this.examList.paginator&&this.examList.paginator.firstPage()}}]),e}()).\u0275fac=function(t){return new(t||It)(h.cc(y),h.cc(s.g),h.cc(s.a))},It.\u0275cmp=h.Wb({type:It,selectors:[["app-student-result"]],viewQuery:function(t,e){var c;1&t&&(h.Rc(o.a,!0),h.Rc(l.a,!0)),2&t&&(h.Kc(c=h.uc())&&(e.paginator=c.first),h.Kc(c=h.uc())&&(e.TSort=c.first))},inputs:{studentResultList:"studentResultList",isResultReady:"isResultReady"},features:[h.Nb],decls:41,vars:7,consts:[[1,"list-container"],[1,"s-list"],[1,"list-head"],["appearance","outline",1,"col-12","p-0"],["matInput","","placeholder","Search...",3,"keyup"],["matSuffix",""],[1,"pt-4"],["mat-table","","matSort","",1,"col-12",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","examid"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","studentid"],["matColumnDef","subject"],["matColumnDef","marks"],["matColumnDef","percetage"],["matColumnDef","grade"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],["dash",""],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell","","mat-sort-header",""],[4,"ngIf","ngIfElse"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(h.ic(0,"div",0),h.ic(1,"div",1),h.ic(2,"mat-card"),h.ic(3,"div",2),h.ic(4,"mat-card-title"),h.Xc(5,"Exam Result"),h.hc(),h.ic(6,"div"),h.ic(7,"mat-form-field",3),h.ic(8,"mat-label"),h.Xc(9,"Filter"),h.hc(),h.ic(10,"input",4),h.tc("keyup",(function(t){return e.applyFilter(t)})),h.hc(),h.ic(11,"mat-icon",5),h.Xc(12,"search"),h.hc(),h.hc(),h.hc(),h.hc(),h.ic(13,"mat-card-content",6),h.ic(14,"table",7),h.gc(15,8),h.Vc(16,it,2,3,"th",9),h.Vc(17,at,2,2,"td",10),h.fc(),h.gc(18,11),h.Vc(19,nt,2,0,"th",12),h.Vc(20,st,2,2,"td",10),h.fc(),h.gc(21,13),h.Vc(22,ot,2,0,"th",12),h.Vc(23,ut,2,2,"td",10),h.fc(),h.gc(24,14),h.Vc(25,dt,2,0,"th",12),h.Vc(26,ht,2,2,"td",10),h.fc(),h.gc(27,15),h.Vc(28,ft,2,0,"th",12),h.Vc(29,gt,2,2,"td",10),h.fc(),h.gc(30,16),h.Vc(31,bt,2,0,"th",12),h.Vc(32,xt,2,2,"td",10),h.fc(),h.gc(33,17),h.Vc(34,yt,2,0,"th",12),h.Vc(35,Dt,2,2,"td",10),h.fc(),h.Vc(36,Rt,1,0,"tr",18),h.Vc(37,wt,1,0,"tr",19),h.hc(),h.dc(38,"mat-paginator",20),h.hc(),h.hc(),h.hc(),h.hc(),h.Vc(39,St,1,0,"ng-template",null,21,h.Wc)),2&t&&(h.Pb(14),h.Dc("dataSource",e.examList),h.Pb(22),h.Dc("matHeaderRowDef",e.displayedColumns),h.Pb(1),h.Dc("matRowDefColumns",e.displayedColumns),h.Pb(1),h.Dc("length",e.recordLength)("pageSize",10)("pageSizeOptions",h.Gc(6,Lt)))},directives:[w.a,w.d,k.c,k.f,S.b,I.a,k.g,w.b,u.j,l.a,u.c,u.e,u.b,u.g,u.i,o.a,u.d,X.a,u.a,l.b,r.n,u.f,u.h],pipes:[r.y],styles:[""]}),It),Pt=a("/1cH");function Vt(t,e){1&t&&(h.ic(0,"mat-icon",9),h.Xc(1,"wc"),h.hc(),h.Xc(2," Add Result "))}function Ct(t,e){if(1&t&&(h.ic(0,"mat-option",29),h.Xc(1),h.hc()),2&t){var c=e.$implicit;h.Dc("value",c),h.Pb(1),h.Zc(" ",c.name," ")}}function Et(t,e){1&t&&(h.ic(0,"mat-error"),h.Xc(1," Student name is "),h.ic(2,"strong"),h.Xc(3,"required"),h.hc(),h.hc())}function Ft(t,e){1&t&&(h.ic(0,"mat-error"),h.Xc(1," Exam ID is "),h.ic(2,"strong"),h.Xc(3,"required"),h.hc(),h.hc())}function Tt(t,e){1&t&&(h.ic(0,"mat-error"),h.Xc(1," Subject is "),h.ic(2,"strong"),h.Xc(3,"required"),h.hc(),h.hc())}function jt(t,e){1&t&&(h.ic(0,"mat-error"),h.Xc(1," Actual mark is "),h.ic(2,"strong"),h.Xc(3,"required"),h.hc(),h.hc())}function Ot(t,e){1&t&&(h.ic(0,"mat-error"),h.Xc(1," Marks is "),h.ic(2,"strong"),h.Xc(3,"required"),h.hc(),h.hc())}function Nt(t,e){if(1&t){var c=h.jc();h.ic(0,"div",16),h.ic(1,"div",17),h.ic(2,"div",18),h.ic(3,"mat-form-field",19),h.ic(4,"mat-label"),h.Xc(5,"Student Name"),h.hc(),h.dc(6,"input",20),h.ic(7,"mat-autocomplete",21,22),h.tc("optionSelected",(function(t){h.Nc(c);var i=e.index;return h.xc(2).onOptionSelection(t,"ar",i)})),h.Vc(9,Ct,2,2,"mat-option",23),h.yc(10,"async"),h.Vc(11,Et,4,0,"mat-error",24),h.hc(),h.hc(),h.hc(),h.ic(12,"div",18),h.ic(13,"mat-form-field",19),h.ic(14,"mat-label"),h.Xc(15,"Exam ID"),h.hc(),h.dc(16,"input",25),h.Vc(17,Ft,4,0,"mat-error",24),h.hc(),h.hc(),h.ic(18,"div",18),h.ic(19,"mat-form-field",19),h.ic(20,"mat-label"),h.Xc(21,"Subject"),h.hc(),h.dc(22,"input",26),h.Vc(23,Tt,4,0,"mat-error",24),h.hc(),h.hc(),h.ic(24,"div",18),h.ic(25,"mat-form-field",19),h.ic(26,"mat-label"),h.Xc(27,"Actual Mark"),h.hc(),h.dc(28,"input",27),h.Vc(29,jt,4,0,"mat-error",24),h.hc(),h.hc(),h.ic(30,"div",18),h.ic(31,"mat-form-field",19),h.ic(32,"mat-label"),h.Xc(33,"Marks"),h.hc(),h.dc(34,"input",28),h.Vc(35,Ot,4,0,"mat-error",24),h.hc(),h.hc(),h.hc(),h.hc()}if(2&t){var i=e.$implicit,a=e.index,n=h.Lc(8),r=h.xc(2);h.Pb(1),h.Dc("formGroupName",a),h.Pb(5),h.Dc("formControl",r.studentID)("matAutocomplete",n),h.Pb(1),h.Dc("displayWith",r.getOptionText),h.Pb(2),h.Dc("ngForOf",h.zc(10,10,r.studentFilteredList)),h.Pb(2),h.Dc("ngIf",r.submitted&&r.studentID.hasError("required")),h.Pb(6),h.Dc("ngIf",r.submitted&&i.get("examid").hasError("required")),h.Pb(6),h.Dc("ngIf",r.submitted&&i.get("subject").hasError("required")),h.Pb(6),h.Dc("ngIf",r.submitted&&i.get("actualmarks").hasError("required")),h.Pb(6),h.Dc("ngIf",r.submitted&&i.get("marks").hasError("required"))}}function qt(t,e){if(1&t){var c=h.jc();h.ic(0,"button",30),h.tc("click",(function(t){return h.Nc(c),h.xc(2).onFormReset(t,"addResult")})),h.Xc(1,"Reset"),h.hc()}}function _t(t,e){if(1&t){var c=h.jc();h.ic(0,"form",10),h.tc("ngSubmit",(function(){return h.Nc(c),h.xc().onSubmit("addResult")})),h.Vc(1,Nt,36,12,"div",11),h.ic(2,"div",12),h.ic(3,"button",13),h.tc("click",(function(){return h.Nc(c),h.xc().addNextSubjectMark()})),h.Xc(4,"Add Next"),h.hc(),h.ic(5,"button",14),h.Xc(6,"Submit"),h.hc(),h.Vc(7,qt,2,0,"button",15),h.hc(),h.hc()}if(2&t){var i=h.xc();h.Dc("formGroup",i.addResultForm),h.Pb(1),h.Dc("ngForOf",i.f.items.controls),h.Pb(6),h.Dc("ngIf",!i.showButtons)}}function At(t,e){1&t&&(h.ic(0,"mat-icon",31),h.Xc(1,"layers"),h.hc(),h.Xc(2," Add Total Result "))}function $t(t,e){if(1&t&&(h.ic(0,"mat-option",29),h.Xc(1),h.hc()),2&t){var c=e.$implicit;h.Dc("value",c),h.Pb(1),h.Zc(" ",c.name," ")}}function Mt(t,e){1&t&&(h.ic(0,"mat-error"),h.Xc(1," Student name is "),h.ic(2,"strong"),h.Xc(3,"required"),h.hc(),h.hc())}function zt(t,e){1&t&&(h.ic(0,"mat-error"),h.Xc(1," Exam ID is "),h.ic(2,"strong"),h.Xc(3,"required"),h.hc(),h.hc())}function Gt(t,e){1&t&&(h.ic(0,"mat-error"),h.Xc(1," Total marks is "),h.ic(2,"strong"),h.Xc(3,"required"),h.hc(),h.hc())}function Yt(t,e){1&t&&(h.ic(0,"mat-error"),h.Xc(1," Actual Total is "),h.ic(2,"strong"),h.Xc(3,"required"),h.hc(),h.hc())}function Bt(t,e){1&t&&(h.ic(0,"mat-error"),h.Xc(1," Grade is "),h.ic(2,"strong"),h.Xc(3,"required"),h.hc(),h.hc())}function Ht(t,e){1&t&&(h.ic(0,"mat-error"),h.Xc(1," Percent is "),h.ic(2,"strong"),h.Xc(3,"required"),h.hc(),h.hc())}function Ut(t,e){1&t&&(h.ic(0,"mat-error"),h.Xc(1," Comments is "),h.ic(2,"strong"),h.Xc(3,"required"),h.hc(),h.hc())}function Wt(t,e){if(1&t){var c=h.jc();h.ic(0,"button",39),h.tc("click",(function(t){return h.Nc(c),h.xc(2).onCancel(t)})),h.Xc(1,"Cancel"),h.hc()}}function Kt(t,e){if(1&t){var c=h.jc();h.ic(0,"button",39),h.tc("click",(function(t){return h.Nc(c),h.xc(2).onFormReset(t)})),h.Xc(1,"Reset"),h.hc()}}function Zt(t,e){if(1&t){var c=h.jc();h.ic(0,"form",10),h.tc("ngSubmit",(function(){return h.Nc(c),h.xc().onSubmit()})),h.ic(1,"div",32),h.ic(2,"div",18),h.ic(3,"mat-form-field",19),h.ic(4,"mat-label"),h.Xc(5,"Student Name"),h.hc(),h.dc(6,"input",20),h.ic(7,"mat-autocomplete",21,22),h.tc("optionSelected",(function(t){return h.Nc(c),h.xc().onOptionSelection(t)})),h.Vc(9,$t,2,2,"mat-option",23),h.yc(10,"async"),h.Vc(11,Mt,4,0,"mat-error",24),h.hc(),h.hc(),h.hc(),h.ic(12,"div",18),h.ic(13,"mat-form-field",19),h.ic(14,"mat-label"),h.Xc(15,"Exam ID"),h.hc(),h.dc(16,"input",25),h.Vc(17,zt,4,0,"mat-error",24),h.hc(),h.hc(),h.ic(18,"div",18),h.ic(19,"mat-form-field",19),h.ic(20,"mat-label"),h.Xc(21,"Total Mark"),h.hc(),h.dc(22,"input",33),h.Vc(23,Gt,4,0,"mat-error",24),h.hc(),h.hc(),h.ic(24,"div",18),h.ic(25,"mat-form-field",19),h.ic(26,"mat-label"),h.Xc(27,"Actual Total Mark"),h.hc(),h.dc(28,"input",34),h.Vc(29,Yt,4,0,"mat-error",24),h.hc(),h.hc(),h.ic(30,"div",18),h.ic(31,"mat-form-field",19),h.ic(32,"mat-label"),h.Xc(33,"Grade"),h.hc(),h.dc(34,"input",35),h.Vc(35,Bt,4,0,"mat-error",24),h.hc(),h.hc(),h.ic(36,"div",18),h.ic(37,"mat-form-field",19),h.ic(38,"mat-label"),h.Xc(39,"Percent"),h.hc(),h.dc(40,"input",36),h.Vc(41,Ht,4,0,"mat-error",24),h.hc(),h.hc(),h.ic(42,"div",18),h.ic(43,"mat-form-field",19),h.ic(44,"mat-label"),h.Xc(45,"Comments"),h.hc(),h.dc(46,"textarea",37),h.Vc(47,Ut,4,0,"mat-error",24),h.hc(),h.hc(),h.hc(),h.ic(48,"div",12),h.ic(49,"button",14),h.Xc(50,"Submit"),h.hc(),h.Vc(51,Wt,2,0,"button",38),h.Vc(52,Kt,2,0,"button",38),h.hc(),h.hc()}if(2&t){var i=h.Lc(8),a=h.xc();h.Dc("formGroup",a.addTResultForm),h.Pb(6),h.Dc("formControl",a.studentTID)("matAutocomplete",i),h.Pb(1),h.Dc("displayWith",a.getOptionText),h.Pb(2),h.Dc("ngForOf",h.zc(10,14,a.studentTFilteredList)),h.Pb(2),h.Dc("ngIf",a.submitted&&a.studentTID.hasError("required")),h.Pb(6),h.Dc("ngIf",a.submitted&&a.ff.examid.hasError("required")),h.Pb(6),h.Dc("ngIf",a.submitted&&a.ff.totalmarks.hasError("required")),h.Pb(6),h.Dc("ngIf",a.submitted&&a.ff.actualtotal.hasError("required")),h.Pb(6),h.Dc("ngIf",a.submitted&&a.ff.grade.hasError("required")),h.Pb(6),h.Dc("ngIf",a.submitted&&a.ff.percetage.hasError("required")),h.Pb(6),h.Dc("ngIf",a.submitted&&a.ff.comments.hasError("required")),h.Pb(4),h.Dc("ngIf",a.showButtons),h.Pb(1),h.Dc("ngIf",!a.showButtons)}}function Jt(t,e){1&t&&h.Xc(0,"---")}var Qt,te,ee,ce=[{path:"",component:Q},{path:"add",component:(Qt=function(){function e(c,i,a,n,r,s){var o=this;t(this,e),this._route=c,this._ar=i,this._router=a,this._snackBar=n,this._ss=r,this._date=s,this.formCancel=new h.r,this.formSubmit=new h.r,this.loading=!1,this.submitted=!1,this.error="",this.cardTitle="Add New Students",this.showButtons=!1,this.showForm=!0,this.showTForm=!0,this.isResultReady=!1,this.buttonLabel="Next",this.studentID=new m.g,this.studentTID=new m.g,this.horizontalPosition="start",this.verticalPosition="bottom",this.classList=[],this.sectionList=[],this.studentRecordList=[],this.studentResultList=[],this.actualMark=0,this.mark=0,this.percent=0,this._ar.queryParamMap.subscribe((function(t){o.examRecord=t.params,console.log(" this.examRecord",o.examRecord)}))}return c(e,[{key:"ngOnInit",value:function(){var t=this;this.addResultForm=new m.j({items:new m.d([this.createFields()])}),this.addTResultForm=new m.j({studentid:new m.g(null,m.x.required),examid:new m.g(this.examRecord.examid,m.x.required),actualtotal:new m.g(null,m.x.required),totalmarks:new m.g(null,m.x.required),grade:new m.g(null,m.x.required),percetage:new m.g(null,m.x.required),comments:new m.g(null,m.x.required)}),this.addResultForm.valueChanges.subscribe((function(e){t.getTotalMarks(e.items)})),this.getStudentsRecord(),this.examRecord&&this.studentid&&this.getResult()}},{key:"getTotalMarks",value:function(t){var e,c=0,i=0;t.forEach((function(t){c+=t.actualmarks,i+=t.marks,e=i/c*100})),this.addTResultForm.get("actualtotal").setValue(c),this.addTResultForm.get("totalmarks").setValue(i),this.addTResultForm.get("percetage").setValue(e)}},{key:"createFields",value:function(){return new m.j({studentid:new m.g(null,m.x.required),examid:new m.g(this.examRecord.examid,m.x.required),subject:new m.g(null,m.x.required),actualmarks:new m.g(null,m.x.required),marks:new m.g(null,m.x.required)})}},{key:"addNextSubjectMark",value:function(){this.f.items.push(this.createFields()),this.controlIndex++,this.studentid&&this.addResultForm.get("items").at(this.controlIndex).get("studentid").patchValue(this.studentid)}},{key:"getStudentsRecord",value:function(){var t=this;this._ss.getStudentRecord(this.examRecord.classid,this.examRecord.sectionid).subscribe((function(e){e&&(t.studentRecordList=e,t.studentFilteredList=t.studentID.valueChanges.pipe(Object(tt.a)(""),Object(b.a)((function(e){return t._filter(e)}))),t.studentTFilteredList=t.studentTID.valueChanges.pipe(Object(tt.a)(""),Object(b.a)((function(e){return t._filter(e)}))))}))}},{key:"getOptionText",value:function(t){if(t)return t.name}},{key:"_filter",value:function(t){var e=t;return this.studentRecordList.filter((function(t){return t.name.toLowerCase().includes(e)}))}},{key:"onOptionSelection",value:function(t,e,c){var i=this;"ar"===e?(this.studentid=t.option.value.id,this.controlIndex=c,this.addTResultForm.get("studentid").setValue(t.option.value.id),this.studentRecordList&&this.studentRecordList.map((function(e){e.id===t.option.value.id&&i.studentTID.patchValue(e.name)})),this.addResultForm.get("items").at(c).get("studentid").patchValue(t.option.value.id)):this.addTResultForm.patchValue({studentid:t.option.value.id}),this.getResult()}},{key:"getResult",value:function(){var t=this;this._ss.getExamResultByClassSection(this.studentid,this.examRecord.examid,this.examRecord.classid,this.examRecord.sectionid).subscribe((function(e){e&&(t.studentResultList=e,t.isResultReady=!0)}))}},{key:"onSubmit",value:function(t){var e=this;if("addResult"===t){if(this.submitted=!0,this.addResultForm.invalid)return;var c;c=this.addResultForm.value.items,this.loading=!0,console.log("payload",c),this._ss.saveResult(c).subscribe((function(t){e.showNotification("Submitted Successfully!!"),e.selectedIndex=1,e.addResultForm.reset(),e.showForm=!1,setTimeout((function(){e.showForm=!0}),0),t.forEach((function(t,c){e.addResultForm.get("items").at(c).get("examid").patchValue(t.examid)})),e.getTotalMarks(t),e.getResult()}),(function(t){e.error=t,e.loading=!1,console.error(e.error)}))}else{if(this.submitted=!0,this.addTResultForm.invalid)return;this.addTResultForm.value.examid=parseInt(this.addTResultForm.value.examid);var i={};Object.assign(i,this.addTResultForm.value),this.loading=!0,this._ss.saveTotalResult(i).subscribe((function(t){console.log("data",t),e.showNotification("Submitted Successfully!!"),e.addTResultForm.reset(),e.showTForm=!1,setTimeout((function(){e.showTForm=!0}),0),e.addTResultForm.get("examid").patchValue(t.examid),e.getResult()}),(function(t){e.error=t,e.loading=!1,console.error(e.error)}))}}},{key:"showNotification",value:function(t){this._snackBar.open(t,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["success-snackbar"]})}},{key:"onFormReset",value:function(t,e){t&&"addResult"==e?this.addResultForm.reset():this.addTResultForm.reset()}},{key:"onCancel",value:function(t){t&&this.formCancel.emit(!0)}},{key:"f",get:function(){return this.addResultForm.controls}},{key:"fa",get:function(){return this.addResultForm.get("items")}},{key:"ff",get:function(){return this.addTResultForm.controls}}]),e}(),Qt.\u0275fac=function(t){return new(t||Qt)(h.cc(s.a),h.cc(s.a),h.cc(s.g),h.cc(et.a),h.cc(y),h.cc(r.f))},Qt.\u0275cmp=h.Wb({type:Qt,selectors:[["app-add-result"]],inputs:{studentDetails:"studentDetails"},outputs:{formCancel:"formCancel",formSubmit:"formSubmit"},features:[h.Ob([r.f])],decls:20,vars:6,consts:[[1,"form-container"],[1,"page-title"],[1,"form-fields"],[1,"pt-2"],[3,"selectedIndex"],["mat-tab-label",""],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"studentResultList","isResultReady"],["dash",""],[1,"example-tab-icon"],[3,"formGroup","ngSubmit"],["formArrayName","items",4,"ngFor","ngForOf"],[1,"example-button-row","pt-3","text-center"],["mat-raised-button","","type","button",1,"mat-next","mt-2","mr-3",3,"click"],["mat-raised-button","","color","primary","type","submit"],["mat-raised-button","","color","warn","class","ml-3 mat-secondary",3,"click",4,"ngIf"],["formArrayName","items"],[1,"row","m-0","pt-4",3,"formGroupName"],[1,"col-12","col-sm-6","col-md-4"],["appearance","outline",1,"p-0"],["matInput","","placeholder","Select student","aria-label","Number",3,"formControl","matAutocomplete"],["autoActiveFirstOption","",3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","type","number","placeholder","Enter exam ID","formControlName","examid"],["matInput","","placeholder","Enter subject","formControlName","subject"],["type","number","matInput","","placeholder","Enter Actual smarks","formControlName","actualmarks"],["type","number","matInput","","placeholder","Enter smarks","formControlName","marks"],[3,"value"],["mat-raised-button","","color","warn",1,"ml-3","mat-secondary",3,"click"],[1,""],[1,"row","m-0","pt-4"],["matInput","","type","number","placeholder","Enter subject","formControlName","totalmarks"],["type","number","matInput","","placeholder","Enter Actual Total smarks","formControlName","actualtotal"],["matInput","","placeholder","Enter grade","formControlName","grade"],["type","number","matInput","","placeholder","Enter percent","formControlName","percetage"],["matInput","","placeholder","Enter percent","formControlName","comments","row","4"],["mat-raised-button","","class","ml-3 mat-secondary",3,"click",4,"ngIf"],["mat-raised-button","",1,"ml-3","mat-secondary",3,"click"]],template:function(t,e){1&t&&(h.ic(0,"div",0),h.ic(1,"div",1),h.ic(2,"h3"),h.Xc(3,"Add Result"),h.hc(),h.hc(),h.ic(4,"div",2),h.ic(5,"mat-card"),h.ic(6,"mat-card-title"),h.Xc(7),h.hc(),h.ic(8,"mat-card-content",3),h.ic(9,"mat-tab-group",4),h.ic(10,"mat-tab"),h.Vc(11,Vt,3,0,"ng-template",5),h.Vc(12,_t,8,3,"form",6),h.hc(),h.ic(13,"mat-tab"),h.Vc(14,At,3,0,"ng-template",5),h.Vc(15,Zt,53,16,"form",6),h.hc(),h.hc(),h.hc(),h.hc(),h.hc(),h.ic(16,"div"),h.dc(17,"app-student-result",7),h.hc(),h.hc(),h.Vc(18,Jt,1,0,"ng-template",null,8,h.Wc)),2&t&&(h.Pb(7),h.Yc(e.cardTitle),h.Pb(2),h.Dc("selectedIndex",e.selectedIndex),h.Pb(3),h.Dc("ngIf",e.showForm),h.Pb(3),h.Dc("ngIf",e.showTForm),h.Pb(2),h.Dc("studentResultList",e.studentResultList)("isResultReady",e.isResultReady))},directives:[w.a,w.d,w.b,ct.b,ct.a,ct.c,r.n,Xt,I.a,m.z,m.r,m.k,r.m,R.a,m.e,m.l,k.c,k.f,S.b,m.c,Pt.c,m.q,m.h,Pt.a,m.v,m.i,L.n,k.b],pipes:[r.b],styles:[""]}),Qt),data:{braedcrumb:"Add"}}],ie=((te=function e(){t(this,e)}).\u0275mod=h.ac({type:te}),te.\u0275inj=h.Zb({factory:function(t){return new(t||te)},imports:[[s.i.forChild(ce)],s.i]}),te),ae=a("jAig"),ne=((ee=function e(){t(this,e)}).\u0275mod=h.ac({type:ee}),ee.\u0275inj=h.Zb({factory:function(t){return new(t||ee)},imports:[[r.c,ie,m.m,m.w,P.d,ae.a]]}),ee)}}])}();