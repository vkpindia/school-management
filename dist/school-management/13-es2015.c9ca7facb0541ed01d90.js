(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{eK3z:function(t,e,c){"use strict";c.r(e),c.d(e,"AttendanceModule",(function(){return bt}));var i=c("ofXK"),n=c("tyNb"),s=c("M9IT"),a=c("Dh3D"),o=c("+0xr"),r=c("0EQZ"),l=c("3Pt+"),d=c("fXoL"),h=c("tk/3"),u=c("z6cu"),m=c("lJxs"),f=c("JIr8"),p=c("AytR");let g=(()=>{class t{constructor(t){this._http=t,this._apiUrl=p.a.apiBaseUrl,this.httpOptions={headers:new h.d({"Content-Type":"Application/json; charset=utf-8","Access-Control-Allow-Origin":"*"}),crossDomain:!0}}handleError(t){return t.error instanceof ErrorEvent?console.error("An error occurred:",t.error.message):console.error(`Back-end returned code ${t.status}, body was: `+t.error),Object(u.a)("Something bad happened; please try again later.")}extractData(t){return t||{}}getStudentRecord(t,e){return this._http.get(this._apiUrl+`/student/GetStudentSearch?classid=${t}&sectionid=${e}`).pipe(Object(m.a)(this.extractData),Object(f.a)(this.handleError))}getStudentAttendance(t,e){return this._http.get(this._apiUrl+`attandance/getstudentsattandancebyclasssection?classid=${t}&sectionid=${e}`).pipe(Object(m.a)(this.extractData),Object(f.a)(this.handleError))}getClassSection(){return this._http.get(this._apiUrl+"setup/getclassesandsections").pipe(Object(m.a)(this.extractData),Object(f.a)(this.handleError))}getSections(t){return this._http.get(`${this._apiUrl}setup/getsectionsforclass?id=${t}`).pipe(Object(m.a)(this.extractData),Object(f.a)(this.handleError))}saveAttendance(t){return this._http.post(this._apiUrl+"attandance/addstudentatendence",t).pipe(Object(m.a)(this.extractData),Object(f.a)(this.handleError))}updateAttendance(t){return this._http.put(this._apiUrl+"attandance/updatestudentatendence",t).pipe(Object(m.a)(this.extractData),Object(f.a)(this.handleError))}deleteAttendance(t){return this._http.delete(this._apiUrl+"attandance/deletestudentatendence?id="+t).pipe(Object(m.a)(this.extractData),Object(f.a)(this.handleError))}}return t.\u0275fac=function(e){return new(e||t)(d.qc(h.b))},t.\u0275prov=d.Yb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=c("dNgK"),D=c("Wp6s"),S=c("kmnG"),w=c("d3UM"),v=c("qFsG"),_=c("z17N"),L=c("NFeN"),C=c("FKr1"),I=c("bTqV"),x=c("bSwM");function y(t,e){if(1&t&&(d.ic(0,"mat-option",36),d.Xc(1),d.hc()),2&t){const t=e.$implicit;d.Dc("value",t.id),d.Pb(1),d.Yc(t.classname)}}function P(t,e){1&t&&(d.ic(0,"mat-error"),d.Xc(1," Class is "),d.ic(2,"strong"),d.Xc(3,"required"),d.hc(),d.hc())}function k(t,e){if(1&t&&(d.ic(0,"mat-option",36),d.Xc(1),d.hc()),2&t){const t=e.$implicit;d.Dc("value",t.id),d.Pb(1),d.Yc(t.sectionname)}}function A(t,e){1&t&&(d.ic(0,"mat-error"),d.Xc(1," Section is "),d.ic(2,"strong"),d.Xc(3,"required"),d.hc(),d.hc())}function X(t,e){1&t&&(d.ic(0,"mat-error"),d.Xc(1," Date-time is "),d.ic(2,"strong"),d.Xc(3,"required"),d.hc(),d.hc())}function V(t,e){1&t&&(d.ic(0,"mat-error"),d.Xc(1," Attendace_part is "),d.ic(2,"strong"),d.Xc(3,"required"),d.hc(),d.hc())}function F(t,e){if(1&t){const t=d.jc();d.ic(0,"th",37),d.ic(1,"mat-checkbox",38),d.tc("change",(function(e){d.Nc(t);const c=d.xc(2);return e?c.masterToggle():null})),d.hc(),d.hc()}if(2&t){const t=d.xc(2);d.Pb(1),d.Dc("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function O(t,e){if(1&t){const t=d.jc();d.ic(0,"td",39),d.ic(1,"mat-checkbox",40),d.tc("click",(function(e){return d.Nc(t),e.stopPropagation()}))("change",(function(c){d.Nc(t);const i=e.$implicit,n=d.xc(2);return c&&n.selection.toggle(i),n.onSelectionToggle(i)})),d.hc(),d.hc()}if(2&t){const t=e.$implicit,c=d.xc(2);d.Pb(1),d.Dc("checked",c.selection.isSelected(t))("aria-label",c.checkboxLabel(t))("checked",!0)}}function j(t,e){1&t&&(d.ic(0,"th",41),d.Xc(1,"Student Name"),d.hc())}function N(t,e){if(1&t&&(d.ic(0,"span"),d.Xc(1),d.hc()),2&t){const t=d.xc().$implicit;d.Pb(1),d.Yc(t.name)}}function $(t,e){if(1&t&&(d.ic(0,"td",39),d.Vc(1,N,2,1,"span",42),d.hc()),2&t){const t=e.$implicit;d.xc(2);const c=d.Lc(11);d.Pb(1),d.Dc("ngIf",t.name)("ngIfElse",c)}}function R(t,e){1&t&&d.dc(0,"tr",43)}function T(t,e){1&t&&d.dc(0,"tr",44)}function E(t,e){if(1&t){const t=d.jc();d.ic(0,"button",45),d.tc("click",(function(e){return d.Nc(t),d.xc(2).onFormReset(e)})),d.Xc(1,"Reset"),d.hc()}}const q=function(){return[5,10,25,100]};function z(t,e){if(1&t){const t=d.jc();d.ic(0,"form",6),d.tc("ngSubmit",(function(){return d.Nc(t),d.xc().onSubmit()})),d.ic(1,"div",7),d.ic(2,"div",8),d.ic(3,"mat-form-field",9),d.ic(4,"mat-label"),d.Xc(5,"Class"),d.hc(),d.ic(6,"mat-select",10),d.tc("selectionChange",(function(e){return d.Nc(t),d.xc().onClassChange(e)})),d.Vc(7,y,2,2,"mat-option",11),d.hc(),d.Vc(8,P,4,0,"mat-error",12),d.hc(),d.hc(),d.ic(9,"div",8),d.ic(10,"mat-form-field",9),d.ic(11,"mat-label"),d.Xc(12,"Section"),d.hc(),d.ic(13,"mat-select",13),d.tc("selectionChange",(function(e){return d.Nc(t),d.xc().onSectionChange(e)})),d.Vc(14,k,2,2,"mat-option",11),d.hc(),d.Vc(15,A,4,0,"mat-error",12),d.hc(),d.hc(),d.ic(16,"div",8),d.ic(17,"mat-form-field",14),d.ic(18,"mat-label"),d.Xc(19,"Select Date"),d.hc(),d.dc(20,"input",15),d.ic(21,"mat-icon",16),d.Xc(22,"date_range"),d.hc(),d.dc(23,"owl-date-time",null,17),d.Vc(25,X,4,0,"mat-error",12),d.hc(),d.hc(),d.ic(26,"div",8),d.ic(27,"mat-form-field",9),d.ic(28,"mat-label"),d.Xc(29,"Select shift"),d.hc(),d.ic(30,"mat-select",18),d.ic(31,"mat-option",19),d.Xc(32,"First shift"),d.hc(),d.ic(33,"mat-option",20),d.Xc(34,"Second shift"),d.hc(),d.hc(),d.Vc(35,V,4,0,"mat-error",12),d.hc(),d.hc(),d.ic(36,"div",21),d.ic(37,"div",22),d.ic(38,"div",23),d.ic(39,"h3"),d.ic(40,"strong"),d.Xc(41,"Student List"),d.hc(),d.hc(),d.hc(),d.ic(42,"table",24),d.gc(43,25),d.Vc(44,F,2,3,"th",26),d.Vc(45,O,2,3,"td",27),d.fc(),d.gc(46,28),d.Vc(47,j,2,0,"th",29),d.Vc(48,$,2,2,"td",27),d.fc(),d.Vc(49,R,1,0,"tr",30),d.Vc(50,T,1,0,"tr",31),d.hc(),d.dc(51,"mat-paginator",32),d.hc(),d.hc(),d.hc(),d.ic(52,"div",33),d.ic(53,"button",34),d.Xc(54,"Submit"),d.hc(),d.Vc(55,E,2,0,"button",35),d.hc(),d.hc()}if(2&t){const t=d.Lc(24),e=d.xc();d.Dc("formGroup",e.attendanceForm),d.Pb(7),d.Dc("ngForOf",e.classList),d.Pb(1),d.Dc("ngIf",e.submitted&&e.f.classid.hasError("required")),d.Pb(6),d.Dc("ngForOf",e.sectionList),d.Pb(1),d.Dc("ngIf",e.submitted&&e.f.sectionid.hasError("required")),d.Pb(5),d.Dc("owlDateTime",t)("owlDateTimeTrigger",t),d.Pb(1),d.Dc("owlDateTimeTrigger",t),d.Pb(4),d.Dc("ngIf",e.submitted&&e.f.date.hasError("required")),d.Pb(10),d.Dc("ngIf",e.submitted&&e.f.attendace_part.hasError("required")),d.Pb(7),d.Dc("dataSource",e.studentList),d.Pb(7),d.Dc("matHeaderRowDef",e.displayedColumns),d.Pb(1),d.Dc("matRowDefColumns",e.displayedColumns),d.Pb(1),d.Dc("length",e.recordLength)("pageSize",10)("pageSizeOptions",d.Gc(17,q)),d.Pb(4),d.Dc("ngIf",!e.showButtons)}}function M(t,e){}let U=(()=>{class t{constructor(t,e,c,i,n){this._cs=t,this._router=e,this._activatedRout=c,this._date=i,this._snackBar=n,this.displayedColumns=["select","name"],this.filterData="",this.isLoading=!0,this.classList=[],this.sectionList=[],this.classID=new l.g,this.sectionID=new l.g,this.shift=new l.g,this.studentNameRecord=[],this.absentStudentsID=[],this.selection=new r.c(!0,this.studentList?this.studentList.data:[]),this.loading=!1,this.submitted=!1,this.isSelected=!0,this.isFormActive=!0,this.error="",this.cardTitle="Add New Students",this.showButtons=!1,this.buttonLabel="Submit",this.showForm=!0,this.disabled=!1,this.showSpinners=!0,this.showSeconds=!1,this.touchUi=!1,this.enableMeridian=!1,this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.color="primary"}ngOnInit(){this.attendanceForm=new l.j({classid:new l.g(null,l.x.required),sectionid:new l.g(null,l.x.required),attendace_part:new l.g(null,l.x.required),date:new l.g(new Date,l.x.required)}),this.isAllSelected(),this.getClassSection(),this.getStudentAttendanceList()}getClassSection(){this._cs.getClassSection().subscribe(t=>{t&&(this.classList=t)})}onClassChange(t){t&&this._cs.getSections(t.value).subscribe(t=>{t&&(this.sectionList=t)})}getStudentList(){this.attendanceForm.value.classid&&this.attendanceForm.value.sectionid&&this._cs.getStudentRecord(this.attendanceForm.value.classid,this.attendanceForm.value.sectionid).subscribe(t=>{t&&(this.recordLength=t.length,this.studentNameRecord=t,this.studentList=new o.k(t),this.selection=new r.c(!0,this.studentList.data),this.studentList.sort=this.TSort,this.studentList.paginator=this.paginator,this.isLoading=!1)})}getAttendanceList(){this._cs.getStudentAttendance(this.classID.value,this.sectionID.value).subscribe(t=>{if(t){let e,c=[],i={};t&&t.length&&t[0].absent_student_names1?e=t[0].absent_student_id1.split(","):t&&t.length&&t[0].absent_student_names2&&(e=t[0].absent_student_id2.split(",")),e&&e.length&&(e.map((e,n)=>{i.id=t[0].id,i.name=e,i.class=t[0].classname,i.section=t[0].sectionname,i.date=t[0].date,c.push(Object.assign({},i))}),console.log("absentStudentRecord",c))}this.isLoading=!1})}getStudentAttendanceList(){this._cs.getStudentAttendance(this.classID.value,this.sectionID.value).subscribe(t=>{})}onSectionChange(t){t&&this.getStudentList()}get f(){return this.attendanceForm.controls}showNotification(t){this._snackBar.open(t,"",{duration:2e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["success-snackbar"]})}onFormReset(t){t&&this.attendanceForm&&this.attendanceForm.reset()}isAllSelected(){if(this.studentList)return this.selection.selected.length===this.studentList.data.length}onSelectionToggle(t){!1===this.selection.isSelected(t)&&this.absentStudentsID.push(t.id)}masterToggle(){this.isAllSelected()?this.selection.clear():this.studentList.data.forEach(t=>this.selection.select(t))}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.position+1}`:(this.isAllSelected()?"select":"deselect")+" all"}applyFilter(t){this.studentList.filter=t.target.value.trim().toLowerCase(),this.studentList.paginator&&this.studentList.paginator.firstPage()}onSubmit(){if(this.submitted=!0,this.attendanceForm.invalid)return;this.attendanceForm.value&&(this.attendanceForm.value.date=this._date.transform(this.attendanceForm.value.date,"MM/dd/yyyy h:mm a"));const t={},e=[];Object.assign(t,this.attendanceForm.value),console.log("absentStudentsID",this.absentStudentsID),console.log(" this.studentNameRecord",this.studentNameRecord),this.absentStudentsID.map(t=>{this.studentNameRecord.map(c=>{c.id===t&&e.push(c.name)})}),console.log("studentsName",e),"shift_1"===t.attendace_part?(t.part1=!0,t.part2=!1,t.absent_student_id1=this.absentStudentsID.toString(),t.absent_student_names1=e.toString(),t.absent_student_names2=null,t.absent_student_id2=null):"shift_2"===this.attendanceForm.value.attendace_part&&(t.part2=!0,t.part1=!1,t.absent_student_id2=this.absentStudentsID.toString(),t.absent_student_names2=e.toString(),t.absent_student_names1=null,t.absent_student_id1=null),delete t.attendace_part,this.classList&&this.classList.length&&this.classList.map(e=>{t.classid===e.id&&(t.classname=e.classname)}),this.sectionList&&this.sectionList.length&&this.sectionList.map(e=>{t.sectionid===e.id&&(t.sectionname=e.sectionname)}),this.loading=!0,this._cs.saveAttendance(t).subscribe(t=>{this.showNotification("Submitted Successfully!!"),this.attendanceForm.reset(),this.isFormActive=!1,setTimeout(()=>this.isFormActive=!0,0),this.getStudentList(),this.showForm=!1,this.studentList=new o.k([]),setTimeout(()=>{this.showForm=!0},50)},t=>{this.error=t,this.loading=!1,console.error(this.error)})}}return t.\u0275fac=function(e){return new(e||t)(d.cc(g),d.cc(n.g),d.cc(n.a),d.cc(i.f),d.cc(b.a))},t.\u0275cmp=d.Wb({type:t,selectors:[["app-attendance"]],viewQuery:function(t,e){var c;1&t&&(d.Rc(s.a,!0),d.Rc(a.a,!0)),2&t&&(d.Kc(c=d.uc())&&(e.paginator=c.first),d.Kc(c=d.uc())&&(e.TSort=c.first))},features:[d.Ob([i.f])],decls:12,vars:1,consts:[[1,"form-container"],[1,"page-title"],[1,"form-fields"],[1,"pt-2"],[3,"formGroup","ngSubmit",4,"ngIf"],["dash",""],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12","col-sm-6","col-md-4"],["appearance","outline",1,"p-0"],["placeholder","Select Class","formControlName","classid",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["placeholder","Select Section","formControlName","sectionid",3,"selectionChange"],["appearance","outline",1,"col-12","p-0"],["matInput","","placeholder","Date Time","formControlName","date",3,"owlDateTime","owlDateTimeTrigger"],["matSuffix","",2,"cursor","pointer",3,"owlDateTimeTrigger"],["dt2",""],["placeholder","Select shift","formControlName","attendace_part"],["value","shift_1"],["value","shift_2"],[1,"list-container","col-12"],[1,"s-list","studentList","p-0"],[1,"list-head"],["mat-table","","matSort","",1,"col-12",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],[1,"example-button-row","pt-3","text-center"],["mat-raised-button","","color","primary","type","submit"],["mat-raised-button","","class","ml-3 mat-secondary",3,"click",4,"ngIf"],[3,"value"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell","","mat-sort-header",""],[4,"ngIf","ngIfElse"],["mat-header-row",""],["mat-row",""],["mat-raised-button","",1,"ml-3","mat-secondary",3,"click"]],template:function(t,e){1&t&&(d.ic(0,"div",0),d.ic(1,"div",1),d.ic(2,"h3"),d.Xc(3,"Attendance"),d.hc(),d.hc(),d.ic(4,"div",2),d.ic(5,"mat-card"),d.ic(6,"mat-card-title"),d.Xc(7,"Student Attendance"),d.hc(),d.ic(8,"mat-card-content",3),d.Vc(9,z,56,18,"form",4),d.hc(),d.hc(),d.hc(),d.Vc(10,M,0,0,"ng-template",null,5,d.Wc),d.hc()),2&t&&(d.Pb(9),d.Dc("ngIf",e.isFormActive))},directives:[D.a,D.d,D.b,i.n,l.z,l.r,l.k,S.c,S.f,w.a,l.q,l.i,i.m,v.b,l.c,_.b,_.d,L.a,S.g,_.a,C.n,o.j,a.a,o.c,o.e,o.b,o.g,o.i,s.a,I.a,S.b,o.d,x.a,o.a,a.b,o.f,o.h],styles:[""]}),t})();var H=c("1kSV");function Y(t,e){if(1&t&&(d.ic(0,"mat-option",31),d.Xc(1),d.hc()),2&t){const t=e.$implicit;d.Dc("value",t.id),d.Pb(1),d.Yc(t.classname)}}function B(t,e){if(1&t&&(d.ic(0,"mat-option",31),d.Xc(1),d.hc()),2&t){const t=e.$implicit;d.Dc("value",t.id),d.Pb(1),d.Yc(t.sectionname)}}function G(t,e){if(1&t){const t=d.jc();d.ic(0,"th",32),d.ic(1,"mat-checkbox",33),d.tc("change",(function(e){d.Nc(t);const c=d.xc();return e?c.masterToggle():null})),d.hc(),d.hc()}if(2&t){const t=d.xc();d.Pb(1),d.Dc("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())("aria-label",t.checkboxLabel())}}function K(t,e){if(1&t){const t=d.jc();d.ic(0,"td",34),d.ic(1,"mat-checkbox",35),d.tc("click",(function(e){return d.Nc(t),e.stopPropagation()}))("change",(function(c){d.Nc(t);const i=e.$implicit,n=d.xc();return c?n.selection.toggle(i):null})),d.hc(),d.hc()}if(2&t){const t=e.$implicit,c=d.xc();d.Pb(1),d.Dc("checked",c.selection.isSelected(t))("aria-label",c.checkboxLabel(t))}}function W(t,e){1&t&&(d.ic(0,"th",36),d.Xc(1,"Absent Students"),d.hc())}function J(t,e){if(1&t&&(d.ic(0,"span"),d.Xc(1),d.hc()),2&t){const t=d.xc().$implicit;d.Pb(1),d.Yc(t.name)}}function Z(t,e){if(1&t&&(d.ic(0,"td",34),d.Vc(1,J,2,1,"span",37),d.hc()),2&t){const t=e.$implicit;d.xc();const c=d.Lc(56);d.Pb(1),d.Dc("ngIf",t.name)("ngIfElse",c)}}function Q(t,e){1&t&&(d.ic(0,"th",36),d.Xc(1,"Class Name"),d.hc())}function tt(t,e){if(1&t&&(d.ic(0,"span"),d.Xc(1),d.hc()),2&t){const t=d.xc().$implicit;d.Pb(1),d.Yc(t.class)}}function et(t,e){if(1&t&&(d.ic(0,"td",34),d.Vc(1,tt,2,1,"span",37),d.hc()),2&t){const t=e.$implicit;d.xc();const c=d.Lc(56);d.Pb(1),d.Dc("ngIf",t.class)("ngIfElse",c)}}function ct(t,e){1&t&&(d.ic(0,"th",36),d.Xc(1," Section Name "),d.hc())}function it(t,e){if(1&t&&(d.ic(0,"span"),d.Xc(1),d.hc()),2&t){const t=d.xc().$implicit;d.Pb(1),d.Yc(t.section)}}function nt(t,e){if(1&t&&(d.ic(0,"td",34),d.Vc(1,it,2,1,"span",37),d.hc()),2&t){const t=e.$implicit;d.xc();const c=d.Lc(56);d.Pb(1),d.Dc("ngIf",t.section)("ngIfElse",c)}}function st(t,e){1&t&&(d.ic(0,"th",36),d.Xc(1," Date "),d.hc())}function at(t,e){if(1&t&&(d.ic(0,"span",39),d.Xc(1),d.yc(2,"date"),d.hc()),2&t){const t=d.xc().$implicit;d.Pb(1),d.Zc(" ",d.Ac(2,1,t.date,"MM/dd/yyyy")," ")}}function ot(t,e){if(1&t&&(d.ic(0,"td",34),d.Vc(1,at,3,4,"span",38),d.hc()),2&t){const t=e.$implicit;d.xc();const c=d.Lc(56);d.Pb(1),d.Dc("ngIf",t.date)("ngIfElse",c)}}function rt(t,e){1&t&&d.dc(0,"th",40)}function lt(t,e){if(1&t){const t=d.jc();d.ic(0,"td",34),d.ic(1,"div",41),d.ic(2,"div",42),d.dc(3,"span",43),d.ic(4,"div",44),d.ic(5,"button",45),d.tc("click",(function(){d.Nc(t);const c=e.$implicit;return d.xc().onDelete(c)})),d.dc(6,"span",46),d.Xc(7,"\xa0\xa0\xa0Delete"),d.hc(),d.hc(),d.hc(),d.hc(),d.hc()}}function dt(t,e){1&t&&d.dc(0,"tr",47)}function ht(t,e){1&t&&d.dc(0,"tr",48)}function ut(t,e){1&t&&d.Xc(0,"---")}const mt=function(){return[5,10,25,100]},ft=[{path:"",component:U},{path:"list",component:(()=>{class t{constructor(t,e,c){this._cs=t,this._router=e,this._activatedRout=c,this.displayedColumns=["select","name","class","section","date","actions"],this.filterData="",this.isLoading=!0,this.selection=new r.c(!0,[]),this.classID=new l.g,this.sectionID=new l.g,this.classList=[],this.sectionList=[]}ngOnInit(){this.getClassSection()}getAttendanceList(){this._cs.getStudentAttendance(this.classID.value,this.sectionID.value).subscribe(t=>{if(t){let e,c=[],i={};t&&t.length&&t[0].absent_student_names1?e=t[0].absent_student_names1.split(","):t&&t.length&&t[0].absent_student_names2&&(e=t[0].absent_student_names2.split(",")),e&&e.length&&(e.map((e,n)=>{i.id=t[0].id,i.name=e,i.class=t[0].classname,i.section=t[0].sectionname,i.date=t[0].date,c.push(Object.assign({},i))}),console.log("absentStudentRecord",c)),this.recordLength=c.length,this.attendanceList=new o.k(c),this.attendanceList.sort=this.TSort,this.attendanceList.paginator=this.paginator}this.isLoading=!1})}getClassSection(){this._cs.getClassSection().subscribe(t=>{t&&(this.classList=t)})}onClassChange(t){t&&this._cs.getSections(t.value).subscribe(t=>{t&&(this.sectionList=t)})}isAllSelected(){if(this.classID.value&&this.sectionID.value&&this.attendanceList)return this.selection.selected.length===this.attendanceList.data.length}masterToggle(){this.classID.value&&this.sectionID.value&&(this.isAllSelected()?this.selection.clear():this.attendanceList.data.forEach(t=>this.selection.select(t)))}checkboxLabel(t){return t?`${this.selection.isSelected(t)?"deselect":"select"} row ${t.position+1}`:(this.isAllSelected()?"select":"deselect")+" all"}applyFilter(t){this.attendanceList.filter=t.target.value.trim().toLowerCase(),this.attendanceList.paginator&&this.attendanceList.paginator.firstPage()}onDelete(t){console.log("row",t),confirm("Are sure you want to delete this attendance record?")&&this._cs.deleteAttendance(t.id).subscribe(t=>{this.getAttendanceList()})}onEdit(t){this._router.navigate(["attendance"],{queryParams:{id:t.id}})}}return t.\u0275fac=function(e){return new(e||t)(d.cc(g),d.cc(n.g),d.cc(n.a))},t.\u0275cmp=d.Wb({type:t,selectors:[["app-attendance-list"]],viewQuery:function(t,e){var c;1&t&&(d.Rc(s.a,!0),d.Rc(a.a,!0)),2&t&&(d.Kc(c=d.uc())&&(e.paginator=c.first),d.Kc(c=d.uc())&&(e.TSort=c.first))},decls:57,vars:11,consts:[[1,"list-container"],[1,"page-title"],[1,"s-list"],[1,"row"],[1,"col-5"],["appearance","outline",1,"p-0","w-100"],["placeholder","Select Class",3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Select Section",3,"formControl"],[1,"col-2","pt-1","mt-1"],["mat-raised-button","","color","primary","type","button",3,"click"],[1,"list-head"],["appearance","outline",1,"col-12","p-0"],["matInput","","placeholder","Search...",3,"keyup"],["matSuffix",""],[1,"pt-4"],["mat-table","","matSort","",1,"col-12",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","class"],["matColumnDef","section"],["matColumnDef","date"],["matColumnDef","actions"],["mat-header-cell","","style","width: 50px;",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],["dash",""],[3,"value"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell","","mat-sort-header",""],[4,"ngIf","ngIfElse"],["class","p-0 m-0",4,"ngIf","ngIfElse"],[1,"p-0","m-0"],["mat-header-cell","",2,"width","50px"],[1,"col"],["ngbDropdown","",1,"d-inline-block"],["id","dropdownBasic1","ngbDropdownToggle","",1,"flaticon-more-button-of-three-dots"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],["ngbDropdownItem","",3,"click"],[1,"fa","fa-trash",2,"color","#f00"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(d.ic(0,"div",0),d.ic(1,"div",1),d.ic(2,"h3"),d.Xc(3,"Attendance"),d.hc(),d.hc(),d.ic(4,"div",2),d.ic(5,"div",3),d.ic(6,"div",4),d.ic(7,"mat-form-field",5),d.ic(8,"mat-label"),d.Xc(9,"Class"),d.hc(),d.ic(10,"mat-select",6),d.tc("selectionChange",(function(t){return e.onClassChange(t)})),d.Vc(11,Y,2,2,"mat-option",7),d.hc(),d.hc(),d.hc(),d.ic(12,"div",4),d.ic(13,"mat-form-field",5),d.ic(14,"mat-label"),d.Xc(15,"Section"),d.hc(),d.ic(16,"mat-select",8),d.Vc(17,B,2,2,"mat-option",7),d.hc(),d.hc(),d.hc(),d.ic(18,"div",9),d.ic(19,"button",10),d.tc("click",(function(){return e.getAttendanceList()})),d.Xc(20,"Search"),d.hc(),d.hc(),d.hc(),d.ic(21,"mat-card"),d.ic(22,"div",11),d.ic(23,"mat-card-title"),d.Xc(24,"Student Attendance"),d.hc(),d.ic(25,"div"),d.ic(26,"mat-form-field",12),d.ic(27,"mat-label"),d.Xc(28,"Filter"),d.hc(),d.ic(29,"input",13),d.tc("keyup",(function(t){return e.applyFilter(t)})),d.hc(),d.ic(30,"mat-icon",14),d.Xc(31,"search"),d.hc(),d.hc(),d.hc(),d.hc(),d.ic(32,"mat-card-content",15),d.ic(33,"table",16),d.gc(34,17),d.Vc(35,G,2,3,"th",18),d.Vc(36,K,2,2,"td",19),d.fc(),d.gc(37,20),d.Vc(38,W,2,0,"th",21),d.Vc(39,Z,2,2,"td",19),d.fc(),d.gc(40,22),d.Vc(41,Q,2,0,"th",21),d.Vc(42,et,2,2,"td",19),d.fc(),d.gc(43,23),d.Vc(44,ct,2,0,"th",21),d.Vc(45,nt,2,2,"td",19),d.fc(),d.gc(46,24),d.Vc(47,st,2,0,"th",21),d.Vc(48,ot,2,2,"td",19),d.fc(),d.gc(49,25),d.Vc(50,rt,1,0,"th",26),d.Vc(51,lt,8,0,"td",19),d.fc(),d.Vc(52,dt,1,0,"tr",27),d.Vc(53,ht,1,0,"tr",28),d.hc(),d.dc(54,"mat-paginator",29),d.hc(),d.hc(),d.hc(),d.hc(),d.Vc(55,ut,1,0,"ng-template",null,30,d.Wc)),2&t&&(d.Pb(10),d.Dc("formControl",e.classID),d.Pb(1),d.Dc("ngForOf",e.classList),d.Pb(5),d.Dc("formControl",e.sectionID),d.Pb(1),d.Dc("ngForOf",e.sectionList),d.Pb(16),d.Dc("dataSource",e.attendanceList),d.Pb(19),d.Dc("matHeaderRowDef",e.displayedColumns),d.Pb(1),d.Dc("matRowDefColumns",e.displayedColumns),d.Pb(1),d.Dc("length",e.recordLength)("pageSize",10)("pageSizeOptions",d.Gc(10,mt)))},directives:[S.c,S.f,w.a,l.q,l.h,i.m,I.a,D.a,D.d,v.b,L.a,S.g,D.b,o.j,a.a,o.c,o.e,o.b,o.g,o.i,s.a,C.n,o.d,x.a,o.a,a.b,i.n,H.a,H.e,H.c,H.b,o.f,o.h],pipes:[i.f],styles:[""]}),t})()}];let pt=(()=>{class t{}return t.\u0275mod=d.ac({type:t}),t.\u0275inj=d.Zb({factory:function(e){return new(e||t)},imports:[[n.i.forChild(ft)],n.i]}),t})();var gt=c("jAig");let bt=(()=>{class t{}return t.\u0275mod=d.ac({type:t}),t.\u0275inj=d.Zb({factory:function(e){return new(e||t)},imports:[[i.c,pt,l.m,l.w,H.d,gt.a]]}),t})()}}]);